{"ts":"2026-02-17T00:00:00Z","agent":"lead","task":"planning","dec":"Split phase into 3 plans: bootstrap bug fix (01-01), naming audit + docs (01-02), naming validation script (01-03)","reason":"REQ-01 and REQ-02 are independent work streams. The naming validation script (01-03) depends on the audit findings (01-02) but the bootstrap fix (01-01) is fully independent.","alts":["2 plans (combine audit and validation)","4 plans (separate audit from documentation)"]}
{"ts":"2026-02-17T00:00:01Z","agent":"lead","task":"planning","dec":"Wave 1 for bootstrap fix and naming audit (parallel), wave 2 for validation script","reason":"01-01 and 01-02 have zero file overlap and address different requirements. 01-03 needs audit findings from 01-02 to know what patterns to validate.","alts":["All wave 1 (but 01-03 needs 01-02 findings)","All sequential (unnecessarily serialized)"]}
{"ts":"2026-02-17T00:00:02Z","agent":"lead","task":"planning","dec":"Identified 3 root causes for CLAUDE.md override bug: (1) YOLO_SECTIONS missing Department Architecture, (2) content between heading and first section duplicated, (3) go.md step 8 uses inline regeneration not bootstrap-claude.sh","reason":"Code inspection of bootstrap-claude.sh lines 23-31 vs CLAUDE.md actual sections, lines 146-151 heading/core-value skip logic, and go.md line 411 ship step 8.","alts":[]}
{"ts":"2026-02-17T00:00:03Z","agent":"lead","task":"planning","dec":"Identified 5 naming inconsistencies across milestones: (1) p field compound vs simple, (2) n field title vs number, (3) task key sets differ (ac/n/d vs a/tp/v/done), (4) missing tp field, (5) summary legacy keys (commits vs ch, tasks vs tc)","reason":"Compared plan headers from dynamic-departments (p='01-01', n='Project Type Config...'), teammate-api (p='01', n='01'), and performance-opt milestones against artifact-formats.md canonical schema.","alts":[]}
{"ts":"2026-02-17T00:01:00Z","agent":"architect","task":"architecture","dec":"D1: Section registry pattern — YOLO_SECTIONS auto-verified against generate_yolo_sections() output at startup","reason":"Prevents silent drift between declared and generated sections. Root cause of Department Architecture bug (C1,C4). Explicit array is safer than dynamic extraction because ordering matters.","alts":["Dynamic extraction from function output","Shared config file for section list"]}
{"ts":"2026-02-17T00:01:01Z","agent":"architect","task":"architecture","dec":"D2: Single CLAUDE.md regeneration path — all callers (init.md 3.5, go.md B6, go.md archive 8) use bootstrap-claude.sh","reason":"4+ divergent code paths caused the override bug. init.md 3.5 (C1) and go.md archive step 8 (C4) both had inline CLAUDE.md generation. Single entry point eliminates this class of bugs.","alts":["Shared shell function sourced by callers","Template file approach"]}
{"ts":"2026-02-17T00:01:02Z","agent":"architect","task":"architecture","dec":"D3: validate-naming.sh as separate complementary script, not merged into validate-plan.sh","reason":"Naming validation applies to 14+ artifact types (summaries, decisions, critique, etc.), not just plans. validate-plan.sh calls validate-naming.sh for plan-specific checks.","alts":["Extend validate-plan.sh directly","Inline validation in each agent"]}
{"ts":"2026-02-17T00:01:03Z","agent":"architect","task":"architecture","dec":"D4: Archive-aware validation with --scope=active|all flag, default active","reason":"Archived milestones have legacy naming (C3). Mass failures with no remediation path are not useful. Active-only default prevents noise while --scope=all enables full audit.","alts":["Exclude archives entirely","Auto-detect and skip legacy formats"]}
{"ts":"2026-02-17T00:01:04Z","agent":"architect","task":"architecture","dec":"D5: Drift-detection test between naming-conventions.md and validate-naming.sh","reason":"Two documents covering same patterns will inevitably drift (C8). Automated test extracts patterns from naming-conventions.md and verifies validate-naming.sh has corresponding checks.","alts":["Manual review process","Generate validate-naming.sh from naming-conventions.md"]}
{"ts":"2026-02-17T00:01:05Z","agent":"architect","task":"architecture","dec":"D6: Fix reqs.jsonl to use canonical keys per artifact-formats.md (p->pri, d->desc, add st,ac)","reason":"reqs.jsonl was written before canonical keys were formalized (C2). Current p and d keys conflict with plan.jsonl p (phase) and d (depends_on) semantics.","alts":["Keep legacy keys and add aliases","Create new reqs.jsonl format"]}
{"ts":"2026-02-17T00:01:06Z","agent":"architect","task":"architecture","dec":"D7: Section collision detection in bootstrap-claude.sh — warn on stderr when user section matches YOLO section name","reason":"Silent collision causes content loss (C6). Warning is diagnostic, not blocking — user may intentionally name a section similarly.","alts":["Block and require rename","Auto-prefix user sections"]}
{"ts":"2026-02-17T02:00:00Z","agent":"senior","task":"spec-enrichment","dec":"T2 bootstrap fix: 7 changes in single task (YOLO_SECTIONS addition, generate_yolo_sections section, verify_section_registry, BEFORE_FIRST_SECTION flag, code-block tracking, collision detection, --minimal/--verify flags)","reason":"All 7 changes are tightly coupled modifications to the same file (bootstrap-claude.sh). Splitting into sub-tasks would require partial file states that are harder to verify. The architecture specifies all changes and the spec provides exact line references for each.","alts":["Split into 3 sub-tasks (registry, parser, flags)","Split into 7 micro-tasks (one per change)"]}
{"ts":"2026-02-17T02:00:01Z","agent":"senior","task":"spec-enrichment","dec":"T3 combines go.md step 8 fix AND init.md step 3.5 fix in single task","reason":"Both are D2 (single regeneration path) fixes with identical pattern: replace inline CLAUDE.md logic with bootstrap-claude.sh call. They are the same conceptual change applied to two files. Architecture groups them under D2.","alts":["Separate tasks for go.md and init.md","Add init.md as T5 in the plan"]}
{"ts":"2026-02-17T02:00:02Z","agent":"senior","task":"spec-enrichment","dec":"T4 test spec adds 9 new tests to existing file rather than creating new test file","reason":"tests/unit/bootstrap/bootstrap-claude.bats already exists with 7 passing tests covering basic scenarios. New tests extend coverage for the specific bugs fixed in T2. Same test file, same setup(), same helper functions. Creating a separate file would duplicate the setup infrastructure.","alts":["New test file tests/unit/bootstrap/bootstrap-claude-fixes.bats","Replace existing tests entirely"]}
{"ts":"2026-02-17T02:00:03Z","agent":"senior","task":"spec-enrichment","dec":"01-02 naming-conventions.md: 9-section structure covers all artifact types from artifact-formats.md plus cross-department and state artifacts","reason":"Architecture D5 requires naming-conventions.md as single source of truth. 9 sections cover: file naming, plan headers, plan tasks, summaries, requirements, other artifacts (6 types), cross-department, state artifacts, anti-patterns. This matches the 14+ artifact types enumerated in C5.","alts":["Fewer sections with combined artifact tables","Generate from artifact-formats.md automatically"]}
{"ts":"2026-02-17T02:00:04Z","agent":"senior","task":"spec-enrichment","dec":"01-02 T1/T2 audit tasks provide explicit file lists and per-file checklist rather than open-ended investigation","reason":"Dev agent needs zero creative decisions per spec quality standard. Listing all 40 plan files and 32 summary files with exact jq extraction commands eliminates ambiguity. Known findings are pre-documented from sample file reads during spec enrichment.","alts":["Open-ended: 'audit all files in milestones/'","Provide jq scripts that auto-extract"]}
{"ts":"2026-02-17T02:00:05Z","agent":"senior","task":"spec-enrichment","dec":"01-02 T2 includes reqs.jsonl audit alongside summary audit rather than separate task","reason":"reqs.jsonl audit (C2) is small scope (1 file, 4 key renames) and naturally groups with summary audit as both are 'non-plan artifact auditing'. Adding a 4th task would fragment the plan unnecessarily.","alts":["Separate T4 for reqs.jsonl audit","Include reqs.jsonl fix (not just audit) in T2"]}

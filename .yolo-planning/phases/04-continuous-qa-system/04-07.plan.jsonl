{"p":"04","n":"07","t":"Post-plan and post-phase QA gate scripts","w":2,"d":["04-06"],"mh":{"tr":["Post-plan gate runs after all tasks in a plan complete, verifies summary.jsonl exists and tests pass","Post-phase gate runs full system verification including cross-plan consistency checks","Both gates produce structured JSON output matching qa-gate-post-task.sh schema","Post-phase gate integrates with existing validate-gates.sh for artifact completeness","Gates block progression: post-plan blocks next plan, post-phase blocks sign-off"],"ar":[{"p":"scripts/qa-gate-post-plan.sh","pv":"file exists and is executable","c":"Post-plan gate: verifies summary.jsonl, runs full test suite, checks must_have coverage"},{"p":"scripts/qa-gate-post-phase.sh","pv":"file exists and is executable","c":"Post-phase gate: runs validate-gates.sh for all steps, full test suite, cross-plan consistency"},{"p":"tests/unit/qa-gate-post-plan.bats","pv":"file exists","c":"Tests for post-plan gate covering plan completion verification"},{"p":"tests/unit/qa-gate-post-phase.bats","pv":"file exists","c":"Tests for post-phase gate covering full system verification"}],"kl":[{"fr":"scripts/qa-gate-post-plan.sh","to":"scripts/qa-gate-post-task.sh","vi":"Post-plan gate reuses test execution logic from post-task gate"},{"fr":"scripts/qa-gate-post-phase.sh","to":"scripts/validate-gates.sh","vi":"Post-phase gate calls validate-gates.sh for artifact completeness verification"},{"fr":"scripts/qa-gate-post-plan.sh level output","to":"references/qa-output-patterns.md","vi":"Output templates follow UX-defined patterns from 04-01"}]},"obj":"Create post-plan and post-phase QA gate scripts that verify plan completion and full system integrity respectively","sk":["commit"],"fm":["scripts/qa-gate-post-plan.sh","scripts/qa-gate-post-phase.sh","tests/unit/qa-gate-post-plan.bats","tests/unit/qa-gate-post-phase.bats"]}
{"id":"T1","tp":"auto","a":"Create scripts/qa-gate-post-plan.sh: accepts --phase-dir and --plan flags. Verifies plan summary.jsonl exists with s:complete. Runs full test suite via test-summary.sh. Checks must_have coverage from plan header mh field: verifies tr (truths) hold, ar (artifacts) exist, kl (key_links) resolve. Produces JSON {gate:pass|fail,level:post-plan,r:PASS|FAIL|PARTIAL,tests:{ps:N,fl:N},mh:{tr:N,ar:N,kl:N},dt:date}. Exit 1 on fail = blocks next plan. REQ-07 post-plan gate.","f":["scripts/qa-gate-post-plan.sh"],"v":"Script exists, is executable, verifies summary and must_haves, produces valid JSON","done":"Post-plan QA gate script committed"}
{"id":"T2","tp":"auto","a":"Create scripts/qa-gate-post-phase.sh: accepts --phase-dir flag. Runs validate-gates.sh for all 11 steps (reports which gates would pass/fail). Runs full test suite via test-summary.sh. Checks all plans have summary.jsonl with s:complete. Produces JSON {gate:pass|fail,level:post-phase,r:PASS|FAIL,steps:{passed:N,failed:N},tests:{ps:N,fl:N},plans:{complete:N,total:N},dt:date}. Exit 1 on fail = blocks sign-off. REQ-07 post-phase gate formalization.","f":["scripts/qa-gate-post-phase.sh"],"td":["T1"],"v":"Script exists, calls validate-gates.sh, checks all plans complete, produces valid JSON","done":"Post-phase QA gate script committed"}
{"id":"T3","tp":"auto","a":"Write tests/unit/qa-gate-post-plan.bats: test plan-complete scenario, plan-incomplete scenario (missing summary), must_have verification (truth holds, artifact exists, key_link resolves), test failure scenario. Minimum 6 test cases.","f":["tests/unit/qa-gate-post-plan.bats"],"td":["T1"],"v":"All tests pass, minimum 6 cases","done":"Post-plan gate tests committed"}
{"id":"T4","tp":"auto","a":"Write tests/unit/qa-gate-post-phase.bats: test all-plans-complete scenario, partial-plans scenario, gate validation pass/fail, full-test-suite pass/fail. Minimum 6 test cases.","f":["tests/unit/qa-gate-post-phase.bats"],"td":["T2"],"v":"All tests pass, minimum 6 cases","done":"Post-phase gate tests committed"}

{"p":"04","n":"05","t":"Plugin hook integration and config.md QA settings","w":2,"d":["04-03","04-04"],"mh":{"tr":["QA gates fire at correct hook points without breaking existing hook chain","Config.md exposes all QA gate settings via interactive and direct modes","Backward compatible: projects without qa_gates config work unchanged"],"ar":[{"p":"commands/config.md","pv":"QA gates section in settings reference","c":"Config.md has QA gate toggle options in interactive mode and settings reference table"}],"kl":[{"fr":"commands/config.md QA settings","to":"config/defaults.json qa_gates","vi":"Every config.md QA option maps to a qa_gates key in defaults.json"},{"fr":"scripts/qa-gate.sh hook points","to":"references/execute-protocol.md steps","vi":"Post-task fires after step 7 per-task, post-plan after step 7 per-plan, post-phase after step 9"}]}}
{"id":"T1","tp":"auto","a":"Update scripts/qa-gate.sh to read qa_gates config via resolve-qa-config.sh. Add gate-level dispatch: accept --level post-task|post-plan|post-phase argument. Each level runs its specific checks. Preserve existing structural checks as post-plan level. Fail-open on config read errors.","f":["scripts/qa-gate.sh"],"v":"qa-gate.sh accepts --level flag, reads config, dispatches per level, still fail-open","done":"QA gate hook updated with level dispatch"}
{"id":"T2","tp":"auto","a":"Add post-task gate logic to qa-gate.sh: verify task commit exists, verify task tests pass (if test-plan.jsonl references task), write post-task gate result JSONL via format-gate-result.sh. Respects qa_gates.post_task toggle and timeout_seconds.","f":["scripts/qa-gate.sh"],"td":["T1"],"v":"Post-task gate runs tests for individual task, produces JSONL result, skips when disabled","done":"Post-task gate logic committed"}
{"id":"T3","tp":"auto","a":"Add post-phase gate logic to qa-gate.sh: aggregate all plan-level results, run full test suite, verify all plans have summaries, produce post-phase gate result JSONL. Respects qa_gates.post_phase toggle.","f":["scripts/qa-gate.sh"],"td":["T2"],"v":"Post-phase gate aggregates plan results and produces phase-level JSONL","done":"Post-phase gate logic committed"}
{"id":"T4","tp":"auto","a":"Update commands/config.md: add QA Gates to Step 2 interactive options. Add qa_gates settings to Settings Reference table (qa_gates.post_task, qa_gates.post_plan, qa_gates.post_phase, qa_gates.timeout_seconds, qa_gates.failure_threshold). Add Step 2.7 for QA gate toggle interaction.","f":["commands/config.md"],"td":["T1"],"v":"Config.md has QA gates in interactive flow and settings reference table","done":"Config.md QA gate settings committed"}
{"id":"T5","tp":"auto","a":"Write bats tests for updated qa-gate.sh: test --level post-task with passing/failing task, test --level post-plan (existing structural checks), test --level post-phase aggregation, test gate disabled via config produces skip, test timeout handling.","f":["tests/qa-gate.bats"],"td":["T3"],"v":"All bats tests pass, covers all three levels, disabled gates, and timeout","done":"QA gate hook tests committed"}

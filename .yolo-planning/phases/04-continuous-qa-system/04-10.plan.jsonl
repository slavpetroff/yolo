{"p":"04","n":"10","t":"QA gate config, validate-gates update, and integration tests","w":2,"d":["04-06","04-07","04-08"],"mh":{"tr":["config/defaults.json includes qa_gates object with per-level enable/disable toggles","validate-gates.sh recognizes post_task_qa and post_plan_qa as valid gate check points","Integration test verifies full gate cascade: post-task -> post-plan -> post-phase","Config defaults: post-task enabled, post-plan enabled, post-phase enabled"],"ar":[{"p":"config/defaults.json","pv":"file exists","c":"Contains qa_gates object with post_task, post_plan, post_phase boolean toggles"},{"p":"scripts/validate-gates.sh","pv":"file exists","c":"Updated with post_task_qa and post_plan_qa step entries in the case statement"},{"p":"tests/integration/qa-gate-cascade.bats","pv":"file exists","c":"Integration test verifying gate cascade from post-task through post-phase"},{"p":"tests/unit/validate-gates.bats","pv":"file exists","c":"Updated with tests for new post_task_qa and post_plan_qa gate entries"}],"kl":[{"fr":"config/defaults.json qa_gates","to":"scripts/qa-gate-post-task.sh","vi":"Config toggles control whether post-task gate runs"},{"fr":"scripts/validate-gates.sh post_task_qa","to":"scripts/qa-gate-post-task.sh","vi":"Gate validation can verify post-task gate prerequisites"},{"fr":"tests/integration/qa-gate-cascade.bats","to":"scripts/qa-gate-post-task.sh + qa-gate-post-plan.sh + qa-gate-post-phase.sh","vi":"Integration test exercises all three gates in sequence"}]},"obj":"Add QA gate configuration to defaults.json, update validate-gates.sh for new gate types, and write integration tests verifying the full gate cascade","sk":["commit"],"fm":["config/defaults.json","scripts/validate-gates.sh","tests/unit/validate-gates.bats","tests/integration/qa-gate-cascade.bats"]}
{"id":"T1","tp":"auto","a":"Add qa_gates configuration object to config/defaults.json: {post_task: true, post_plan: true, post_phase: true}. These control whether each gate level runs during execution. Update qa-gate-post-task.sh, qa-gate-post-plan.sh, qa-gate-post-phase.sh to read their respective toggle from config (skip with exit 0 and JSON {gate:skipped} when disabled). Backward compatible: missing qa_gates key defaults to all enabled.","f":["config/defaults.json","scripts/qa-gate-post-task.sh","scripts/qa-gate-post-plan.sh","scripts/qa-gate-post-phase.sh"],"v":"Config has qa_gates object, each gate script reads its toggle, skip produces valid JSON","done":"QA gate config toggles committed"}
{"id":"T2","tp":"auto","a":"Update scripts/validate-gates.sh: add post_task_qa and post_plan_qa entries to the case statement. post_task_qa entry: verify post-task gate result JSON exists for the specified task. post_plan_qa entry: verify post-plan gate result JSON exists for the specified plan. Both follow existing pattern of check_artifact_exists with fallback to step skip status.","f":["scripts/validate-gates.sh"],"td":["T1"],"v":"validate-gates.sh accepts --step post_task_qa and post_plan_qa, produces correct JSON output","done":"Validate-gates updated with new gate types"}
{"id":"T3","tp":"auto","a":"Update tests/unit/validate-gates.bats: add tests for post_task_qa step (passes when gate result exists, fails when missing), post_plan_qa step (passes when gate result exists, fails when missing). Follow existing test patterns in the file. Minimum 4 new test cases.","f":["tests/unit/validate-gates.bats"],"td":["T2"],"v":"New tests pass, minimum 4 cases for the two new gate types","done":"Validate-gates tests updated"}
{"id":"T4","tp":"auto","a":"Write tests/integration/qa-gate-cascade.bats: end-to-end test of gate cascade. Setup creates a mock phase dir with plan.jsonl, summary.jsonl, and test fixtures. Test 1: run post-task gate (should pass). Test 2: run post-plan gate (should pass using post-task results). Test 3: run post-phase gate (should pass using post-plan results). Test 4: introduce test failure, verify post-task gate blocks. Test 5: verify cascade stops (post-plan not reached when post-task fails). Minimum 5 test cases.","f":["tests/integration/qa-gate-cascade.bats"],"td":["T3"],"v":"All 5 integration tests pass, cascade behavior verified","done":"QA gate cascade integration tests committed"}

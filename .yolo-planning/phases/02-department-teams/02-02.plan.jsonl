{"p":"02","n":"02","t":"Security and Owner agent Teammate API sections plus dept-orchestrate teammate routing","w":1,"d":[],"xd":[{"p":"01","n":"01","a":"scripts/resolve-team-mode.sh","r":"dept-orchestrate reads team_mode to decide spawn plan routing"},{"p":"01","n":"02","a":"references/teammate-api-patterns.md","r":"Teammate API patterns referenced by agent sections"}],"mh":{"tr":["dept-orchestrate.sh outputs team_mode field in spawn plan JSON when team_mode=teammate","dept-orchestrate.sh output unchanged when team_mode=task (backward compatible)","Owner Teammate API section documents file-based communication (Owner is NOT in any team)","Security Teammate API section documents SendMessage to Lead for audit results"],"ar":[{"p":"agents/yolo-security.md","pv":"## Teammate API","c":"section with SendMessage security_audit schema to Lead"},{"p":"agents/yolo-owner.md","pv":"## Teammate API","c":"section documenting file-based cross-team communication (Owner not in any dept team)"},{"p":"scripts/dept-orchestrate.sh","pv":"team_mode","c":"spawn plan includes team_mode field from resolve-team-mode.sh"}],"kl":[{"fr":"scripts/dept-orchestrate.sh","to":"scripts/resolve-team-mode.sh","vi":"dept-orchestrate calls resolve-team-mode.sh"},{"fr":"agents/yolo-security.md ## Teammate API","to":"references/teammate-api-patterns.md","vi":"@references/teammate-api-patterns.md link present"}]},"obj":"Complete agent Teammate API coverage (security + owner) and add team_mode-aware routing to dept-orchestrate.sh spawn plan output (REQ-03)","sk":["commit"],"fm":["agents/yolo-security.md","agents/yolo-owner.md","scripts/dept-orchestrate.sh"],"auto":true}
{"id":"T1","tp":"auto","a":"Add Teammate API section to yolo-security.md with SendMessage security_audit schema to Lead, shutdown response handling. Security is receive-only from Lead (audit request) and sends results back. FAIL = hard stop behavior unchanged.","f":["agents/yolo-security.md"],"v":"File contains '## Teammate API' section with security_audit SendMessage schema","done":"Security agent has Teammate API section, committed"}
{"id":"T2","tp":"auto","a":"Add Teammate API section to yolo-owner.md documenting that Owner is NOT in any department team. Owner communicates via file-based artifacts (.dept-status-{dept}.json, department_result) regardless of team_mode. Section explains why: Owner spans all departments, SendMessage is intra-team only.","f":["agents/yolo-owner.md"],"v":"File contains '## Teammate API' section explaining file-based communication rationale","done":"Owner agent has Teammate API section, committed"}
{"id":"T3","tp":"auto","a":"Modify dept-orchestrate.sh to call resolve-team-mode.sh and include team_mode + spawn_strategy fields in JSON output. When team_mode=teammate: each wave gets spawn_strategy='spawnTeam' and team_name='yolo-{dept}'. When team_mode=task: spawn_strategy='task' (current behavior). Output schema adds: team_mode at top level, spawn_strategy+team_name per dept in each wave. (REQ-03)","f":["scripts/dept-orchestrate.sh"],"v":"Output JSON includes team_mode field, waves include spawn_strategy per dept when teammate mode","done":"dept-orchestrate outputs team_mode-aware spawn plan, committed"}
{"id":"T4","tp":"auto","a":"Update teammate-api-patterns.md to register Phase 2 roles in the 'Registering Teammates' section: add tester, qa, qa-code, security to the registration order. Update the note about Phase 2 adding these roles.","f":["references/teammate-api-patterns.md"],"v":"Registration order lists all roles including tester, qa, qa-code, security. Phase 2 note removed or updated to reflect completion.","done":"teammate-api-patterns.md updated with full agent roster, committed"}

{"p":"02","n":"02","t":"Security and Owner agent Teammate API sections plus dept-orchestrate teammate routing","w":1,"d":[],"xd":[{"p":"01","n":"01","a":"scripts/resolve-team-mode.sh","r":"dept-orchestrate reads team_mode to decide spawn plan routing"},{"p":"01","n":"02","a":"references/teammate-api-patterns.md","r":"Teammate API patterns referenced by agent sections"}],"mh":{"tr":["dept-orchestrate.sh outputs team_mode field in spawn plan JSON when team_mode=teammate","dept-orchestrate.sh output unchanged when team_mode=task (backward compatible)","Owner Teammate API section documents file-based communication (Owner is NOT in any team)","Security Teammate API section documents SendMessage to Lead for audit results"],"ar":[{"p":"agents/yolo-security.md","pv":"## Teammate API","c":"section with SendMessage security_audit schema to Lead"},{"p":"agents/yolo-owner.md","pv":"## Teammate API","c":"section documenting file-based cross-team communication (Owner not in any dept team)"},{"p":"scripts/dept-orchestrate.sh","pv":"team_mode","c":"spawn plan includes team_mode field from resolve-team-mode.sh"}],"kl":[{"fr":"scripts/dept-orchestrate.sh","to":"scripts/resolve-team-mode.sh","vi":"dept-orchestrate calls resolve-team-mode.sh"},{"fr":"agents/yolo-security.md ## Teammate API","to":"references/teammate-api-patterns.md","vi":"@references/teammate-api-patterns.md link present"}]},"obj":"Complete agent Teammate API coverage (security + owner) and add team_mode-aware routing to dept-orchestrate.sh spawn plan output (REQ-03)","sk":["commit"],"fm":["agents/yolo-security.md","agents/yolo-owner.md","scripts/dept-orchestrate.sh"],"auto":true}
{"id":"T1","tp":"auto","a":"Add Teammate API section to yolo-security.md with SendMessage security_audit schema to Lead, shutdown response handling. Security is receive-only from Lead (audit request) and sends results back. FAIL = hard stop behavior unchanged.","f":["agents/yolo-security.md"],"v":"File contains '## Teammate API' section with security_audit SendMessage schema","done":"Security agent has Teammate API section, committed","spec":"File: agents/yolo-security.md\n\nInsert new section '## Teammate API (when team_mode=teammate)' AFTER the existing '## Communication' section (line 123) and BEFORE '## Constraints + Effort' section (line 125). This matches the Phase 1 pattern where Teammate API goes between Communication and Constraints sections.\n\nExact content to insert:\n\n---\n## Teammate API (when team_mode=teammate)\n\n> This section is active ONLY when team_mode=teammate. When team_mode=task (default), ignore this section entirely.\n\nFull patterns: @references/teammate-api-patterns.md\n\n### Communication via SendMessage\n\n**Send to Lead (Security Audit):** After completing audit, send `security_audit` schema to Lead:\n```json\n{\n  \"type\": \"security_audit\",\n  \"result\": \"PASS | FAIL | WARN\",\n  \"findings\": 2,\n  \"critical\": 0,\n  \"categories\": [\"secrets\", \"owasp\", \"deps\", \"config\"],\n  \"artifact\": \"phases/{phase}/security-audit.jsonl\",\n  \"committed\": true\n}\n```\n\n**Receive from Lead:** Listen for audit request messages from Lead with scope (files to audit, effort level). Begin audit protocol on receipt.\n\n**Shutdown handling:** On `shutdown_request` from Lead, complete current audit category, commit security-audit.jsonl to disk, send `shutdown_response` with status.\n\n### Unchanged Behavior\n\n- FAIL = hard STOP (unchanged, not overridable by teammates)\n- Escalation target: Lead ONLY (unchanged)\n- Read-only constraints unchanged (no Write/Edit tools)\n- Audit protocol and output format unchanged\n- Effort-based scope unchanged\n---\n\nNotes:\n- The guard quote '> This section is active ONLY when team_mode=teammate...' MUST be present (matches yolo-dev.md, yolo-senior.md, yolo-architect.md, yolo-lead.md pattern).\n- The @references/teammate-api-patterns.md link MUST be present (matches all Phase 1 agents).\n- The security_audit schema MUST match the one in references/handoff-schemas.md lines 180-194.\n- Do NOT add spawnTeam or team lifecycle -- Security is a teammate, not a team lead.\n- Do NOT add registration logic -- Security is registered on-demand by Lead at workflow step 9.\n- The 'Unchanged Behavior' bullets MUST include 'FAIL = hard STOP' to preserve the critical security invariant.\n- Use the exact same Markdown heading hierarchy as yolo-architect.md Teammate API section (## for main, ### for subsections).","ts":""}
{"id":"T2","tp":"auto","a":"Add Teammate API section to yolo-owner.md documenting that Owner is NOT in any department team. Owner communicates via file-based artifacts (.dept-status-{dept}.json, department_result) regardless of team_mode. Section explains why: Owner spans all departments, SendMessage is intra-team only.","f":["agents/yolo-owner.md"],"v":"File contains '## Teammate API' section explaining file-based communication rationale","done":"Owner agent has Teammate API section, committed","spec":"File: agents/yolo-owner.md\n\nInsert new section '## Teammate API (when team_mode=teammate)' AFTER the existing '## Escalation Table' section (ends around line 112) and BEFORE '## Constraints + Effort' section (line 115). This matches the general pattern of Teammate API going before Constraints.\n\nExact content to insert:\n\n---\n## Teammate API (when team_mode=teammate)\n\n> This section is active ONLY when team_mode=teammate. When team_mode=task (default), ignore this section entirely.\n\nFull patterns: @references/teammate-api-patterns.md\n\n### Why Owner is NOT in Any Team\n\nOwner spans ALL departments. SendMessage only works within a single team. Owner cannot be a member of yolo-backend, yolo-frontend, or yolo-uiux simultaneously (API constraint: one team membership per agent). Therefore, Owner communicates via file-based artifacts regardless of team_mode.\n\n### Communication (file-based, unchanged)\n\n**Receive from Leads:** Read `.dept-status-{dept}.json` files written by department Leads. Read `department_result` artifacts from phase directories. These file-based handoffs work identically in both team_mode=task and team_mode=teammate.\n\n**Send to Leads:** Write `owner_review` and `owner_signoff` schemas to file artifacts that Leads read. In teammate mode, Leads check for Owner artifacts at gate boundaries (same as task mode).\n\n### Unchanged Behavior\n\n- All communication remains file-based (both modes)\n- Read-only constraints unchanged (no Write/Edit/Bash tools)\n- Escalation target: User (unchanged)\n- Modes (critique review, conflict resolution, sign-off) unchanged\n- Owner is the ONLY agent that sees all department contexts (unchanged)\n---\n\nNotes:\n- The guard quote '> This section is active ONLY when team_mode=teammate...' MUST be present.\n- The @references/teammate-api-patterns.md link MUST be present.\n- This is the ONLY agent where Teammate API section explicitly says 'NOT in any team'. This is a deliberate design decision, not an omission.\n- Do NOT add SendMessage patterns -- Owner does not use SendMessage in either mode.\n- Do NOT add spawnTeam or registration -- Owner is never a teammate.\n- The 'Communication (file-based, unchanged)' heading makes clear that team_mode does not change Owner's behavior.\n- The 'Why Owner is NOT in Any Team' subsection provides the architectural rationale (per C5/architecture decision: Owner is cross-cutting, SendMessage is intra-team only).\n- Use ## for main heading, ### for subsections (matches all Phase 1 agents).","ts":""}
{"id":"T3","tp":"auto","a":"Modify dept-orchestrate.sh to call resolve-team-mode.sh and include team_mode + spawn_strategy fields in JSON output. When team_mode=teammate: each wave gets spawn_strategy='spawnTeam' and team_name='yolo-{dept}'. When team_mode=task: spawn_strategy='task' (current behavior). Output schema adds: team_mode at top level, spawn_strategy+team_name per dept in each wave. MUST pass $CONFIG_PATH ($1) to resolve-team-mode.sh. Run existing dept-orchestrate tests after modification. (REQ-03)","f":["scripts/dept-orchestrate.sh"],"v":"Output JSON includes team_mode field, waves include spawn_strategy per dept when teammate mode. Existing tests pass (bats tests/unit/dept-orchestrate.bats).","done":"dept-orchestrate outputs team_mode-aware spawn plan, existing tests pass, committed","spec":"File: scripts/dept-orchestrate.sh\n\nThree modifications to the existing script:\n\n### Modification 1: Add resolve-team-mode.sh call after resolve-departments.sh (after line 58, before the key=value parsing loop)\n\nInsert these lines between the resolve-departments.sh call (Step 1) and the key=value parsing loop:\n\n```bash\n# --- Step 1b: Call resolve-team-mode.sh ---\nTEAM_MODE_OUTPUT=\"$(bash \"$SCRIPT_DIR/resolve-team-mode.sh\" \"$CONFIG_PATH\")\" || {\n  # resolve-team-mode.sh always exits 0, but guard anyway\n  TEAM_MODE_OUTPUT=\"team_mode=task\"\n}\n\nTEAM_MODE=\"task\"\nwhile IFS= read -r tm_line; do\n  case \"${tm_line%%=*}\" in\n    team_mode) TEAM_MODE=\"${tm_line#*=}\" ;;\n  esac\ndone <<< \"$TEAM_MODE_OUTPUT\"\n```\n\nKey details:\n- Pass $CONFIG_PATH (the script's $1, already defined at line 25) to resolve-team-mode.sh. This satisfies C6.\n- Parse only the team_mode key from the output. Ignore fallback_notice (not needed for spawn plan).\n- Default TEAM_MODE to \"task\" before parsing (safe fallback).\n- The || guard ensures graceful degradation if resolve-team-mode.sh somehow fails.\n\n### Modification 2: Update jq calls in the wave-building section to include spawn_strategy and team_name per dept\n\nFor EVERY jq -n call that builds a wave item (lines 82, 112, 130, 137), add spawn_strategy and team_name fields:\n\nWhen TEAM_MODE=teammate, each dept in a wave gets:\n- spawn_strategy: \"spawnTeam\"\n- team_name: \"yolo-{dept}\" (e.g., yolo-backend, yolo-frontend, yolo-uiux)\n\nWhen TEAM_MODE=task, each dept gets:\n- spawn_strategy: \"task\"\n- team_name: absent (omit field) or null\n\nImplementation approach -- add a helper function after the assign_gate function (after line 52):\n\n```bash\n# --- Spawn strategy per dept ---\nbuild_dept_entry() {\n  local dept=\"$1\"\n  if [ \"$TEAM_MODE\" = \"teammate\" ]; then\n    jq -n --arg d \"$dept\" --arg ss \"spawnTeam\" --arg tn \"yolo-$dept\" '{dept:$d,spawn_strategy:$ss,team_name:$tn}'\n  else\n    jq -n --arg d \"$dept\" --arg ss \"task\" '{dept:$d,spawn_strategy:$ss}'\n  fi\n}\n```\n\nThen modify all wave construction code to use dept entries (objects) instead of plain dept strings:\n\n**Single backend wave (line 82):** Replace the single jq call:\n```bash\n# Before:\nWAVE_ITEMS+=(\"$(jq -n --argjson id \"$WAVE_ID\" --argjson depts '[\"backend\"]' --arg gate \"all-depts-complete\" '{id:$id,depts:$depts,gate:$gate}')\")\n\n# After:\nlocal dept_entry\ndept_entry=\"$(build_dept_entry \"backend\")\"\nWAVE_ITEMS+=(\"$(printf '%s' \"$dept_entry\" | jq -s --argjson id \"$WAVE_ID\" --arg gate \"all-depts-complete\" '{id:$id,depts:.,gate:$gate}')\")\n```\n\n**Parallel workflow loop (lines 98-113):** Replace the DEPTS_JSON string concatenation with building an array of dept entry objects:\n```bash\n# Replace lines 98-109 (DEPTS_JSON building) with:\nDEPT_ENTRIES=()\nfor j in \"${!LEADS_IN_WAVE[@]}\"; do\n  dept=$(lead_to_dept \"${LEADS_IN_WAVE[$j]}\")\n  DEPT_ENTRIES+=(\"$(build_dept_entry \"$dept\")\")\n  if [ \"$j\" -eq 0 ]; then DEPTS_CSV=\"$dept\"; else DEPTS_CSV+=\",$dept\"; fi\ndone\n\nGATE=$(assign_gate \"$DEPTS_CSV\" \"$is_last\")\nWAVE_ITEMS+=(\"$(printf '%s\\n' \"${DEPT_ENTRIES[@]}\" | jq -s --argjson id \"$WAVE_ID\" --arg gate \"$GATE\" '{id:$id,depts:.,gate:$gate}')\")\n```\n\n**Sequential workflow (line 130):** Same pattern -- use build_dept_entry:\n```bash\ndept=$(lead_to_dept \"$local_lead\")\nGATE=$(assign_gate \"$dept\" \"$is_last\")\nlocal dept_entry\ndept_entry=\"$(build_dept_entry \"$dept\")\"\nWAVE_ITEMS+=(\"$(printf '%s' \"$dept_entry\" | jq -s --argjson id \"$WAVE_ID\" --arg gate \"$GATE\" '{id:$id,depts:.,gate:$gate}')\")\n```\n\n**Guard fallback (line 137):** Same pattern for the default backend wave.\n\n### Modification 3: Add team_mode to final JSON output (line 141)\n\nReplace the final printf|jq line:\n```bash\n# Before:\nprintf '%s\\n' \"${WAVE_ITEMS[@]}\" | jq -s --argjson timeout \"$DEFAULT_TIMEOUT\" '{waves:.,timeout_minutes:$timeout}'\n\n# After:\nprintf '%s\\n' \"${WAVE_ITEMS[@]}\" | jq -s --argjson timeout \"$DEFAULT_TIMEOUT\" --arg tm \"$TEAM_MODE\" '{team_mode:$tm,waves:.,timeout_minutes:$timeout}'\n```\n\n### Output Schema Change\n\nBefore (team_mode=task, backward compatible):\n```json\n{\"team_mode\":\"task\",\"waves\":[{\"id\":1,\"depts\":[{\"dept\":\"backend\",\"spawn_strategy\":\"task\"}],\"gate\":\"all-depts-complete\"}],\"timeout_minutes\":30}\n```\n\nAfter (team_mode=teammate):\n```json\n{\"team_mode\":\"teammate\",\"waves\":[{\"id\":1,\"depts\":[{\"dept\":\"uiux\",\"spawn_strategy\":\"spawnTeam\",\"team_name\":\"yolo-uiux\"}],\"gate\":\"handoff-ux-complete\"},{\"id\":2,\"depts\":[{\"dept\":\"frontend\",\"spawn_strategy\":\"spawnTeam\",\"team_name\":\"yolo-frontend\"},{\"dept\":\"backend\",\"spawn_strategy\":\"spawnTeam\",\"team_name\":\"yolo-backend\"}],\"gate\":\"all-depts-complete\"}],\"timeout_minutes\":30}\n```\n\nNOTE: The depts array changes from string[] to object[] (each dept is now {dept, spawn_strategy, team_name?}). This is a breaking schema change. The EXISTING tests check depts as strings (e.g., jq -r '.waves[0].depts[0]'). These tests MUST be updated to query the new object structure. See ts field for test update instructions.\n\n### Verification\n\nAfter making changes, run: bash tests/unit/dept-orchestrate.bats (via bats). All 8 existing tests must pass. Note: test assertions that check depts[0] as a string will need updating to check depts[0].dept instead. These test updates are PART of this task (not deferred to 02-04).","ts":"Test file: tests/unit/dept-orchestrate.bats (EXISTING file, modify in place)\nFramework: bats-core with bats-assert, bats-support, bats-file\nRun command: bats tests/unit/dept-orchestrate.bats\n\nThe existing 8 tests must be updated to work with the new depts object[] schema, then all must pass.\n\n### Test updates required:\n\n1. **mk_config helper (lines 13-26):** Add optional team_mode and agent_teams params:\n   ```bash\n   mk_config() {\n     local backend=\"${1:-true}\" frontend=\"${2:-false}\" uiux=\"${3:-false}\" workflow=\"${4:-backend_only}\" team_mode=\"${5:-task}\" agent_teams=\"${6:-false}\"\n     mkdir -p \"$TEST_WORKDIR/.yolo-planning\"\n     jq -n --argjson be \"$backend\" --argjson fe \"$frontend\" --argjson ux \"$uiux\" --arg wf \"$workflow\" --arg tm \"$team_mode\" --argjson at \"$agent_teams\" \\\n       '{departments:{backend:$be,frontend:$fe,uiux:$ux},department_workflow:$wf,team_mode:$tm,agent_teams:$at}' \\\n       > \"$TEST_WORKDIR/.yolo-planning/config.json\"\n   }\n   ```\n   This is backward compatible (defaults to task mode, agent_teams=false).\n\n2. **All existing assertions that read depts as strings must change to read depts[N].dept:**\n   - `jq -r '.waves[0].depts[0]'` becomes `jq -r '.waves[0].depts[0].dept'`\n   - `jq -r '.waves[1].depts | contains([\"frontend\"])'` becomes `jq -r '[.waves[1].depts[].dept] | contains([\"frontend\"])'`\n   - Apply this pattern to ALL 8 tests.\n\n3. **All existing tests should also verify spawn_strategy='task' (since they use default mk_config which sets team_mode=task):**\n   Add to each existing test:\n   ```bash\n   local ss\n   ss=$(echo \"$output\" | jq -r '.waves[0].depts[0].spawn_strategy')\n   assert_equal \"$ss\" \"task\"\n   ```\n\n4. **All existing tests should verify team_mode='task' at top level:**\n   Add to each test (where output is checked):\n   ```bash\n   local tm\n   tm=$(echo \"$output\" | jq -r '.team_mode')\n   assert_equal \"$tm\" \"task\"\n   ```\n\n5. **Add new test: teammate mode parallel 3-dept:**\n   ```bash\n   @test \"teammate mode parallel 3-dept: spawnTeam strategy with team names\" {\n     mk_config true true true parallel teammate true\n     export CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS=1\n     run_orchestrate\n     assert_success\n     local tm ss tn\n     tm=$(echo \"$output\" | jq -r '.team_mode')\n     assert_equal \"$tm\" \"teammate\"\n     ss=$(echo \"$output\" | jq -r '.waves[0].depts[0].spawn_strategy')\n     assert_equal \"$ss\" \"spawnTeam\"\n     tn=$(echo \"$output\" | jq -r '.waves[0].depts[0].team_name')\n     assert_equal \"$tn\" \"yolo-uiux\"\n     local w1_be_ss w1_be_tn\n     w1_be_ss=$(echo \"$output\" | jq -r '[.waves[1].depts[] | select(.dept==\"backend\")] | .[0].spawn_strategy')\n     w1_be_tn=$(echo \"$output\" | jq -r '[.waves[1].depts[] | select(.dept==\"backend\")] | .[0].team_name')\n     assert_equal \"$w1_be_ss\" \"spawnTeam\"\n     assert_equal \"$w1_be_tn\" \"yolo-backend\"\n   }\n   ```\n\n6. **Add new test: teammate mode backend-only:**\n   ```bash\n   @test \"teammate mode backend-only: spawnTeam strategy\" {\n     mk_config true false false backend_only teammate true\n     export CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS=1\n     run_orchestrate\n     assert_success\n     local tm ss tn\n     tm=$(echo \"$output\" | jq -r '.team_mode')\n     assert_equal \"$tm\" \"teammate\"\n     ss=$(echo \"$output\" | jq -r '.waves[0].depts[0].spawn_strategy')\n     assert_equal \"$ss\" \"spawnTeam\"\n     tn=$(echo \"$output\" | jq -r '.waves[0].depts[0].team_name')\n     assert_equal \"$tn\" \"yolo-backend\"\n   }\n   ```\n\n7. **Add new test: teammate fallback when env var missing:**\n   ```bash\n   @test \"teammate requested but env var missing: falls back to task\" {\n     mk_config true true true parallel teammate true\n     unset CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS\n     run_orchestrate\n     assert_success\n     local tm ss\n     tm=$(echo \"$output\" | jq -r '.team_mode')\n     assert_equal \"$tm\" \"task\"\n     ss=$(echo \"$output\" | jq -r '.waves[0].depts[0].spawn_strategy')\n     assert_equal \"$ss\" \"task\"\n   }\n   ```\n\n8. **Add new test: task mode has no team_name field:**\n   ```bash\n   @test \"task mode: no team_name field in depts\" {\n     mk_config true false false backend_only\n     run_orchestrate\n     assert_success\n     local tn\n     tn=$(echo \"$output\" | jq -r '.waves[0].depts[0].team_name // \"absent\"')\n     assert_equal \"$tn\" \"absent\"\n   }\n   ```\n\nTotal tests after update: 8 existing (modified) + 4 new = 12 tests.\nAll 12 must pass GREEN.\n\nRun: bats tests/unit/dept-orchestrate.bats"}
{"id":"T4","tp":"auto","a":"Update teammate-api-patterns.md to register Phase 2 roles in the 'Registering Teammates' section: add tester, qa, qa-code, security to the registration order. Add 'Task-Only Agents' section for critic/scout/debugger. Document on-demand registration with step-to-role mapping. (C5, C7 resolution)","f":["references/teammate-api-patterns.md"],"v":"Registration order lists all roles including tester, qa, qa-code, security. Task-Only Agents section exists. On-demand registration documented with step numbers.","done":"teammate-api-patterns.md updated with full agent roster, committed","spec":"File: references/teammate-api-patterns.md\n\n### Modification 1: Update 'Registering Teammates' section (lines 28-32)\n\nReplace the current paragraph (lines 29-32) with expanded content:\n\n---\nBefore:\n```\nAfter team creation, Lead registers teammates by role. Phase 1 roles: senior, dev, architect. Phase 2 adds: tester, qa, qa-code, security.\n\nRegistration order: architect first (receives design context), then senior (receives specs), then dev (receives implementation tasks). Order matters because earlier teammates may need context before later ones begin.\n```\n\nAfter:\n```\nAfter team creation, Lead registers teammates by role. Full roster: architect, senior, dev, tester, qa, qa-code, security.\n\nRegistration is on-demand at workflow step boundaries (not all-at-once at team creation):\n\n| Step | Agent(s) Registered | Rationale |\n|------|---------------------|----------|\n| 2 | architect | Receives design context, produces architecture.toon |\n| 4 | senior | Receives architecture, enriches plan specs |\n| 6 | dev | Receives enriched specs, implements tasks |\n| 5 | tester | Receives plan ts fields, writes failing tests (TDD RED) |\n| 8 | qa, qa-code | Verification after implementation complete |\n| 9 | security | Security audit after QA passes |\n\nRegistration order within a step: architect before senior before dev (earlier teammates may need context before later ones begin). Phase 2 agents (tester, qa, qa-code, security) are registered only when their workflow step begins, reducing team size during early steps.\n```\n---\n\nNote: The step numbers match execute-protocol.md workflow steps. Tester at step 5 is between Senior design review (step 4) and Dev implementation (step 6) because TDD RED phase happens before GREEN implementation.\n\n### Modification 2: Add 'Task-Only Agents' section\n\nInsert a new section AFTER 'Task Mode Fallback' (after line 145, at the end of the file) but this could also go BEFORE 'Task Mode Fallback'. Place it AFTER 'Cross-Team Communication' section and BEFORE 'Task Mode Fallback' section for better logical flow.\n\nInsert between line 135 (end of Lead -> Owner subsection) and line 137 ('## Task Mode Fallback'):\n\n---\n```\n## Task-Only Agents\n\nThree shared-department agents are EXCLUDED from team membership and always use the Task tool regardless of team_mode:\n\n| Agent | Reason for Exclusion |\n|-------|---------------------|\n| critic | Runs before architecture (Step 1) -- team does not exist yet. Cross-cutting: reviews all departments. |\n| scout | On-demand research agent. Dispatched ad-hoc by Lead. Ephemeral -- no persistent team membership needed. |\n| debugger | On-demand investigation agent. Dispatched ad-hoc by Lead. Ephemeral -- no persistent team membership needed. |\n\nThese agents:\n- Are NEVER registered as teammates via addTeammate\n- Are ALWAYS spawned via Task tool by Lead (same as task mode)\n- Do NOT have '## Teammate API' sections in their agent files\n- Are NOT counted in the 23-agent Teammate API coverage (4 Phase 1 + 19 Phase 2)\n\nRationale: Making cross-cutting, ephemeral agents permanent teammates would waste team capacity for rarely-used agents. The Task tool provides adequate spawning for their usage pattern.\n```\n---\n\n### Modification 3: Update the 'Team Lifecycle (Lead only)' header note (line 13)\n\nLine 13 currently says:\n```\nThis section is for Lead agents ONLY (yolo-lead, yolo-fe-lead, yolo-ux-lead in Phase 2).\n```\n\nThis is already correct. No change needed.\n\n### Verification\n\n- The 'Registering Teammates' section lists all 7 roles: architect, senior, dev, tester, qa, qa-code, security.\n- The on-demand registration table has 6 rows with correct step numbers.\n- The 'Task-Only Agents' section lists exactly 3 agents: critic, scout, debugger.\n- The phrase 'Phase 1 roles:' and 'Phase 2 adds:' is REMOVED (replaced with 'Full roster:').\n- No references to 'Phase 1' or 'Phase 2' in the registration section (just the full roster).","ts":""}

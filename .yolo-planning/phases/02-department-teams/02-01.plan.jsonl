{"p":"02","n":"01","t":"Agent Teammate API sections (tester, qa, qa-code)","w":1,"d":[],"xd":[{"p":"01","n":"02","a":"references/teammate-api-patterns.md","r":"Teammate API lifecycle patterns referenced by all agent sections"},{"p":"01","n":"02","a":"agents/yolo-dev.md","r":"Pattern reference for Teammate API conditional section format"}],"mh":{"tr":["Every agent Teammate API section is wrapped in conditional: active ONLY when team_mode=teammate","All 9 tester/qa/qa-code agents reference @references/teammate-api-patterns.md","SendMessage schemas match existing handoff-schemas.md types","Escalation targets unchanged from current agent files"],"ar":[{"p":"agents/yolo-tester.md","pv":"## Teammate API","c":"section with SendMessage test_plan_result schema to Senior"},{"p":"agents/yolo-fe-tester.md","pv":"## Teammate API","c":"section with SendMessage test_plan_result schema to FE Senior"},{"p":"agents/yolo-ux-tester.md","pv":"## Teammate API","c":"section with SendMessage test_plan_result schema to UX Senior"},{"p":"agents/yolo-qa.md","pv":"## Teammate API","c":"section with SendMessage qa_result schema to Lead"},{"p":"agents/yolo-fe-qa.md","pv":"## Teammate API","c":"section with SendMessage qa_result schema to FE Lead"},{"p":"agents/yolo-ux-qa.md","pv":"## Teammate API","c":"section with SendMessage qa_result schema to UX Lead"},{"p":"agents/yolo-qa-code.md","pv":"## Teammate API","c":"section with SendMessage qa_code_result schema to Lead"},{"p":"agents/yolo-fe-qa-code.md","pv":"## Teammate API","c":"section with SendMessage qa_code_result schema to FE Lead"},{"p":"agents/yolo-ux-qa-code.md","pv":"## Teammate API","c":"section with SendMessage qa_code_result schema to UX Lead"}],"kl":[{"fr":"agents/yolo-tester.md ## Teammate API","to":"references/teammate-api-patterns.md","vi":"@references/teammate-api-patterns.md link present"},{"fr":"agents/yolo-qa.md ## Teammate API","to":"references/teammate-api-patterns.md","vi":"@references/teammate-api-patterns.md link present"}]},"obj":"Add Teammate API conditional sections to all 9 tester, qa, and qa-code agent files (3 backend + 3 frontend + 3 UX) following the pattern established in Phase 1 for lead/dev/senior/architect","sk":["commit"],"fm":["agents/yolo-tester.md","agents/yolo-fe-tester.md","agents/yolo-ux-tester.md","agents/yolo-qa.md","agents/yolo-fe-qa.md","agents/yolo-ux-qa.md","agents/yolo-qa-code.md","agents/yolo-fe-qa-code.md","agents/yolo-ux-qa-code.md"],"auto":true}
{"id":"T1","tp":"auto","a":"Add Teammate API section to backend tester (yolo-tester.md) with SendMessage test_plan_result schema to Senior, shutdown response handling, and conditional guard. Follow pattern from yolo-dev.md Teammate API section.","f":["agents/yolo-tester.md"],"v":"File contains '## Teammate API' section with team_mode=teammate guard, test_plan_result schema, SendMessage to Senior","done":"Teammate API section appended before Constraints section, committed","spec":"File: agents/yolo-tester.md. Insert a new section '## Teammate API (when team_mode=teammate)' between the existing '## Communication' section (line 64) and '## Constraints & Effort' section (line 67). The section structure follows the exact pattern from agents/yolo-dev.md lines 81-123.\n\nSection content (in order):\n1. Blockquote guard: '> This section is active ONLY when team_mode=teammate. When team_mode=task (default), ignore this section entirely. Use Task tool result returns and file-based artifacts instead.'\n2. Blank line, then: 'Full patterns: @references/teammate-api-patterns.md'\n3. '### Communication via SendMessage' subsection.\n4. Intro paragraph: 'Replace Task tool result returns with direct SendMessage to Senior\\'s teammate ID:'\n5. **Completion reporting:** heading 'Send `test_plan_result` schema to Senior after completing all RED phase tests:' followed by a JSON code block with the test_plan_result schema from references/handoff-schemas.md:\n   ```json\n   {\n     \"type\": \"test_plan_result\",\n     \"plan_id\": \"{plan_id}\",\n     \"tasks_tested\": 3,\n     \"tasks_skipped\": 1,\n     \"total_tests\": 12,\n     \"all_red\": true,\n     \"artifact\": \"phases/{phase}/test-plan.jsonl\",\n     \"committed\": true\n   }\n   ```\n6. **Blocker escalation:** heading 'Send `escalation` schema to Senior when blocked:' followed by a JSON code block:\n   ```json\n   {\n     \"type\": \"escalation\",\n     \"from\": \"tester\",\n     \"to\": \"senior\",\n     \"issue\": \"{description}\",\n     \"evidence\": [\"{what was found}\"],\n     \"recommendation\": \"{suggested resolution}\",\n     \"severity\": \"blocking\"\n   }\n   ```\n7. **Receive instructions:** paragraph: 'Listen for `shutdown_request` from Lead (via Senior relay). Complete current work, commit test-plan.jsonl, respond with `shutdown_response`.'\n8. '### Unchanged Behavior' subsection with bullet list:\n   - Escalation target: Senior ONLY (never Lead or Architect)\n   - One commit for all test files, stage individually\n   - RED phase verification protocol unchanged\n   - test-plan.jsonl production unchanged\n\nIMPORTANT: The existing '## Communication' section (lines 63-64) stays as-is. The new section goes AFTER it. Preserve blank line before '## Constraints & Effort'. Total addition is approximately 40 lines of markdown.","ts":""}
{"id":"T2","tp":"auto","a":"Add Teammate API sections to frontend and UX tester agents (yolo-fe-tester.md, yolo-ux-tester.md) mirroring T1 pattern but with dept-appropriate escalation targets (FE Senior, UX Senior respectively).","f":["agents/yolo-fe-tester.md","agents/yolo-ux-tester.md"],"v":"Both files contain '## Teammate API' section with SendMessage to their dept Senior","done":"Both fe-tester and ux-tester have Teammate API sections, committed","spec":"Two files, same pattern as T1 with department-specific targets.\n\n--- FILE 1: agents/yolo-fe-tester.md ---\nInsert '## Teammate API (when team_mode=teammate)' section between '## Escalation Table' (ends at line 76, after the bold NEVER line) and '## Constraints & Effort' (line 78). Note: this file has NO '## Communication' section unlike the backend tester.\n\nSection content (identical structure to T1, with FE-specific values):\n1. Blockquote guard (same text as T1).\n2. 'Full patterns: @references/teammate-api-patterns.md'\n3. '### Communication via SendMessage'\n4. Intro: 'Replace Task tool result returns with direct SendMessage to FE Senior\\'s teammate ID:'\n5. **Completion reporting:** 'Send `test_plan_result` schema to FE Senior after completing all RED phase tests:' with the same JSON schema as T1 (type: test_plan_result). The schema fields are identical -- plan_id, tasks_tested, tasks_skipped, total_tests, all_red, artifact, committed.\n6. **Blocker escalation:** 'Send `escalation` schema to FE Senior when blocked:' with escalation JSON where from='fe-tester', to='fe-senior'.\n7. **Receive instructions:** 'Listen for `shutdown_request` from FE Lead (via FE Senior relay). Complete current work, commit test-plan.jsonl, respond with `shutdown_response`.'\n8. '### Unchanged Behavior' bullet list:\n   - Escalation target: FE Senior ONLY (never FE Lead or FE Architect)\n   - One commit for all test files, stage individually\n   - RED phase verification protocol unchanged\n   - test-plan.jsonl production unchanged\n\n--- FILE 2: agents/yolo-ux-tester.md ---\nInsert '## Teammate API (when team_mode=teammate)' section between '## Escalation Table' (ends at line 76, after bold NEVER line) and '## Constraints & Effort' (line 79). Note: there is a blank line between the escalation table and constraints.\n\nSection content (identical structure, UX-specific values):\n1-3. Same as FE tester.\n4. Intro: 'Replace Task tool result returns with direct SendMessage to UX Senior\\'s teammate ID:'\n5. **Completion reporting:** 'Send `test_plan_result` schema to UX Senior after completing all RED phase tests:' with same JSON schema.\n6. **Blocker escalation:** escalation JSON where from='ux-tester', to='ux-senior'.\n7. **Receive instructions:** 'Listen for `shutdown_request` from UX Lead (via UX Senior relay). Complete current work, commit test-plan.jsonl, respond with `shutdown_response`.'\n8. '### Unchanged Behavior' bullet list:\n   - Escalation target: UX Senior ONLY (never UX Lead or UX Architect)\n   - One commit for all test files, stage individually\n   - RED phase verification protocol unchanged\n   - test-plan.jsonl production unchanged\n\nBoth files: preserve existing blank lines around sections. Total addition per file is approximately 40 lines of markdown.","ts":""}
{"id":"T3","tp":"auto","a":"Add Teammate API section to backend QA agents (yolo-qa.md, yolo-qa-code.md) with SendMessage qa_result/qa_code_result schemas to Lead, receive from Lead for remediation routing.","f":["agents/yolo-qa.md","agents/yolo-qa-code.md"],"v":"Both files contain '## Teammate API' section with qa_result and qa_code_result schemas to Lead","done":"Both qa and qa-code have Teammate API sections, committed","spec":"Two files with QA-specific SendMessage patterns. Target is Lead (not Senior) per QA hierarchy.\n\n--- FILE 1: agents/yolo-qa.md ---\nInsert '## Teammate API (when team_mode=teammate)' section between '## Escalation Table' (ends at line 56, after bold NEVER line) and '## Constraints & Effort' (line 58).\n\nSection content:\n1. Blockquote guard: '> This section is active ONLY when team_mode=teammate. When team_mode=task (default), ignore this section entirely. Use Task tool result returns and file-based artifacts instead.'\n2. 'Full patterns: @references/teammate-api-patterns.md'\n3. '### Communication via SendMessage'\n4. Intro: 'Replace Task tool result returns with direct SendMessage to Lead\\'s teammate ID:'\n5. **Verification reporting:** 'Send `qa_result` schema to Lead after completing plan-level verification:' followed by JSON code block:\n   ```json\n   {\n     \"type\": \"qa_result\",\n     \"tier\": \"quick | standard | deep\",\n     \"result\": \"PASS | FAIL | PARTIAL\",\n     \"checks\": { \"passed\": 18, \"failed\": 2, \"total\": 20 },\n     \"failures\": [],\n     \"artifact\": \"phases/{phase}/verification.jsonl\",\n     \"committed\": true\n   }\n   ```\n6. **Blocker escalation:** 'Send `escalation` schema to Lead when blocked:' with JSON where from='qa', to='lead'.\n7. **Receive instructions:** 'Listen for `shutdown_request` from Lead. Complete current verification, commit verification.jsonl, respond with `shutdown_response`.'\n8. '### Unchanged Behavior' bullet list:\n   - Escalation target: Lead ONLY (never Senior, Architect, or User)\n   - No file modification (read-only verification)\n   - Goal-backward methodology unchanged\n   - verification.jsonl output format unchanged\n\n--- FILE 2: agents/yolo-qa-code.md ---\nInsert '## Teammate API (when team_mode=teammate)' section between '## Escalation Table' (ends at line 88, after bold NEVER line) and '## Constraints & Effort' (line 90).\n\nSection content:\n1. Blockquote guard (same text).\n2. 'Full patterns: @references/teammate-api-patterns.md'\n3. '### Communication via SendMessage'\n4. Intro: 'Replace Task tool result returns with direct SendMessage to Lead\\'s teammate ID:'\n5. **Verification reporting:** 'Send `qa_code_result` schema to Lead after completing code-level verification:' followed by JSON code block:\n   ```json\n   {\n     \"type\": \"qa_code_result\",\n     \"result\": \"PASS | FAIL | PARTIAL\",\n     \"tests\": { \"passed\": 42, \"failed\": 0, \"skipped\": 3 },\n     \"lint\": { \"errors\": 0, \"warnings\": 2 },\n     \"findings_count\": 5,\n     \"critical\": 0,\n     \"artifact\": \"phases/{phase}/qa-code.jsonl\",\n     \"committed\": true\n   }\n   ```\n6. **Gaps reporting (PARTIAL/FAIL only):** 'On PARTIAL or FAIL, also send gaps.jsonl path in the `artifact` field. Lead uses gaps for remediation routing (Lead -> Senior -> Dev).'\n7. **Blocker escalation:** 'Send `escalation` schema to Lead when blocked:' with JSON where from='qa-code', to='lead'.\n8. **Receive instructions:** 'Listen for `shutdown_request` from Lead. Complete current verification, commit qa-code.jsonl and gaps.jsonl (if applicable), respond with `shutdown_response`.'\n9. '### Unchanged Behavior' bullet list:\n   - Escalation target: Lead ONLY (never Senior, Dev, Architect, or User)\n   - Cannot modify source files (write only qa-code.jsonl and gaps.jsonl)\n   - TDD compliance check and 4-phase verification unchanged\n   - qa-code.jsonl and gaps.jsonl output formats unchanged\n\nBoth files: preserve existing blank lines around sections. QA gets ~35 lines added, QA Code gets ~45 lines added (extra gaps reporting paragraph).","ts":""}
{"id":"T4","tp":"auto","a":"Add Teammate API sections to frontend QA agents (yolo-fe-qa.md, yolo-fe-qa-code.md) and UX QA agents (yolo-ux-qa.md, yolo-ux-qa-code.md) mirroring T3 pattern with dept-appropriate escalation targets.","f":["agents/yolo-fe-qa.md","agents/yolo-fe-qa-code.md","agents/yolo-ux-qa.md","agents/yolo-ux-qa-code.md"],"v":"All 4 files contain '## Teammate API' section with SendMessage to their dept Lead","done":"All 4 FE/UX QA agents have Teammate API sections, committed","spec":"Four files, same pattern as T3 with department-specific targets.\n\n--- FILE 1: agents/yolo-fe-qa.md ---\nInsert '## Teammate API (when team_mode=teammate)' between '## Escalation Table' (ends at line 51, after bold NEVER line) and '## Constraints & Effort' (line 53).\n\nSection content (mirrors T3 yolo-qa.md pattern, FE-specific):\n1. Blockquote guard (same text as T3).\n2. 'Full patterns: @references/teammate-api-patterns.md'\n3. '### Communication via SendMessage'\n4. Intro: 'Replace Task tool result returns with direct SendMessage to FE Lead\\'s teammate ID:'\n5. **Verification reporting:** 'Send `qa_result` schema to FE Lead after completing plan-level verification:' with same qa_result JSON schema as T3 QA.\n6. **Blocker escalation:** escalation JSON where from='fe-qa', to='fe-lead'.\n7. **Receive instructions:** 'Listen for `shutdown_request` from FE Lead. Complete current verification, commit verification.jsonl, respond with `shutdown_response`.'\n8. '### Unchanged Behavior' bullet list:\n   - Escalation target: FE Lead ONLY (never FE Senior, FE Architect, or User)\n   - No file modification (read-only verification)\n   - Design compliance and accessibility verification unchanged\n   - verification.jsonl output format unchanged\n\n--- FILE 2: agents/yolo-fe-qa-code.md ---\nInsert '## Teammate API (when team_mode=teammate)' between '## Escalation Table' (ends at line 57, after bold NEVER line) and '## Constraints & Effort' (line 59).\n\nSection content (mirrors T3 yolo-qa-code.md pattern, FE-specific):\n1. Blockquote guard.\n2. 'Full patterns: @references/teammate-api-patterns.md'\n3. '### Communication via SendMessage'\n4. Intro: 'Replace Task tool result returns with direct SendMessage to FE Lead\\'s teammate ID:'\n5. **Verification reporting:** 'Send `qa_code_result` schema to FE Lead after completing code-level verification:' with same qa_code_result JSON schema as T3 QA Code.\n6. **Gaps reporting:** 'On PARTIAL or FAIL, also send gaps.jsonl path in the `artifact` field. FE Lead uses gaps for remediation routing (FE Lead -> FE Senior -> FE Dev).'\n7. **Blocker escalation:** escalation JSON where from='fe-qa-code', to='fe-lead'.\n8. **Receive instructions:** 'Listen for `shutdown_request` from FE Lead. Complete current verification, commit qa-code.jsonl and gaps.jsonl (if applicable), respond with `shutdown_response`.'\n9. '### Unchanged Behavior' bullet list:\n   - Escalation target: FE Lead ONLY (never FE Senior, FE Dev, FE Architect, or User)\n   - Cannot modify source files\n   - Component test execution and a11y linting unchanged\n   - qa-code.jsonl and gaps.jsonl output formats unchanged\n\n--- FILE 3: agents/yolo-ux-qa.md ---\nInsert '## Teammate API (when team_mode=teammate)' between '## Escalation Table' (ends at line 49, after bold NEVER line) and '## Constraints & Effort' (line 53). Note: there is a blank line gap between escalation table and constraints in this file.\n\nSection content (mirrors T3 yolo-qa.md pattern, UX-specific):\n1. Blockquote guard.\n2. 'Full patterns: @references/teammate-api-patterns.md'\n3. '### Communication via SendMessage'\n4. Intro: 'Replace Task tool result returns with direct SendMessage to UX Lead\\'s teammate ID:'\n5. **Verification reporting:** 'Send `qa_result` schema to UX Lead after completing plan-level verification:' with same qa_result JSON schema.\n6. **Blocker escalation:** escalation JSON where from='ux-qa', to='ux-lead'.\n7. **Receive instructions:** 'Listen for `shutdown_request` from UX Lead. Complete current verification, commit verification.jsonl, respond with `shutdown_response`.'\n8. '### Unchanged Behavior' bullet list:\n   - Escalation target: UX Lead ONLY (never UX Senior, UX Architect, or User)\n   - No file modification (read-only verification)\n   - Design system compliance verification unchanged\n   - verification.jsonl output format unchanged\n\n--- FILE 4: agents/yolo-ux-qa-code.md ---\nInsert '## Teammate API (when team_mode=teammate)' between '## Escalation Table' (ends at line 58, after bold NEVER line) and '## Constraints & Effort' (line 60).\n\nSection content (mirrors T3 yolo-qa-code.md pattern, UX-specific):\n1. Blockquote guard.\n2. 'Full patterns: @references/teammate-api-patterns.md'\n3. '### Communication via SendMessage'\n4. Intro: 'Replace Task tool result returns with direct SendMessage to UX Lead\\'s teammate ID:'\n5. **Verification reporting:** 'Send `qa_code_result` schema to UX Lead after completing code-level verification:' with same qa_code_result JSON schema.\n6. **Gaps reporting:** 'On PARTIAL or FAIL, also send gaps.jsonl path in the `artifact` field. UX Lead uses gaps for remediation routing (UX Lead -> UX Senior -> UX Dev).'\n7. **Blocker escalation:** escalation JSON where from='ux-qa-code', to='ux-lead'.\n8. **Receive instructions:** 'Listen for `shutdown_request` from UX Lead. Complete current verification, commit qa-code.jsonl and gaps.jsonl (if applicable), respond with `shutdown_response`.'\n9. '### Unchanged Behavior' bullet list:\n   - Escalation target: UX Lead ONLY (never UX Senior, UX Dev, UX Architect, or User)\n   - Cannot modify design files\n   - Token validation and design system checks unchanged\n   - qa-code.jsonl and gaps.jsonl output formats unchanged\n\nAll 4 files: preserve existing blank lines around sections. QA files get ~35 lines added, QA Code files get ~45 lines added.","ts":""}

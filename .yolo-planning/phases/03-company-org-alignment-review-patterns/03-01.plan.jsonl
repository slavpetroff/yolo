{"p":"03","n":"01","t":"Hierarchy audit and gap checklist","w":1,"d":[],"xd":[],"mh":{"tr":["Audit checklist covers all 26 agents","Audit checklist covers all 11 workflow steps","Every gap identified maps to a REQ-ID"],"ar":[{"p":"references/audit-checklist.md","pv":"file exists","c":"Contains sections: Agent Roles, Workflow Steps, Escalation Paths, Communication Patterns, Review Cycles"},{"p":".yolo-planning/phases/03-company-org-alignment-review-patterns/audit-report.jsonl","pv":"valid JSONL","c":"Each line has id, area, gap, severity, req fields"}],"kl":[{"fr":"audit-report.jsonl gap entries","to":"REQ-05 and REQ-06","vi":"Every gap references a REQ-ID"}]},"obj":"Audit the 26-agent hierarchy against real company engineering processes, identify all protocol gaps, and produce a reusable audit checklist (REQ-05)","sk":["commit"],"fm":["references/audit-checklist.md",".yolo-planning/phases/03-company-org-alignment-review-patterns/audit-report.jsonl"],"auto":true}
{"id":"T1","tp":"auto","a":"Audit all 26 agent prompts for missing real-company patterns (REQ-05): review cycles, ownership language, status reporting, handoff protocols, change management. Produce audit-report.jsonl with one finding per gap.","f":[".yolo-planning/phases/03-company-org-alignment-review-patterns/audit-report.jsonl"],"v":"audit-report.jsonl is valid JSONL, each line has id/area/gap/severity/req fields","done":"audit-report.jsonl committed with all identified gaps","spec":"## T1: Audit 26 Agent Prompts for Missing Patterns\n\n### Context (D1, D2, C1, C4)\nPhase 3 aligns the 26-agent hierarchy with real company processes. This task audits all agent prompt files to identify missing patterns.\n\n### Files to Read\nRead all 26 agent files from `agents/` directory:\n- Backend (7): yolo-architect.md, yolo-lead.md, yolo-senior.md, yolo-dev.md, yolo-qa.md, yolo-qa-code.md, yolo-tester.md\n- Frontend (7): yolo-fe-architect.md, yolo-fe-lead.md, yolo-fe-senior.md, yolo-fe-dev.md, yolo-fe-qa.md, yolo-fe-qa-code.md, yolo-fe-tester.md\n- UX (7): yolo-ux-architect.md, yolo-ux-lead.md, yolo-ux-senior.md, yolo-ux-dev.md, yolo-ux-qa.md, yolo-ux-qa-code.md, yolo-ux-tester.md\n- Shared (5): yolo-owner.md, yolo-critic.md, yolo-scout.md, yolo-debugger.md, yolo-security.md\n\n### Audit Categories\nFor each agent, check for presence of these patterns:\n1. **Review Ownership Language**: Does this agent (if a reviewer per D1) have explicit ownership language for subordinate output? Per D1, only 16 reviewing agents need this: Senior, Lead, Architect, Owner, QA, QA-Code across all 3 depts. Non-reviewing agents (Dev, Tester, Scout, Critic, Debugger, Security) are excluded.\n2. **Status Reporting**: Does the agent document when/how to report progress? (Leads need this per D5.)\n3. **Handoff Protocol**: Does the agent reference formal handoff between pipeline stages? (Architect->Lead per D3.)\n4. **Change Management**: Does the agent document revision cycles, Minor/Major classification? (Senior + Dev per D4.)\n5. **Review Cycles**: Does Senior document max cycles and escalation?\n\n### Output File\nCreate `.yolo-planning/phases/03-company-org-alignment-review-patterns/audit-report.jsonl`.\nEach line is a JSON object with these fields:\n```json\n{\"id\":\"AG-001\",\"area\":\"agent-prompts\",\"agent\":\"yolo-senior.md\",\"gap\":\"Missing Review Ownership Language section\",\"severity\":\"major\",\"req\":\"REQ-06\",\"cat\":\"review-ownership\"}\n```\n\nField definitions:\n- `id`: Sequential ID with AG- prefix (AG-001, AG-002, etc.)\n- `area`: Always `agent-prompts` for this task\n- `agent`: The agent filename (e.g., `yolo-senior.md`)\n- `gap`: Description of missing pattern\n- `severity`: `critical` (blocks workflow), `major` (missing required pattern), `minor` (improvement)\n- `req`: REQ-05 or REQ-06\n- `cat`: Category from audit categories above (review-ownership, status-reporting, handoff-protocol, change-management, review-cycles)\n\n### Expected Findings\nExpect to identify:\n- 16 agents missing `## Review Ownership` section (all reviewing agents per D1)\n- 3 Lead agents missing status reporting instructions\n- Missing Architect->Lead handoff formalization\n- Senior + Dev missing change management formalization\n\n### Verification\n- Run: `jq empty .yolo-planning/phases/03-company-org-alignment-review-patterns/audit-report.jsonl` (must succeed)\n- Run: `jq -r .id .yolo-planning/phases/03-company-org-alignment-review-patterns/audit-report.jsonl | wc -l` (must be > 0)\n- Every line must have all 7 fields (id, area, agent, gap, severity, req, cat)\n\n### Commit\n`docs(03-company-org-alignment-review-patterns): agent prompt audit report`","ts":""}
{"id":"T2","tp":"auto","a":"Audit the 11-step workflow in execute-protocol.md for missing real-company processes (REQ-05): R&D handoff formalization, change management between steps, inter-step status reporting, QA feedback loops. Append findings to audit-report.jsonl.","f":[".yolo-planning/phases/03-company-org-alignment-review-patterns/audit-report.jsonl"],"td":["T1"],"v":"audit-report.jsonl has workflow-level findings appended","done":"Workflow audit findings appended to audit-report.jsonl","spec":"## T2: Audit 11-Step Workflow for Missing Processes\n\n### Context (D2, D3, D4, D5, C4, C5, C7)\nThe 11-step workflow in execute-protocol.md needs auditing for gaps vs real company engineering processes.\n\n### Files to Read\n1. `references/execute-protocol.md` -- the full 11-step workflow\n2. `references/company-hierarchy.md` -- hierarchy, escalation, code review chain\n3. `references/cross-team-protocol.md` -- cross-dept communication\n4. `references/multi-dept-protocol.md` -- multi-dept orchestration\n\n### Audit Checks\nFor each of the 11 steps, check:\n1. **R&D Handoff (Steps 1-3)**: Is the Critic->Scout->Architect pipeline formalized as a protocol doc? Currently no standalone handoff protocol exists (per D3, it will be created in 03-03).\n2. **Architect->Lead Handoff (Step 3->4)**: Is there a completeness checklist for architecture.toon before Lead can plan? Currently just a file existence check. Per D3, a stage-gate model is needed.\n3. **Change Management (Step 7->8)**: Is the Senior->Dev revision cycle documented with Minor/Major classification? Currently only '2 cycles max' stated in Senior prompt. Per D4, formalization needed.\n4. **Status Reporting**: Is there inter-step progress reporting from Leads? Per D5, missing.\n5. **QA Feedback Loops (Step 9)**: Are QA remediation cycles documented with clear escalation paths? (Already exists in execute-protocol.md but cross-reference to company-hierarchy.md may be incomplete.)\n6. **Stale References**: Per D2, check for '10-step' references that should be '11-step'. Note: Do NOT fix these now -- just document them as findings.\n\n### Output\nAppend to existing `.yolo-planning/phases/03-company-org-alignment-review-patterns/audit-report.jsonl`.\nUse ID prefix `WF-` (WF-001, WF-002, etc.) and `area: \"workflow\"`.\n\nExample entry:\n```json\n{\"id\":\"WF-001\",\"area\":\"workflow\",\"agent\":\"execute-protocol.md\",\"gap\":\"No formalized R&D handoff protocol between Critic-Scout-Architect\",\"severity\":\"major\",\"req\":\"REQ-05\",\"cat\":\"handoff-protocol\"}\n```\n\nAlso document each stale 10-step reference as a finding:\n```json\n{\"id\":\"WF-010\",\"area\":\"workflow\",\"agent\":\"agents/yolo-lead.md:14\",\"gap\":\"Stale 10-step reference (should be 11-step)\",\"severity\":\"major\",\"req\":\"REQ-05\",\"cat\":\"stale-reference\"}\n```\n\n### Expected Findings\n- 19 stale 10-step references across 12 files (per D2 grep sweep)\n- Missing R&D handoff protocol doc\n- Missing Architect->Lead stage-gate\n- Missing change management formalization\n- Missing status reporting protocol\n\n### Verification\n- `jq empty .yolo-planning/phases/03-company-org-alignment-review-patterns/audit-report.jsonl` succeeds\n- `jq -r 'select(.area==\"workflow\") | .id' .yolo-planning/phases/03-company-org-alignment-review-patterns/audit-report.jsonl | wc -l` returns > 0\n- Every new line has all 7 required fields\n\n### Commit\n`docs(03-company-org-alignment-review-patterns): workflow audit findings`","ts":""}
{"id":"T3","tp":"auto","a":"Audit escalation chains and cross-team communication in company-hierarchy.md and cross-team-protocol.md for gaps vs real company (REQ-05): missing feedback loops, incomplete escalation context, status reporting gaps. Append findings to audit-report.jsonl.","f":[".yolo-planning/phases/03-company-org-alignment-review-patterns/audit-report.jsonl"],"td":["T2"],"v":"audit-report.jsonl has escalation/communication findings","done":"Escalation and communication audit findings appended","spec":"## T3: Audit Escalation Chains and Cross-Team Communication\n\n### Context (D3, D5, C5, C10)\nAudit the escalation and communication patterns for gaps vs real company processes.\n\n### Files to Read\n1. `references/company-hierarchy.md` -- escalation chain, decision authority matrix, code review chain\n2. `references/cross-team-protocol.md` -- dept execution order, communication rules, handoff gates\n3. `references/multi-dept-protocol.md` -- multi-dept dispatch, coordination files\n4. `references/handoff-schemas.md` -- all handoff message schemas\n\n### Audit Checks\n1. **Escalation Context**: Does each agent's escalation include evidence requirements? (company-hierarchy.md has 'Escalation includes evidence' rule but some agents may not reference it.)\n2. **Feedback Loops**: Is there a documented feedback path from QA back to Senior/Dev? (QA Remediation Chain exists but may lack detail on feedback content.)\n3. **Cross-Dept Communication Completeness**: Are all communication paths in cross-team-protocol.md complete? Check the Team Mode Transport Differences table for coverage.\n4. **Status Reporting Gap**: Per D5, cross-team status reporting protocol is missing from cross-team-protocol.md. Document this as a gap.\n5. **Owner Feedback Loop**: Does Owner have a documented path to push corrected context back down? (company-hierarchy.md mentions 'Escalation Restores Context' but needs stronger formalization.)\n6. **Handoff Schema Completeness**: Are all required handoff schemas defined? Check for missing phase_progress or status_report schema.\n\n### Output\nAppend to existing `.yolo-planning/phases/03-company-org-alignment-review-patterns/audit-report.jsonl`.\nUse ID prefix `EC-` (EC-001, EC-002, etc.) and `area: \"escalation-communication\"`.\n\nExample entry:\n```json\n{\"id\":\"EC-001\",\"area\":\"escalation-communication\",\"agent\":\"cross-team-protocol.md\",\"gap\":\"No cross-team status reporting section\",\"severity\":\"minor\",\"req\":\"REQ-05\",\"cat\":\"status-reporting\"}\n```\n\n### Expected Findings\n- Missing status reporting section in cross-team-protocol.md\n- Missing phase_progress schema in handoff-schemas.md\n- Potentially incomplete feedback loop documentation\n\n### Verification\n- `jq empty .yolo-planning/phases/03-company-org-alignment-review-patterns/audit-report.jsonl` succeeds\n- `jq -r 'select(.area==\"escalation-communication\") | .id' .yolo-planning/phases/03-company-org-alignment-review-patterns/audit-report.jsonl | wc -l` returns > 0\n\n### Commit\n`docs(03-company-org-alignment-review-patterns): escalation and communication audit`","ts":""}
{"id":"T4","tp":"auto","a":"Create references/audit-checklist.md -- a reusable checklist comparing YOLO hierarchy against real company processes (REQ-05). Sections: Agent Roles (26 agents x role alignment), Workflow Steps (11 steps x process alignment), Escalation Paths, Communication Patterns, Review Cycles, Change Management. Derive from audit-report.jsonl findings.","f":["references/audit-checklist.md"],"td":["T3"],"v":"audit-checklist.md exists with all required sections","done":"Reusable audit checklist committed to references/","spec":"## T4: Create Reusable Audit Checklist\n\n### Context (D1-D7, C1-C10)\nConsolidate all findings from T1-T3 audit-report.jsonl into a reusable checklist document that can be run after any future phase to verify alignment.\n\n### File to Create\n`references/audit-checklist.md`\n\n### Structure\nThe file must have exactly these sections with Markdown headers:\n\n```markdown\n# YOLO Company Alignment Audit Checklist\n\nReusable checklist comparing YOLO agent hierarchy against real company engineering processes. Run after each phase to verify alignment.\n\n## Agent Roles (26 agents)\n\n| # | Agent | Role Alignment | Review Owner | Status Reporting | Handoff | Change Mgmt |\n|---|-------|---------------|-------------|-----------------|---------|-------------|\n| 1 | yolo-architect | ... | Required (per D1) | N/A | Required | N/A |\n...(all 26 agents)\n\nChecklist:\n- [ ] All 16 reviewing agents have ## Review Ownership section\n- [ ] All 3 Lead agents have status reporting instructions\n- [ ] Architect references R&D handoff protocol\n- [ ] Senior references change management loops\n- [ ] Dev references collaborative revision process\n\n## Workflow Steps (11 steps)\n\n| Step | Name | Agent | Handoff In | Handoff Out | Gate | Status |\n|------|------|-------|-----------|-------------|------|--------|\n| 1 | Critique | Critic | Phase dir | critique.jsonl | Entry: dir exists | |\n...(all 11 steps)\n\nChecklist:\n- [ ] Zero stale 10-step references across codebase\n- [ ] R&D handoff protocol exists (references/rnd-handoff-protocol.md)\n- [ ] Architect->Lead stage-gate documented\n- [ ] Change management section in execute-protocol.md\n- [ ] Status reporting protocol referenced\n\n## Escalation Paths\n\n| Chain | Path | Evidence Req | Feedback Loop |\n|-------|------|-------------|---------------|\n| Single-dept | Dev > Senior > Lead > Architect > User | Yes | Resolution flows down as artifacts |\n| Multi-dept | Dept Dev > ... > Owner > User | Yes | Owner pushes corrected context down |\n\nChecklist:\n- [ ] Every agent documents exact escalation target\n- [ ] Escalation includes evidence requirement\n- [ ] Feedback loop documented for each escalation path\n\n## Communication Patterns\n\nChecklist:\n- [ ] Cross-dept communication goes through Leads only\n- [ ] All cross-dept data passes through handoff artifacts\n- [ ] Backend-UI/UX isolation absolute\n- [ ] Status reporting protocol in cross-team-protocol.md\n- [ ] All handoff schemas in handoff-schemas.md\n\n## Review Cycles\n\nChecklist:\n- [ ] Senior: 2-cycle max documented with escalation\n- [ ] Minor/Major classification documented\n- [ ] QA remediation chain (3-level) documented\n- [ ] Metric collection hooks defined for Phase 4\n\n## Change Management\n\nChecklist:\n- [ ] Senior-Dev revision cycle collaborative (not gatekeeping)\n- [ ] Minor changes auto-approve after cycle 1 if nits only\n- [ ] Major changes escalate after cycle 2\n- [ ] Phase 4 extensibility hooks at metric collection points\n```\n\n### Content Derivation\nRead `.yolo-planning/phases/03-company-org-alignment-review-patterns/audit-report.jsonl` to populate the Status columns. For each checklist item, if the audit-report has a corresponding gap finding, mark it as `[ ]` (unchecked). The checklist serves as the target state -- Phase 3 plans will check off these items.\n\n### Verification\n- File exists: `[ -f references/audit-checklist.md ]`\n- Contains all required sections: `grep -c '## Agent Roles' references/audit-checklist.md` returns 1, repeat for 'Workflow Steps', 'Escalation Paths', 'Communication Patterns', 'Review Cycles', 'Change Management'\n- Contains all 26 agents in the table: `grep -c 'yolo-' references/audit-checklist.md` returns >= 26\n\n### Commit\n`docs(03-company-org-alignment-review-patterns): reusable audit checklist`","ts":""}

{"p":"03","n":"02","t":"Dev self-claiming and Lead aggregator protocols","w":1,"d":[],"xd":[{"p":"02","n":"05","a":"agents/yolo-dev.md","r":"Dev agent file to extend with TaskList self-claiming protocol"},{"p":"02","n":"05","a":"agents/yolo-lead.md","r":"Lead agent file to extend with summary aggregation protocol"},{"p":"02","n":"05","a":"agents/yolo-senior.md","r":"Senior agent file to extend with parallel review support"},{"p":"02","n":"05","a":"agents/yolo-fe-dev.md","r":"FE Dev agent file to extend with task self-claiming"},{"p":"02","n":"05","a":"agents/yolo-ux-dev.md","r":"UX Dev agent file to extend with task self-claiming"},{"p":"02","n":"05","a":"agents/yolo-fe-lead.md","r":"FE Lead agent file to extend with summary aggregation"},{"p":"02","n":"05","a":"agents/yolo-ux-lead.md","r":"UX Lead agent file to extend with summary aggregation"}],"mh":{"tr":["Dev uses TaskList to find available unblocked unowned tasks and claims via TaskUpdate","Dev sends task_complete to Lead (not Senior) for aggregation purposes","Dev sends dev_progress to Senior for real-time visibility (distinct from task_complete)","Dev uses git-commit-serialized.sh instead of raw git commit in teammate mode","Dev skips Stage 3 summary.jsonl write when team_mode=teammate (Lead writes it)","Lead collects all task_complete messages per plan before writing summary.jsonl","Lead maintains claimed_files set for file-overlap detection on task dispatch","Senior can review multiple plans concurrently for both Design Review (Step 4) and Code Review (Step 7)","Existing Teammate API sections preserved unchanged; new sections are additive","FE/UX Dev agents have Task Self-Claiming mirroring backend Dev pattern","FE/UX Lead agents have Summary Aggregation mirroring backend Lead pattern"],"ar":[{"p":"agents/yolo-dev.md","pv":"## Task Self-Claiming","c":"new section with TaskList query, TaskUpdate claim, git-commit-serialized.sh ref, task_complete + dev_progress dual channel, Stage 3 conditional"},{"p":"agents/yolo-lead.md","pv":"## Summary Aggregation","c":"new section with per-plan task_complete collection, claimed_files file-overlap detection, summary.jsonl write, git-commit-serialized.sh ref"},{"p":"agents/yolo-senior.md","pv":"## Parallel Review","c":"new section documenting concurrent plan review for Design Review (Step 4) AND Code Review (Step 7)"},{"p":"agents/yolo-fe-senior.md","pv":"## Parallel Review","c":"FE Senior parallel review for Step 4 and Step 7"},{"p":"agents/yolo-ux-senior.md","pv":"## Parallel Review","c":"UX Senior parallel review for Step 4 and Step 7"},{"p":"agents/yolo-fe-dev.md","pv":"## Task Self-Claiming","c":"FE Dev self-claiming with git-commit-serialized.sh, dual channel, Stage 3 conditional"},{"p":"agents/yolo-ux-dev.md","pv":"## Task Self-Claiming","c":"UX Dev self-claiming with git-commit-serialized.sh, dual channel, Stage 3 conditional"},{"p":"agents/yolo-fe-lead.md","pv":"## Summary Aggregation","c":"FE Lead aggregation with claimed_files file-overlap detection"},{"p":"agents/yolo-ux-lead.md","pv":"## Summary Aggregation","c":"UX Lead aggregation with claimed_files file-overlap detection"}],"kl":[{"fr":"agents/yolo-dev.md ## Task Self-Claiming","to":"references/teammate-api-patterns.md ## Task Coordination","vi":"Dev references task coordination patterns"},{"fr":"agents/yolo-lead.md ## Summary Aggregation","to":"references/handoff-schemas.md ## summary_aggregation","vi":"Lead follows summary_aggregation schema"},{"fr":"agents/yolo-dev.md ## Task Self-Claiming","to":"scripts/git-commit-serialized.sh","vi":"Dev uses serialized commit in teammate mode"},{"fr":"agents/yolo-lead.md ## Summary Aggregation","to":"scripts/git-commit-serialized.sh","vi":"Lead uses serialized commit for summary.jsonl commit"},{"fr":"agents/yolo-fe-dev.md ## Task Self-Claiming","to":"agents/yolo-dev.md ## Task Self-Claiming","vi":"FE Dev mirrors backend Dev pattern"},{"fr":"agents/yolo-fe-lead.md ## Summary Aggregation","to":"agents/yolo-lead.md ## Summary Aggregation","vi":"FE Lead mirrors backend Lead pattern"}]},"obj":"Add TaskList self-claiming protocol to yolo-dev.md (with serialized commits, dual channel, Stage 3 conditional), summary aggregation with file-overlap detection to yolo-lead.md, parallel review for Step 4 + Step 7 to yolo-senior.md, and mirror all patterns to FE/UX Dev and Lead agents (REQ-03)","sk":["commit"],"fm":["agents/yolo-dev.md","agents/yolo-lead.md","agents/yolo-senior.md","agents/yolo-fe-senior.md","agents/yolo-ux-senior.md","agents/yolo-fe-dev.md","agents/yolo-ux-dev.md","agents/yolo-fe-lead.md","agents/yolo-ux-lead.md"],"auto":true}
{"id":"T1","tp":"auto","a":"Add ## Task Self-Claiming (when team_mode=teammate) section to agents/yolo-dev.md documenting: (1) Dev calls TaskList to find tasks with status=available and no assignee, (2) Dev calls TaskUpdate to claim a task (set assignee to self), (3) Dev executes claimed task per existing spec protocol, (4) Dev calls TaskUpdate to mark task complete with commit hash, (5) Dev sends task_complete schema to Lead for completion accounting (aggregation), (6) Dev sends dev_progress to Senior for real-time visibility and blocker handling (distinct channel from task_complete per D3), (7) Dev uses scripts/git-commit-serialized.sh instead of raw git commit in teammate mode for flock-based serialization (D5), (8) Stage 3 conditional: when team_mode=teammate, Dev SKIPS summary.jsonl write entirely -- Lead is sole writer in teammate mode (D10). Include team_mode=teammate guard on entire section.","f":["agents/yolo-dev.md"],"v":"File contains ## Task Self-Claiming section with TaskList/TaskUpdate protocol, team_mode guard, git-commit-serialized.sh ref, dual channel (task_complete to Lead + dev_progress to Senior), and Stage 3 conditional","done":"Dev self-claiming protocol added with serialized commits, dual channel, and Stage 3 conditional"}
{"id":"T2","tp":"auto","a":"Add ## Summary Aggregation (when team_mode=teammate) section to agents/yolo-lead.md documenting: (1) Lead creates tasks via TaskCreate from plan.jsonl, (2) Lead maintains claimed_files set for file-overlap detection: on task_claim add task f-field files to set, on task_complete remove them, before allowing claim verify no intersection between task f-field and claimed_files (D8), (3) Lead monitors task_complete messages from Devs, (4) when all tasks in a plan are complete Lead writes summary.jsonl by aggregating commit hashes, files modified, deviations from all task_complete messages, (5) Lead uses scripts/git-commit-serialized.sh for its own summary.jsonl commit (D5), (6) Lead verifies summary.jsonl before marking plan complete. Include team_mode=teammate guard.","f":["agents/yolo-lead.md"],"v":"File contains ## Summary Aggregation section with task_complete collection, claimed_files file-overlap detection algorithm, summary.jsonl write, and git-commit-serialized.sh ref","done":"Lead aggregator protocol added with file-overlap detection and serialized commits"}
{"id":"T3","tp":"auto","a":"Add ## Parallel Review (when team_mode=teammate) section to agents/yolo-senior.md documenting: (1) multiple Senior instances can run concurrently reviewing different plans in the same wave, (2) each Senior instance receives one plan.jsonl to enrich, (3) no shared state between concurrent Seniors (each writes to its own plan file), (4) Senior sends senior_spec to Lead when complete, (5) applies to BOTH Design Review (Step 4) AND Code Review (Step 7) -- Senior operates identically in both steps when dispatched concurrently (D2, C2). Include team_mode=teammate guard.","f":["agents/yolo-senior.md"],"v":"File contains ## Parallel Review section documenting concurrent plan review with no shared state for both Step 4 (Design Review) and Step 7 (Code Review)","done":"Parallel review protocol added covering both Design Review and Code Review steps"}
{"id":"T4","tp":"auto","a":"Add ## Parallel Review (when team_mode=teammate) section to frontend and UX senior agents (yolo-fe-senior.md, yolo-ux-senior.md) mirroring the backend Senior pattern from T3 with department-appropriate terminology. Must cover both Step 4 (Design Review) and Step 7 (Code Review) concurrent operation.","f":["agents/yolo-fe-senior.md","agents/yolo-ux-senior.md"],"v":"Both FE and UX senior files contain ## Parallel Review section covering Step 4 and Step 7","done":"FE and UX Senior parallel review sections added covering both review steps"}
{"id":"T5","tp":"auto","a":"Add ## Task Self-Claiming (when team_mode=teammate) section to agents/yolo-fe-dev.md and agents/yolo-ux-dev.md mirroring T1 pattern for backend Dev. Include all expansions: (1) TaskList/TaskUpdate claim loop, (2) git-commit-serialized.sh reference for teammate mode commits (D5), (3) task_complete to FE/UX Lead + dev_progress to FE/UX Senior dual channel (D3), (4) Stage 3 conditional: skip summary.jsonl write when team_mode=teammate (D10). Use department-appropriate Senior and Lead targets (yolo-fe-senior/yolo-fe-lead for FE, yolo-ux-senior/yolo-ux-lead for UX). (D1, C1)","f":["agents/yolo-fe-dev.md","agents/yolo-ux-dev.md"],"v":"Both FE and UX Dev files contain ## Task Self-Claiming section with all expansions and department-appropriate targets","done":"FE and UX Dev self-claiming sections added mirroring backend pattern with dept targets"}
{"id":"T6","tp":"auto","a":"Add ## Summary Aggregation (when team_mode=teammate) section to agents/yolo-fe-lead.md and agents/yolo-ux-lead.md mirroring T2 pattern for backend Lead. Include: (1) TaskCreate from plan.jsonl, (2) claimed_files set for file-overlap detection (D8), (3) task_complete collection and summary.jsonl aggregation, (4) git-commit-serialized.sh reference. Use department-appropriate terminology. (D1, C1)","f":["agents/yolo-fe-lead.md","agents/yolo-ux-lead.md"],"v":"Both FE and UX Lead files contain ## Summary Aggregation section with file-overlap detection and aggregation protocol","done":"FE and UX Lead aggregation sections added mirroring backend pattern"}

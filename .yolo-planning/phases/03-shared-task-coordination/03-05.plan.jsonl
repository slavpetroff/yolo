{"p":"03","n":"05","t":"Tests for parallel execution patterns","w":4,"d":["03-01","03-02","03-03","03-04"],"xd":[],"mh":{"tr":["Static tests verify all modified agent files (including FE/UX Dev and Lead) contain new sections with correct guards","Unit tests verify task coordination pattern documentation completeness","Unit tests verify execute-protocol parallel dispatch documentation for both Step 4 and Step 7","Behavioral tests verify compute-dev-count.sh edge cases (0, 1, 5, 10, negative)","Behavioral tests verify resolve-task-deps.sh (chain, parallel, mixed, circular detection)","Behavioral tests verify file-overlap detection logic and git-commit-serialized.sh lock behavior","All existing 988+ tests pass unchanged","New test files follow existing BATS patterns from tests/ directory"],"ar":[{"p":"tests/static/agent-task-coordination.bats","pv":"@test.*Task Self-Claiming","c":"static test verifying Dev agent has task self-claiming section"},{"p":"tests/static/agent-task-coordination.bats","pv":"@test.*Summary Aggregation","c":"static test verifying Lead agent has summary aggregation section"},{"p":"tests/static/agent-task-coordination.bats","pv":"@test.*FE.*Task Self-Claiming","c":"static test verifying FE Dev agent has task self-claiming section"},{"p":"tests/static/agent-task-coordination.bats","pv":"@test.*UX.*Task Self-Claiming","c":"static test verifying UX Dev agent has task self-claiming section"},{"p":"tests/static/agent-task-coordination.bats","pv":"@test.*FE.*Summary Aggregation","c":"static test verifying FE Lead agent has summary aggregation section"},{"p":"tests/static/agent-task-coordination.bats","pv":"@test.*UX.*Summary Aggregation","c":"static test verifying UX Lead agent has summary aggregation section"},{"p":"tests/unit/task-coordination-patterns.bats","pv":"@test.*TaskCreate","c":"unit test verifying teammate-api-patterns.md has TaskCreate documentation"},{"p":"tests/unit/execute-protocol-parallel.bats","pv":"@test.*parallel.*Senior","c":"unit test verifying execute-protocol Step 4 has parallel Senior dispatch"},{"p":"tests/unit/execute-protocol-parallel.bats","pv":"@test.*Step 7.*parallel","c":"unit test verifying execute-protocol Step 7 has parallel Senior dispatch"},{"p":"tests/unit/execute-protocol-parallel.bats","pv":"@test.*parallel.*Dev","c":"unit test verifying execute-protocol Step 6 has parallel Dev dispatch"},{"p":"tests/behavioral/compute-dev-count.bats","pv":"@test.*0 tasks","c":"behavioral test for compute-dev-count.sh with 0 input"},{"p":"tests/behavioral/resolve-task-deps.bats","pv":"@test.*circular","c":"behavioral test for resolve-task-deps.sh circular dep detection"},{"p":"tests/behavioral/file-overlap-serialized-commit.bats","pv":"@test.*file.overlap","c":"behavioral test for file-overlap detection logic"}],"kl":[{"fr":"tests/static/agent-task-coordination.bats","to":"agents/yolo-dev.md","vi":"test checks for Task Self-Claiming section"},{"fr":"tests/static/agent-task-coordination.bats","to":"agents/yolo-fe-dev.md","vi":"test checks FE Dev Task Self-Claiming section"},{"fr":"tests/static/agent-task-coordination.bats","to":"agents/yolo-fe-lead.md","vi":"test checks FE Lead Summary Aggregation section"},{"fr":"tests/unit/execute-protocol-parallel.bats","to":"references/execute-protocol.md","vi":"test checks for parallel dispatch documentation in Step 4, 6, and 7"},{"fr":"tests/behavioral/compute-dev-count.bats","to":"scripts/compute-dev-count.sh","vi":"behavioral test exercises script directly"},{"fr":"tests/behavioral/resolve-task-deps.bats","to":"scripts/resolve-task-deps.sh","vi":"behavioral test exercises script directly"},{"fr":"tests/behavioral/file-overlap-serialized-commit.bats","to":"scripts/git-commit-serialized.sh","vi":"behavioral test verifies lock file and retry behavior"}]},"obj":"Write BATS tests validating all Phase 3 artifacts: agent task coordination sections (including FE/UX), teammate-api-patterns documentation, execute-protocol parallel dispatch for Steps 4/6/7, and behavioral tests for compute-dev-count.sh, resolve-task-deps.sh, file-overlap detection, and git-commit-serialized.sh (REQ-03)","sk":["commit"],"fm":["tests/static/agent-task-coordination.bats","tests/unit/task-coordination-patterns.bats","tests/unit/execute-protocol-parallel.bats","tests/behavioral/compute-dev-count.bats","tests/behavioral/resolve-task-deps.bats","tests/behavioral/file-overlap-serialized-commit.bats"],"auto":true}
{"id":"T1","tp":"auto","a":"Create tests/static/agent-task-coordination.bats with static validation tests: (1) yolo-dev.md contains Task Self-Claiming section with team_mode=teammate guard, (2) yolo-lead.md contains Summary Aggregation section with team_mode=teammate guard, (3) yolo-senior.md contains Parallel Review section covering Step 4 and Step 7, (4) yolo-fe-senior.md and yolo-ux-senior.md contain Parallel Review sections, (5) yolo-fe-dev.md contains Task Self-Claiming with team_mode guard (C1), (6) yolo-ux-dev.md contains Task Self-Claiming with team_mode guard (C1), (7) yolo-fe-lead.md contains Summary Aggregation with team_mode guard (C1), (8) yolo-ux-lead.md contains Summary Aggregation with team_mode guard (C1), (9) all new sections reference teammate-api-patterns.md. Follow pattern from tests/static/agent-teammate-sections.bats.","f":["tests/static/agent-task-coordination.bats"],"v":"bats tests/static/agent-task-coordination.bats passes with all assertions including FE/UX checks","done":"Static agent task coordination tests created covering all departments"}
{"id":"T2","tp":"auto","a":"Create tests/unit/task-coordination-patterns.bats with unit tests verifying teammate-api-patterns.md content: (1) Task Coordination section exists with TaskCreate, TaskList, TaskUpdate subsections, (2) Dynamic Dev Scaling section exists with min(N,5) formula, (3) Task-Level Blocking section exists with cross-plan dependency example, (4) handoff-schemas.md contains task_claim, task_complete, summary_aggregation schemas.","f":["tests/unit/task-coordination-patterns.bats"],"v":"bats tests/unit/task-coordination-patterns.bats passes with all assertions","done":"Task coordination pattern documentation tests created and passing"}
{"id":"T3","tp":"auto","a":"Create tests/unit/execute-protocol-parallel.bats with unit tests verifying execute-protocol.md parallel dispatch: (1) Step 4 contains team_mode conditional for parallel Senior dispatch, (2) Step 4 contains 2+ plan threshold note (D11), (3) Step 6 contains TaskCreate mapping for parallel Dev dispatch, (4) Step 6 contains dynamic Dev scaling formula, (5) Step 6 documents Lead summary aggregation, (6) Step 6 documents task-level blocking, (7) Step 7 contains team_mode conditional for parallel Senior dispatch (C2), (8) Step 7 contains 2+ plan threshold note (D11), (9) Step 7 exit gate references code-review.jsonl r:approve.","f":["tests/unit/execute-protocol-parallel.bats"],"v":"bats tests/unit/execute-protocol-parallel.bats passes with all assertions including Step 7 checks","done":"Execute protocol parallel dispatch tests created covering Steps 4, 6, and 7"}
{"id":"T4","tp":"auto","a":"Run full test suite (bats tests/) to verify all existing 988+ tests still pass unchanged alongside new tests (T1-T3 static/unit + T5-T7 behavioral). Fix any regressions found. Validate serialized commit script does not affect normal (non-parallel) git operations.","f":[],"v":"Full test suite passes with 0 failures; test count >= 988 + new tests from T1-T3 + T5-T7","done":"Full test suite green with no regressions, all new tests passing"}
{"id":"T5","tp":"auto","a":"Create tests/behavioral/compute-dev-count.bats with behavioral tests exercising scripts/compute-dev-count.sh directly: (1) --available 0 outputs 0 devs, (2) --available 1 outputs 1 dev, (3) --available 5 outputs 5 devs, (4) --available 10 outputs 5 devs (cap), (5) --available 3 outputs 3 devs, (6) negative input returns error exit code, (7) non-numeric input returns error exit code, (8) missing --available flag returns error. (D9, C9)","f":["tests/behavioral/compute-dev-count.bats"],"v":"bats tests/behavioral/compute-dev-count.bats passes with all 8 edge case assertions","done":"compute-dev-count.sh behavioral tests created covering all edge cases"}
{"id":"T6","tp":"auto","a":"Create tests/behavioral/resolve-task-deps.bats with behavioral tests exercising scripts/resolve-task-deps.sh directly: (1) linear chain T1->T2->T3 outputs correct order, (2) parallel tasks (no td) outputs all tasks as available, (3) mixed deps (some td, some independent) outputs correct partial order, (4) circular dep T1->T2->T1 exits 1 with error message, (5) plan-level d field resolution across multiple plans with --all-plans flag, (6) empty plan (header only, no tasks) outputs empty order. (D9, C9)","f":["tests/behavioral/resolve-task-deps.bats"],"v":"bats tests/behavioral/resolve-task-deps.bats passes with all 6 assertions including circular dep detection","done":"resolve-task-deps.sh behavioral tests created covering chain, parallel, mixed, and circular deps"}
{"id":"T7","tp":"auto","a":"Create tests/behavioral/file-overlap-serialized-commit.bats with behavioral tests: (1) given plan with T1 (f: [a.sh]) and T2 (f: [a.sh, b.sh]), verify T2 is blocked while T1 executes (file overlap), (2) given T1 (f: [a.sh]) and T2 (f: [b.sh]), verify both are claimable (no overlap), (3) verify scripts/git-commit-serialized.sh creates lock file (.git/yolo-commit.lock) during commit, (4) verify git-commit-serialized.sh retries on lock contention (simulate held lock), (5) verify git-commit-serialized.sh exits non-zero after 5 failed retries. (D5, D8, D9)","f":["tests/behavioral/file-overlap-serialized-commit.bats"],"v":"bats tests/behavioral/file-overlap-serialized-commit.bats passes with all 5 assertions","done":"File-overlap detection and serialized commit behavioral tests created and passing"}

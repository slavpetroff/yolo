{"p":"04","n":"04","t":"Shutdown protocol enforcement","w":3,"d":["04-02","04-03"],"xd":[{"p":"02","n":"03","a":".yolo-planning/phases/02-department-teams/02-03.summary.jsonl","r":"shutdown protocol skeleton from Phase 2"}],"mh":{"tr":["Lead sends shutdown_request to all teammates with configurable deadline","Teammates complete current work, commit artifacts, send shutdown_response","Lead verifies all responses received before team cleanup","Timeout handling: if teammate does not respond within deadline, log and proceed","Shutdown protocol documented in both Lead and all teammate agent files","execute-protocol.md Step 10 references shutdown protocol"],"ar":[{"p":"agents/yolo-lead.md","pv":"file exists","c":"contains ## Shutdown Protocol Enforcement section with timeout handling"},{"p":"references/execute-protocol.md","pv":"file exists","c":"Step 10 references shutdown protocol via teammate-api-patterns.md"},{"p":"references/teammate-api-patterns.md","pv":"file exists","c":"## Shutdown Protocol section has timeout and verification details"}],"kl":[{"fr":"references/execute-protocol.md Step 10","to":"agents/yolo-lead.md ## Shutdown Protocol Enforcement","vi":"Step 10 sign-off triggers shutdown protocol in teammate mode"},{"fr":"agents/yolo-lead.md ## Shutdown Protocol Enforcement","to":"references/teammate-api-patterns.md ## Shutdown Protocol","vi":"Lead instructions reference canonical shutdown patterns"}]},"obj":"Enforce the shutdown protocol with timeout handling, verification, and logging in Lead agent and all teammate agent files","sk":["commit"],"fm":["agents/yolo-lead.md","references/teammate-api-patterns.md","references/execute-protocol.md","tests/static/shutdown-protocol.bats","agents/yolo-dev.md"],"auto":true}
{"id":"T1","a":"Enhance ## Shutdown Protocol section in references/teammate-api-patterns.md with: (1) detailed timeout handling -- if teammate does not respond within deadline_seconds, Lead logs the timeout and proceeds with cleanup, (2) verification checklist -- Lead checks each teammate responded, (3) incomplete work logging -- any in_progress responses logged to summary.jsonl deviations field, (4) error recovery -- if shutdown itself fails, Lead force-proceeds with artifact verification.","f":["references/teammate-api-patterns.md"],"v":"Shutdown protocol section has timeout, verification, and error recovery documented","done":"Enhanced ## Shutdown Protocol with all 4 subsections","td":[]}
{"id":"T2","a":"Add ## Shutdown Protocol Enforcement section to agents/yolo-lead.md with the complete Lead-side shutdown algorithm: (1) collect list of registered teammates per department, (2) send shutdown_request via SendMessage to each, (3) start deadline timer, (4) collect shutdown_response messages, (5) on timeout: log non-responding teammates, mark their work as incomplete in deviations, (6) verify all artifacts committed (git status clean for team files), (7) write final summary artifacts, (8) team auto-cleanup on Lead session end.","f":["agents/yolo-lead.md"],"v":"Section present with 8-step algorithm","done":"## Shutdown Protocol Enforcement section in yolo-lead.md with complete algorithm","td":["T1"]}
{"id":"T3","a":"Add ## Shutdown Response section to agents/yolo-dev.md (and reference for other teammate agents) documenting teammate-side shutdown behavior: (1) on receiving shutdown_request, complete current task if in progress (do not start new tasks), (2) commit any pending artifacts, (3) send shutdown_response with status (clean/in_progress/error) and artifacts_committed flag, (4) if cannot complete within deadline, send in_progress status with pending_work list.","f":["agents/yolo-dev.md"],"v":"Section present with 4-step response protocol","done":"## Shutdown Response section in yolo-dev.md","td":["T1"]}
{"id":"T4","a":"Update references/execute-protocol.md Step 10 (Sign-off) to include shutdown protocol trigger: after sign-off decision, if team_mode=teammate, Lead executes shutdown protocol per agents/yolo-lead.md ## Shutdown Protocol Enforcement before final cleanup. Add conditional block that is inactive when team_mode=task.","f":["references/execute-protocol.md"],"v":"Step 10 contains teammate-mode shutdown trigger","done":"Step 10 has conditional shutdown protocol reference","td":["T2"]}
{"id":"T5","a":"Create tests/static/shutdown-protocol.bats validating: (1) yolo-lead.md contains ## Shutdown Protocol Enforcement section, (2) yolo-dev.md contains ## Shutdown Response section, (3) teammate-api-patterns.md shutdown section mentions deadline_seconds and timeout handling, (4) execute-protocol.md Step 10 references shutdown protocol, (5) handoff-schemas.md contains shutdown_request and shutdown_response schemas (from Phase 2).","f":["tests/static/shutdown-protocol.bats"],"v":"All static tests pass","done":"5+ test cases, all passing","td":["T1","T2","T3","T4"]}

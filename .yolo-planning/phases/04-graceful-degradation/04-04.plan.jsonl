{"p":"04","n":"04","t":"Shutdown protocol enforcement","w":3,"d":["04-02","04-03"],"xd":[{"p":"02","n":"03","a":".yolo-planning/phases/02-department-teams/02-03.summary.jsonl","r":"shutdown protocol skeleton from Phase 2"}],"mh":{"tr":["Lead sends shutdown_request to all teammates with deadline","Teammates complete current work, commit artifacts, send shutdown_response","Lead verifies all responses received before team cleanup","Timeout handling: if teammate does not respond within deadline, log and proceed","Shutdown protocol documented in both Lead and all teammate agent files","execute-protocol.md Step 10 references shutdown protocol","shutdown_request and shutdown_response schemas in handoff-schemas.md"],"ar":[{"p":"agents/yolo-lead.md","pv":"file exists","c":"contains ## Shutdown Protocol Enforcement section with timeout handling"},{"p":"references/execute-protocol.md","pv":"file exists","c":"Step 10 references shutdown protocol via teammate-api-patterns.md"},{"p":"references/teammate-api-patterns.md","pv":"file exists","c":"## Shutdown Protocol section has timeout and verification details"},{"p":"references/handoff-schemas.md","pv":"file exists","c":"contains shutdown_request and shutdown_response schemas"}],"kl":[{"fr":"references/execute-protocol.md Step 10","to":"agents/yolo-lead.md ## Shutdown Protocol Enforcement","vi":"Step 10 sign-off triggers shutdown protocol in teammate mode"},{"fr":"agents/yolo-lead.md ## Shutdown Protocol Enforcement","to":"references/teammate-api-patterns.md ## Shutdown Protocol","vi":"Lead instructions reference canonical shutdown patterns"}]},"obj":"Enforce the shutdown protocol with timeout handling, verification, and logging in Lead agent and all teammate agent files","sk":["commit"],"fm":["agents/yolo-lead.md","references/teammate-api-patterns.md","references/execute-protocol.md","references/handoff-schemas.md","tests/static/shutdown-protocol.bats","agents/yolo-dev.md","agents/yolo-senior.md","agents/yolo-architect.md","agents/yolo-tester.md","agents/yolo-qa.md","agents/yolo-qa-code.md","agents/yolo-security.md","agents/yolo-fe-lead.md","agents/yolo-ux-lead.md","agents/yolo-fe-dev.md","agents/yolo-ux-dev.md"],"auto":true}
{"id":"T1","a":"Enhance ## Shutdown Protocol section in references/teammate-api-patterns.md with: (1) detailed timeout handling -- if teammate does not respond within deadline_seconds, Lead logs the timeout and proceeds with cleanup, (2) verification checklist -- Lead checks each teammate responded, (3) incomplete work logging -- any in_progress responses logged to summary.jsonl deviations field, (4) error recovery -- if shutdown itself fails, Lead force-proceeds with artifact verification.","f":["references/teammate-api-patterns.md"],"v":"Shutdown protocol section has timeout, verification, and error recovery documented","done":"Enhanced ## Shutdown Protocol with all 4 subsections","td":[],"tp":"auto"}
{"id":"T2","a":"Add ## Shutdown Protocol Enforcement section to agents/yolo-lead.md (canonical) with the complete Lead-side shutdown algorithm: (1) collect list of registered teammates per department, (2) send shutdown_request via SendMessage to each, (3) start deadline timer, (4) collect shutdown_response messages, (5) on timeout: log non-responding teammates, mark their work as incomplete in deviations, (6) verify all artifacts committed (git status clean for team files), (7) write final summary artifacts, (8) team auto-cleanup on Lead session end. Also update references/execute-protocol.md Step 10 (Sign-off) to include shutdown protocol trigger: after sign-off decision, if team_mode=teammate, Lead executes shutdown protocol per agents/yolo-lead.md ## Shutdown Protocol Enforcement before final cleanup (conditional block, inactive when team_mode=task). Also add one-line cross-reference to agents/yolo-fe-lead.md and agents/yolo-ux-lead.md: 'For shutdown enforcement protocol, see agents/yolo-lead.md ## Shutdown Protocol Enforcement.'","f":["agents/yolo-lead.md","references/execute-protocol.md","agents/yolo-fe-lead.md","agents/yolo-ux-lead.md"],"v":"Section present in yolo-lead.md with 8-step algorithm; Step 10 has teammate-mode shutdown trigger; cross-references in fe-lead and ux-lead","done":"## Shutdown Protocol Enforcement in yolo-lead.md; execute-protocol.md Step 10 updated; cross-references in fe-lead and ux-lead","td":["T1"],"tp":"auto"}
{"id":"T3","a":"Add ## Shutdown Response section to agents/yolo-dev.md (canonical, full content) documenting teammate-side shutdown behavior: (1) on receiving shutdown_request, complete current task if in progress (do not start new tasks), (2) commit any pending artifacts, (3) send shutdown_response with status (clean/in_progress/error) and artifacts_committed flag, (4) if cannot complete within deadline, send in_progress status with pending_work list. Add one-line cross-reference to ALL other teammate agents: yolo-senior.md, yolo-architect.md, yolo-tester.md, yolo-qa.md, yolo-qa-code.md, yolo-security.md, yolo-fe-dev.md, yolo-ux-dev.md. Cross-reference line: 'For shutdown response protocol, follow agents/yolo-dev.md ## Shutdown Response.' (9 files total: 1 canonical + 8 cross-refs)","f":["agents/yolo-dev.md","agents/yolo-senior.md","agents/yolo-architect.md","agents/yolo-tester.md","agents/yolo-qa.md","agents/yolo-qa-code.md","agents/yolo-security.md","agents/yolo-fe-dev.md","agents/yolo-ux-dev.md"],"v":"Section present in yolo-dev.md with 4-step response protocol; cross-references in all 8 other teammate agents","done":"## Shutdown Response in yolo-dev.md; cross-references in 8 other agent files","td":["T1"],"tp":"auto"}
{"id":"T4","a":"Add shutdown_request and shutdown_response schemas to references/handoff-schemas.md as new sections. shutdown_request: {type, reason, deadline_seconds}. shutdown_response: {type, status, pending_work, artifacts_committed}. Place after ## escalation section and before ## Cross-Department Schemas section.","f":["references/handoff-schemas.md"],"v":"handoff-schemas.md contains shutdown_request and shutdown_response sections","done":"Both schemas present in handoff-schemas.md","td":[],"tp":"auto"}
{"id":"T5","a":"Create tests/static/shutdown-protocol.bats validating: (1) yolo-lead.md contains ## Shutdown Protocol Enforcement section, (2) yolo-dev.md contains ## Shutdown Response section, (3) teammate-api-patterns.md shutdown section mentions deadline_seconds and timeout handling, (4) execute-protocol.md Step 10 references shutdown protocol, (5) handoff-schemas.md contains shutdown_request and shutdown_response schemas.","f":["tests/static/shutdown-protocol.bats"],"v":"All static tests pass","done":"5+ test cases, all passing","td":["T1","T2","T3","T4"],"tp":"auto"}

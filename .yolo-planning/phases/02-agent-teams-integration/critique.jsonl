{"id":"C-01","severity":"critical","category":"api-constraint","finding":"SendMessage delivery is async and not guaranteed. Plans (02-03, 02-04) assume synchronous coordination where Leads exchange handoff messages reliably. In practice, teammates go idle between turns and messages queue — delivery timing is unpredictable. 10-step workflow orchestration via SendMessage creates fragile coordination chains.","recommendation":"Use TaskList (shared task list) as primary coordination mechanism, not SendMessage. Tasks are persistent and polled, not pushed. Reserve SendMessage for notifications only, never as blocking gates.","st":"open"}
{"id":"C-02","severity":"critical","category":"api-constraint","finding":"Teammate API forbids nested teams. Plans assume per-department teams where each department Lead creates a sub-team of specialists (02-01 spawn-team.sh spawns per-department). But teammates cannot call spawnTeam — only the session owner can create one team. A department Lead running as a teammate CANNOT spawn its own specialist team.","recommendation":"Redesign as flat structure: one team with department Leads as direct teammates of the Owner. Each Lead uses Task tool (subagents, not teammates) for its internal specialists. This preserves the existing 10-step per-department workflow while using teams for cross-department parallelism.","st":"open"}
{"id":"C-03","severity":"critical","category":"api-constraint","finding":"One team per session. Plans (02-04) call spawnTeam 3 times (once per department) to create 3 simultaneous department teams. But team context is session-scoped — spawnTeam creates one team that the owner manages. Multiple simultaneous teams are not supported by the API.","recommendation":"Single team with all department Leads as teammates. Owner coordinates via TaskList. Leads coordinate with each other via SendMessage (Lead-to-Lead). Each Lead runs its 10-step workflow independently using Task tool subagents.","st":"open"}
{"id":"C-04","severity":"major","category":"design","finding":"spawn-team.sh (02-01-02) attempts to programmatically orchestrate Teammate API calls from a bash script. But spawnTeam and SendMessage are Claude Code tools, not CLI commands. Scripts cannot invoke tools directly — they can only output instructions for the Owner agent to interpret.","recommendation":"spawn-team.sh should output a team configuration manifest (JSON) that go.md reads and translates into Teammate+Task tool calls. Script outputs data, Owner agent acts on it.","st":"open"}
{"id":"C-05","severity":"major","category":"design","finding":"shutdown-team.sh (02-01-03) same problem as C-04. It attempts to send shutdown_request from a script, but SendMessage is a tool only callable by the agent. The script cannot interact with the Teammate API.","recommendation":"shutdown-team.sh outputs shutdown instructions. go.md Owner agent reads these and calls SendMessage(type:shutdown_request) per teammate. Pattern: script=data, agent=action.","st":"open"}
{"id":"C-06","severity":"major","category":"duplication","finding":"config/team-profiles.json (02-01-01) duplicates agent roster data already in references/company-hierarchy.md and config/defaults.json. 26 agents with roles, models, departments are already defined. A second source of truth creates sync drift.","recommendation":"Derive team composition from existing config/defaults.json departments + company-hierarchy.md roster. No new config file needed — resolve-departments.sh already knows which departments are active and which agents belong to each.","st":"open"}
{"id":"C-07","severity":"major","category":"gap","finding":"02-02-01 agent-start.sh team context assumes SubagentStart hook input includes team_id and dept fields. But SubagentStart event format is defined by Claude Code, not YOLO. The actual event payload may not contain team membership data.","recommendation":"Team context should come from the team config file (~/.claude/teams/{team-name}/config.json) which is readable by any teammate. Don't assume hook input contains team fields — read team config instead.","st":"open"}
{"id":"C-08","severity":"major","category":"assumption","finding":"02-03-03 cross-team-protocol.md assumes TaskList is shared across all teams and departments. But Teams have 1:1 correspondence with TaskLists. If using a single team (per C-02/C-03 fix), this works. But if the plans keep per-department teams, each team has its own isolated TaskList.","recommendation":"This is resolved if the architecture adopts the single-team model (C-02/C-03). With one team, one shared TaskList coordinates all departments naturally.","st":"open"}
{"id":"C-09","severity":"major","category":"scope","finding":"02-04-02 go.md execute mode changes are massive: reading team_spawn_plan, calling spawnTeam per department, dispatching via SendMessage, tracking team_ids, handling errors with --force shutdown. This is effectively a rewrite of the execute path, but go.md is already 300+ lines and the primary orchestration surface.","recommendation":"Extract team orchestration into a dedicated section or helper logic. Keep go.md focused on mode detection and dispatch. Team lifecycle management should be in execute-protocol.md instructions, not embedded in go.md prompt logic.","st":"open"}
{"id":"C-10","severity":"major","category":"alternative","finding":"Hybrid model alternative: go.md creates ONE team with department Leads as teammates. Each Lead runs the existing 10-step workflow using Task tool (subagents) for its internal specialists. This preserves the proven single-agent workflow per department while enabling parallel cross-department execution via the team.","recommendation":"ADOPT THIS MODEL. It addresses C-01 through C-03, reuses existing Task-tool-based workflow, and only requires wiring: (1) spawnTeam with 3 Lead teammates, (2) TaskList for cross-department coordination, (3) SendMessage for Lead-to-Lead handoffs, (4) shutdown at phase end. Much smaller scope than current plans.","st":"open"}
{"id":"C-11","severity":"minor","category":"scope","finding":"18 tasks across 4 plans is large for infrastructure changes. Wave 1 alone creates 4 new scripts + config + 8 test files. Risk of implementation taking too long relative to value delivered.","recommendation":"If adopting hybrid model (C-10), scope shrinks significantly: no spawn-team.sh, no shutdown-team.sh, no team-profiles.json. Just protocol updates + go.md wiring + hook adaptations. Estimate 10-12 tasks instead of 18.","st":"open"}
{"id":"C-12","severity":"minor","category":"edge-case","finding":"No rollback mechanism if team spawn partially fails. If 2 of 3 department Leads join but the 3rd fails, no cleanup path exists. Partial team state is orphaned.","recommendation":"go.md should have a cleanup-on-failure path: if any Lead fails to spawn within timeout, send shutdown_request to all active Leads and fall back to sequential Task tool mode.","st":"open"}
{"id":"C-13","severity":"minor","category":"gap","finding":"resolve-departments.sh team_spawn_plan field (02-04-01) mixes configuration concerns (which departments) with orchestration concerns (how to spawn). resolve-departments already outputs department lists — adding spawn instructions couples it to the Teammate API.","recommendation":"resolve-departments.sh outputs departments + agents (existing). go.md decides HOW to spawn based on agent_teams flag. No team_spawn_plan field needed.","st":"open"}
{"id":"C-14","severity":"minor","category":"risk","finding":"validate-send-message.sh Lead-to-Lead rule (02-02-03) requires knowing sender and recipient roles. In team mode, roles come from team config. In Task mode, roles come from .active-agent. The dual-path resolution adds complexity.","recommendation":"Simplify: in team mode, all teammates are registered in config.json. validate-send-message reads config.json members array. No dual-path needed.","st":"open"}
{"id":"C-15","severity":"minor","category":"improvement","finding":"state-updater.sh (02-04-03) new team tracking fields add complexity to already complex execution state JSON. departments.{dept}.team_id, agents[], status — these are runtime concerns that may not need persistence.","recommendation":"Minimal state: track only department completion status in execution state. Team membership is in team config.json (managed by Teammate API). Don't duplicate team state in execution state.","st":"open"}

{"p":"04","n":"02","t":"QA help text and error remediation patterns","w":1,"d":["04-01"],"mh":{"tr":["Help text for QA-related config options follows ask_user_question pattern","Error remediation output includes problem + fix (stop_message pattern)","All QA config options documented with descriptions and defaults"],"ar":[{"p":"references/qa-help-text.md","pv":"file exists","c":"Contains help text templates for QA config options and error remediation patterns for gate failures"}],"kl":[{"fr":"qa-help-text.md remediation patterns","to":"yolo-brand-essentials.toon stop_message","vi":"Every error has two parts: problem description and remediation action"},{"fr":"qa-help-text.md config options","to":"config/defaults.json QA keys","vi":"Every QA config key has a matching help entry"}]}}
{"id":"T1","tp":"auto","a":"Design help text for QA-related config options: gate enable/disable toggles, test timeout, failure threshold, QA level (post-task/post-plan/post-phase). Use metrics_block format from brand essentials for config display. Write to references/qa-help-text.md.","f":["references/qa-help-text.md"],"v":"Config help section exists with all QA options documented","done":"QA config help text committed","spec":"## T1: Design Help Text for QA Config Options\n\n### Context\nPer architecture.toon D1, the canonical qa_gates config has 5 fields: post_task (bool), post_plan (bool), post_phase (bool), timeout_seconds (int), failure_threshold (enum). These will be added to config/defaults.json by plan 04-03. This task designs the help text that appears when users interact with these settings via /yolo:config.\n\nPer brand-essentials.toon metrics_block pattern: key-value pairs, one per line, labels left-padded to 14 chars. Per ask_user_question pattern: question on first line, options as lettered list.\n\n### File to Create\n`references/qa-help-text.md`\n\n### Structure\n\n```markdown\n# QA Gate Help Text\n\nHelp text and display templates for QA-related configuration options. Referenced by `commands/config.md` Step 2.7 (QA Gates) and Settings Reference table.\n\nDependency: `references/qa-output-patterns.md` for output template cross-references.\n\n## Config Display (metrics_block format)\n\nShown when user views current QA gate settings via /yolo:config or /yolo:status.\n\n```\n      QA Gates:\n     Post-task: {enabled|disabled}\n     Post-plan: {enabled|disabled}\n    Post-phase: {enabled|disabled}\n       Timeout: {N}s\n     Threshold: {strict|lenient|off}\n```\n\nExample with defaults:\n```\n      QA Gates:\n     Post-task: enabled\n     Post-plan: enabled\n    Post-phase: enabled\n       Timeout: 30s (post-task) / 300s (post-plan, post-phase)\n     Threshold: strict\n```\n\n## Config Option Help Text\n\nEach option below maps to a key in the `qa_gates` object in config/defaults.json.\n\n### qa_gates.post_task\n\n**Type:** boolean\n**Default:** `true`\n**Description:** Run scoped tests after each Dev task commit during Step 7. When disabled, post-task gate is skipped entirely (exit 0, no result logged).\n**Help text:** \"Post-task gate runs unit tests matching modified files after each Dev commit. Disable to skip per-task testing (not recommended).\"\n\n### qa_gates.post_plan\n\n**Type:** boolean\n**Default:** `true`\n**Description:** Run full test suite after all tasks in a plan complete. Blocks progression to next plan on failure.\n**Help text:** \"Post-plan gate runs the full test suite when a plan finishes. Disable to skip plan-level verification.\"\n\n### qa_gates.post_phase\n\n**Type:** boolean\n**Default:** `true`\n**Description:** Run full system verification before QA agent spawn in Step 9. Failure blocks QA agents (cost savings).\n**Help text:** \"Post-phase gate verifies all gates and tests before spawning QA agents. Disable to skip pre-QA verification.\"\n\n### qa_gates.timeout_seconds\n\n**Type:** positive integer\n**Default:** `30` (post-task) / `300` (post-plan, post-phase)\n**Description:** Maximum wall-clock time for gate execution. Gate result is WARN on timeout.\n**Help text:** \"Maximum seconds for gate execution. Post-task defaults to 30s. Post-plan and post-phase default to 300s.\"\n\n### qa_gates.failure_threshold\n\n**Type:** enum (\"strict\" | \"lenient\" | \"off\")\n**Default:** `\"strict\"`\n**Description:** Controls gate behavior on test failure. strict = any failure blocks. lenient = only critical failures block. off = log but never block.\n**Help text:** \"How strictly gates enforce test results. 'strict' blocks on any failure. 'lenient' blocks on critical failures only. 'off' logs results without blocking.\"\n\n## Interactive Config Prompt (ask_user_question pattern)\n\nShown during /yolo:config Step 2.7 when user reaches QA Gates section.\n\n```\nConfigure QA Gates. Pick one.\n  (A) Enable all gates (recommended)\n  (B) Post-plan and post-phase only (skip per-task)\n  (C) Post-phase only (minimal)\n  (D) Disable all gates\n  (E) Custom configuration\n```\n\nIf user picks (E), show individual toggles:\n\n```\nPost-task QA gate (tests after each commit)?\n  (A) Enabled (default)\n  (B) Disabled\n```\n\n(Repeat for post_plan, post_phase, then prompt for timeout and threshold.)\n```\n\n### Cross-References\n- Config schema: `config/defaults.json` qa_gates object (plan 04-03)\n- Output patterns: `references/qa-output-patterns.md` (plan 04-01)\n- Config command: `commands/config.md` Step 2.7 (plan 04-05)\n\n### Commit\n`docs(04-continuous-qa-system): QA config option help text`\n\n### Verification\n- File exists: `[ -f references/qa-help-text.md ]`\n- Contains all 5 config options: `grep -c 'qa_gates\\.' references/qa-help-text.md` returns >= 5\n- Uses metrics_block format: verify left-padded labels present (Post-task, Post-plan, etc.)\n- Uses ask_user_question pattern: `grep -c 'Pick one' references/qa-help-text.md` returns >= 1\n- Each option has Type, Default, Description, Help text fields"}
{"id":"T2","tp":"auto","a":"Design error remediation patterns for each QA gate failure type: test failures (show failing test + expected vs actual), lint errors (show file:line + rule), timeout (show elapsed vs limit + suggestion), missing test coverage (show uncovered files). Each follows stop_message two-part pattern. Append to references/qa-help-text.md.","f":["references/qa-help-text.md"],"td":["T1"],"v":"Remediation section has templates for all four failure types","done":"Error remediation patterns committed","spec":"## T2: Design Error Remediation Patterns\n\n### Context\nPer brand-essentials.toon stop_message pattern: \"\\u2717 {What went wrong}. {How to fix it}.\" Every error must have two parts: problem description and remediation action. This task defines the remediation templates for each specific QA gate failure type.\n\nPer architecture.toon C5, three scenarios produce gate results: (1) no test infra = WARN, (2) no matching tests = PASS, (3) tests fail = FAIL. This task covers the FAIL remediation patterns.\n\n### File to Modify\n`references/qa-help-text.md` -- append after the Interactive Config Prompt section.\n\n### Content to Append\n\n```markdown\n## Error Remediation Patterns\n\nEach failure type follows the stop_message two-part pattern from brand-essentials.toon:\n```\n\\u2717 {What went wrong}. {How to fix it}.\n```\n\nGate scripts use these templates to generate actionable error output.\n\n### Test Failures\n\nWhen one or more tests fail during gate execution.\n\n**Problem line:**\n```\n\\u2717 {N} test(s) failed in {gate-name} gate.\n```\n\n**Detail lines** (one per failing test):\n```\n    {test-file}:{line} -- {test name}\n      Expected: {expected value}\n      Actual:   {actual value}\n```\n\n**Remediation line:**\n```\n\\u279C Review test output above. Fix the failing code or update the test expectation, then re-commit.\n```\n\n**Full example:**\n```\n\\u2717 2 test(s) failed in post-task gate.\n\n    tests/unit/resolve-qa-config.bats:42 -- reads fallback from defaults.json\n      Expected: 30\n      Actual:   0\n    tests/unit/resolve-qa-config.bats:58 -- handles missing config.json\n      Expected: exit 0\n      Actual:   exit 1\n\n\\u279C Review test output above. Fix the failing code or update the test expectation, then re-commit.\n```\n\n### Lint Errors\n\nWhen static analysis or lint checks fail (future extensibility).\n\n**Problem line:**\n```\n\\u2717 {N} lint error(s) found in {gate-name} gate.\n```\n\n**Detail lines** (one per error):\n```\n    {file}:{line}:{col} -- {rule-name}: {message}\n```\n\n**Remediation line:**\n```\n\\u279C Fix lint errors above. See rule documentation for guidance.\n```\n\n**Full example:**\n```\n\\u2717 1 lint error(s) found in post-plan gate.\n\n    scripts/qa-gate-post-task.sh:15:3 -- SC2086: Double quote to prevent globbing and word splitting.\n\n\\u279C Fix lint errors above. See rule documentation for guidance.\n```\n\n### Timeout\n\nWhen gate execution exceeds qa_gates.timeout_seconds.\n\n**Problem line:**\n```\n\\u26A0 {gate-name} gate timed out after {N}s (limit: {M}s).\n```\n\n**Remediation line:**\n```\n\\u279C Increase timeout via qa_gates.timeout_seconds in /yolo:config, or reduce test scope.\n```\n\n**Full example:**\n```\n\\u26A0 post-task gate timed out after 30s (limit: 30s).\n\n\\u279C Increase timeout via qa_gates.timeout_seconds in /yolo:config, or reduce test scope.\n```\n\n### Missing Test Coverage\n\nWhen gate detects files modified by a task that have no corresponding test files.\n\n**Problem line:**\n```\n\\u26A0 {N} modified file(s) have no test coverage.\n```\n\n**Detail lines** (one per uncovered file, using file_checklist pattern):\n```\n    \\u25CB {file-path} -- no matching test file\n```\n\n**Remediation line:**\n```\n\\u279C Consider adding tests for uncovered files. This is a warning, not a blocking failure.\n```\n\n**Full example:**\n```\n\\u26A0 2 modified file(s) have no test coverage.\n\n    \\u25CB scripts/format-gate-result.sh -- no matching test file\n    \\u25CB scripts/resolve-qa-config.sh -- no matching test file\n\n\\u279C Consider adding tests for uncovered files. This is a warning, not a blocking failure.\n```\n```\n\n### Symbol Usage (Remediation)\n- `\\u2717` (Failure/error) -- blocking problem line\n- `\\u26A0` (Warning) -- non-blocking problem line (timeout, missing coverage)\n- `\\u25CB` (Pending/neutral) -- uncovered file in checklist\n- `\\u279C` (Info/arrow) -- remediation action\n- `--` (Separator) -- between identifier and description\n\n### Commit\n`docs(04-continuous-qa-system): error remediation patterns`\n\n### Verification\n- `grep -c '## Error Remediation Patterns' references/qa-help-text.md` returns 1\n- Contains all four failure types: Test Failures, Lint Errors, Timeout, Missing Test Coverage\n- Each type has Problem line, Remediation line, and Full example\n- Every problem line uses \\u2717 or \\u26A0\n- Every remediation line starts with \\u279C\n- Follows stop_message two-part pattern throughout"}
{"id":"T3","tp":"auto","a":"Design QA gate progression messaging: what the user sees when moving between gate levels (post-task -> post-plan -> post-phase). Include gate transition messages and cumulative progress display. Append to references/qa-help-text.md.","f":["references/qa-help-text.md"],"td":["T2"],"v":"Progression section shows gate-to-gate transition templates","done":"Gate progression messaging committed","spec":"## T3: Design QA Gate Progression Messaging\n\n### Context\nAs execution moves through the 11-step workflow, QA gates fire at three points: after each task commit (post-task), after plan completion (post-plan), and before QA agent spawn (post-phase). The user needs clear messaging about which gate level they are at and cumulative progress.\n\nPer architecture.toon integration points: post-task in Step 7 after commit, post-plan in Step 7 after summary, post-phase in Step 9 before QA spawn.\n\n### File to Modify\n`references/qa-help-text.md` -- append after the Error Remediation Patterns section.\n\n### Content to Append\n\n```markdown\n## Gate Progression Messaging\n\nMessages displayed during gate-level transitions in the 11-step workflow. Shows the user where they are in the gate cascade.\n\n### Post-Task to Post-Plan Transition\n\nDisplayed after the last task in a plan completes its post-task gate. Signals escalation to plan-level verification.\n\n```\n  \\u2713 All {N} task gates passed for plan {NN-MM}.\n  \\u279C Running post-plan gate...\n```\n\nExample:\n```\n  \\u2713 All 5 task gates passed for plan 04-06.\n  \\u279C Running post-plan gate...\n```\n\n### Post-Plan to Next Plan Transition\n\nDisplayed after post-plan gate passes and execution moves to the next plan in the wave.\n\n```\n  \\u2713 Plan {NN-MM} gate passed. Proceeding to plan {NN-MM}.\n```\n\nExample:\n```\n  \\u2713 Plan 04-06 gate passed. Proceeding to plan 04-07.\n```\n\n### Post-Plan to Post-Phase Transition\n\nDisplayed after the last plan in the phase completes its post-plan gate. Signals escalation to phase-level verification.\n\n```\n  \\u2713 All {N} plan gates passed for phase {NN}.\n  \\u279C Running post-phase gate...\n```\n\nExample:\n```\n  \\u2713 All 10 plan gates passed for phase 04.\n  \\u279C Running post-phase gate...\n```\n\n### Post-Phase to QA Agent Transition\n\nDisplayed after post-phase gate passes and QA agents are about to spawn.\n\n```\n  \\u2713 Post-phase gate passed.\n  \\u279C Spawning QA agents for deep verification...\n```\n\n### Cumulative Progress Display\n\nShown at each gate transition to give the user a sense of overall progress. Uses progress_bars format from brand essentials.\n\n```\n  Gate progress:\n    Post-task:  \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588 100% ({N}/{M} tasks)\n    Post-plan:  \\u2588\\u2588\\u2588\\u2588\\u2588\\u2591\\u2591\\u2591\\u2591\\u2591  50% ({N}/{M} plans)\n    Post-phase: \\u2591\\u2591\\u2591\\u2591\\u2591\\u2591\\u2591\\u2591\\u2591\\u2591   0% (pending)\n```\n\nProgress bar width: always 10 chars per brand-essentials.toon progress_bars specification.\n```\n\n### Symbol Usage (Progression)\n- `\\u2713` (Success/complete) -- gate level passed\n- `\\u279C` (Info/arrow) -- next action / transition\n- `\\u2588` (Filled block) -- progress bar filled\n- `\\u2591` (Empty block) -- progress bar empty\n\n### Commit\n`docs(04-continuous-qa-system): gate progression messaging`\n\n### Verification\n- `grep -c '## Gate Progression Messaging' references/qa-help-text.md` returns 1\n- Contains all four transitions: task-to-plan, plan-to-next-plan, plan-to-phase, phase-to-QA\n- Contains cumulative progress display with progress bars\n- Progress bar width is 10 chars (per brand-essentials.toon)\n- All transition messages use \\u2713 and/or \\u279C"}
{"id":"T4","tp":"auto","a":"Design QA gate skip/override messaging for when user bypasses a gate (via --yolo flag or config). Show warning with consequences. Follow warning symbol pattern from brand essentials. Append to references/qa-help-text.md.","f":["references/qa-help-text.md"],"td":["T3"],"v":"Skip/override section uses warning symbol and explains consequences","done":"Gate skip messaging committed","spec":"## T4: Design QA Gate Skip/Override Messaging\n\n### Context\nUsers can bypass QA gates in two ways: (1) --yolo flag on /yolo:go which skips all gates, (2) setting qa_gates.post_task/post_plan/post_phase to false in config. When gates are skipped, the user must see a clear warning about consequences.\n\nPer brand-essentials.toon: \\u26A0 (U+26A0) is the warning symbol for non-blocking concerns.\nPer architecture.toon D4: configurable via qa_gates.timeout_seconds.\nPer architecture.toon backward compatibility risk: missing key = all gates enabled (fail-open).\n\n### File to Modify\n`references/qa-help-text.md` -- append after the Gate Progression Messaging section.\n\n### Content to Append\n\n```markdown\n## Gate Skip/Override Messaging\n\nWarning messages displayed when QA gates are bypassed. Every skip must show the consequence so users make informed decisions.\n\n### Config-Disabled Gate\n\nWhen a gate is disabled via qa_gates config (e.g., `qa_gates.post_task: false`).\n\n```\n  \\u26A0 Post-task QA gate disabled via config. Tests will not run after task commits.\n```\n\nShown once at the start of Step 7 execution, not repeated per task.\n\n### --yolo Flag Override\n\nWhen user passes --yolo flag to /yolo:go, ALL gates are skipped.\n\n```\n  \\u26A0 All QA gates skipped (--yolo flag). No automated testing during execution.\n\n  Consequences:\n    \\u25CB Post-task gate: skipped -- test regressions may go undetected per task\n    \\u25CB Post-plan gate: skipped -- plan may progress with failing tests\n    \\u25CB Post-phase gate: skipped -- QA agents will run without pre-verification\n```\n\n### failure_threshold Override\n\nWhen qa_gates.failure_threshold is set to \"off\" (log-only, never block).\n\n```\n  \\u26A0 QA gate threshold set to 'off'. Gate failures will be logged but will not block execution.\n```\n\nWhen set to \"lenient\" (only critical failures block).\n\n```\n  \\u26A0 QA gate threshold set to 'lenient'. Only critical test failures will block execution.\n```\n\n### Individual Gate Skip During Execution\n\nWhen a specific gate is skipped at runtime (e.g., disabled between tasks).\n\n```\n  \\u25CB {gate-name} gate: skipped (disabled)\n```\n\nThis replaces the normal gate status line. It is logged in .qa-gate-results.jsonl with `r:\"SKIP\"` for audit trail.\n\n### Re-enable Warning\n\nShown when user re-enables a previously disabled gate.\n\n```\n  \\u2713 {gate-name} gate re-enabled. Gate will run on next trigger.\n  \\u26A0 Prior skipped gates were not retroactively executed. Consider running /yolo:qa to verify.\n```\n```\n\n### Cross-References\n- Output patterns: `references/qa-output-patterns.md` for gate result templates\n- Config options: this file, Config Option Help Text section above\n- Gate integration: `references/qa-gate-integration.md` (plan 04-08) for full skip/override logic\n\n### Commit\n`docs(04-continuous-qa-system): gate skip/override messaging`\n\n### Verification\n- `grep -c '## Gate Skip/Override Messaging' references/qa-help-text.md` returns 1\n- Contains all four skip scenarios: Config-Disabled, --yolo Flag, failure_threshold Override, Individual Gate Skip\n- Contains Re-enable Warning section\n- Every skip message uses \\u26A0 (warning) or \\u25CB (skipped/neutral)\n- Consequences section lists all three gate levels\n- Cross-references section points to qa-output-patterns.md and qa-gate-integration.md"}

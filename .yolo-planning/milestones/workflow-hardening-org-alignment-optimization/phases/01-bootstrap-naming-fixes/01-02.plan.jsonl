{"p": "01", "n": "02", "t": "Document canonical naming patterns and audit inconsistencies", "w": 1, "d": [], "mh": {"tr": ["Plan header p field contains phase number only (e.g. '01' not '01-01')", "Plan header n field contains plan number only (e.g. '01' not plan title)", "Task lines use canonical keys: id, tp, a, f, v, done (not ac, n, d)", "Summary lines use canonical keys per artifact-formats.md: p, n, t, s, dt, tc, tt, ch, fm, dv, built, tst"], "ar": [{"p": "references/naming-conventions.md", "pv": "canonical naming patterns documented for all artifact types", "c": "file exists and covers plan, summary, context, and handoff naming patterns"}, {"p": ".yolo-planning/phases/01-bootstrap-naming-fixes/decisions.jsonl", "pv": "naming audit findings appended", "c": "jq -r .dec decisions.jsonl shows naming inconsistencies found across milestones"}], "kl": [{"fr": "references/naming-conventions.md", "to": "references/artifact-formats.md", "vi": "naming-conventions.md references artifact-formats.md key dictionary as normative source"}]}, "obj": "Audit naming inconsistencies across all 3 prior milestones and document the canonical naming patterns in a single reference file (REQ-02 foundation)", "sk": ["commit"], "fm": ["references/naming-conventions.md", ".yolo-planning/phases/01-bootstrap-naming-fixes/decisions.jsonl"]}
{"id": "T1", "tp": "auto", "a": "Audit all plan.jsonl headers across 3 milestones (performance-opt, dynamic-departments, teammate-api): catalog the p field format (compound '01-01' vs simple '01'), n field format (title string vs number string), presence of required keys (p,n,t,w,d,mh,obj), and task-line key sets (canonical {id,tp,a,f,v,done} vs legacy {id,n,f,d,ac}). Write findings to decisions.jsonl. REQ-02 investigation.", "f": [".yolo-planning/phases/01-bootstrap-naming-fixes/decisions.jsonl"], "v": "decisions.jsonl contains audit findings covering all 3 milestones with specific file references", "done": "Naming audit findings committed to decisions.jsonl", "spec": "AUDIT TASK: Read plan.jsonl headers and task lines from all 3 archived milestones. Document findings in decisions.jsonl.\n\nFILES TO READ (40 plan.jsonl files total):\n- .yolo-planning/milestones/performance-opt/01-performance-optimization/01-{01..10}.plan.jsonl (10 files)\n- .yolo-planning/milestones/dynamic-departments-agent-teams/01-dynamic-personas/01-{01..04}.plan.jsonl (4 files)\n- .yolo-planning/milestones/dynamic-departments-agent-teams/02-agent-teams-integration/02-{01..03}.plan.jsonl (3 files)\n- .yolo-planning/milestones/dynamic-departments-agent-teams/03-token-optimization-context-packages/03-{01..04}.plan.jsonl (4 files)\n- .yolo-planning/milestones/teammate-api-integration/01-team-abstraction-layer/01-{01..04}.plan.jsonl (4 files)\n- .yolo-planning/milestones/teammate-api-integration/02-department-teams/02-{01..05}.plan.jsonl (5 files)\n- .yolo-planning/milestones/teammate-api-integration/03-shared-task-coordination/03-{01..05}.plan.jsonl (5 files)\n- .yolo-planning/milestones/teammate-api-integration/04-graceful-degradation/04-{01..05}.plan.jsonl (5 files)\n\nAUDIT CHECKLIST PER FILE:\n1. HEADER (line 1) -- extract with: head -1 <file> | jq .\n   a. p field format: Is it phase-only (\"01\") per canonical, or compound (\"01-01\")? Record actual value.\n   b. n field format: Is it plan-number-only (\"01\") per canonical, or a title string (\"Project Type Config...\")? Record actual value.\n   c. Required keys present: Check for {p, n, t, w, d, mh, obj}. List any missing keys.\n   d. Extra/legacy keys: Check for non-canonical keys like 'fm' (files_modified), 'sk' (skills_used), 'auto'. These are optional but note their presence.\n\n2. TASK LINES (lines 2+) -- extract with: tail -n +2 <file> | jq .\n   a. Key set: Is it canonical {id, tp, a, f, v, done} or legacy {id, n, f, d, ac}? Or a mix?\n   b. Missing keys: Does every task have 'tp' (type)? Does every task have 'v' (verify) and 'done'?\n   c. Extra keys: Note presence of 'spec' (enriched by Senior) and 'ts' (test_spec).\n\nKNOWN FINDINGS (from initial Lead investigation, confirmed by reading sample files):\n- performance-opt milestone: Header uses compound p field (\"01-01\" style in at least 01-01.plan.jsonl), n field contains title string, tasks use {id, n, f, d, ac} legacy key set (no tp, no v, no done, no a). Missing w (wave) and mh (must_haves) and obj in header.\n- dynamic-departments milestone: Same pattern as performance-opt -- compound p, title n, legacy task keys {id, n, f, d, ac}.\n- teammate-api milestone: Uses canonical p (\"01\"), canonical n (\"01\"), canonical task keys {id, tp, a, f, v, done}. Has mh, obj in header. This is the current/correct format.\n\nOUTPUT: Append 3 decisions.jsonl entries (one per milestone audit). Schema: {\"ts\":\"2026-02-17T11:00:00Z\",\"agent\":\"dev\",\"task\":\"T1\",\"dec\":\"Plan audit: {milestone} -- {findings summary}\",\"reason\":\"{detail with file counts and specific key differences}\",\"alts\":[]}. Include counts: X files audited, Y use canonical format, Z use legacy format. Reference specific files as evidence.\n\nEDGE CASE: Some files may have inconsistent format even within the same milestone (e.g., later plans adopted canonical format). Document any intra-milestone variation.\n\nAPPEND to existing decisions.jsonl (do not overwrite). Use timestamps starting 2026-02-17T11:00:00Z.", "ts": "No automated tests for audit investigation. Verification: read decisions.jsonl and confirm 3 entries with agent='dev', task='T1', each covering one milestone with specific file references and key-set analysis."}
{"id": "T2", "tp": "auto", "a": "Audit all summary.jsonl files across 3 milestones: catalog key differences (canonical {p,n,t,s,dt,tc,tt,ch,fm,dv,built,tst} vs actual), missing fields, and inconsistent field names (e.g. 'commits' vs 'ch', 'tasks' vs 'tc'). Append findings to decisions.jsonl. REQ-02 investigation.", "f": [".yolo-planning/phases/01-bootstrap-naming-fixes/decisions.jsonl"], "v": "decisions.jsonl contains summary audit findings", "done": "Summary naming audit appended to decisions.jsonl", "spec": "AUDIT TASK: Read all summary.jsonl files from 3 archived milestones. Document findings in decisions.jsonl.\n\nFILES TO READ (32 summary.jsonl files total):\n- .yolo-planning/milestones/performance-opt/01-performance-optimization/01-04.summary.jsonl, 01-09.summary.jsonl (2 files -- only these exist, not all plans were completed)\n- .yolo-planning/milestones/dynamic-departments-agent-teams/01-dynamic-personas/01-{01..04}.summary.jsonl (4 files)\n- .yolo-planning/milestones/dynamic-departments-agent-teams/02-agent-teams-integration/02-{01..03}.summary.jsonl (3 files)\n- .yolo-planning/milestones/dynamic-departments-agent-teams/03-token-optimization-context-packages/03-{01..04}.summary.jsonl (4 files)\n- .yolo-planning/milestones/teammate-api-integration/01-team-abstraction-layer/01-{01..04}.summary.jsonl (4 files)\n- .yolo-planning/milestones/teammate-api-integration/02-department-teams/02-{01..05}.summary.jsonl (5 files)\n- .yolo-planning/milestones/teammate-api-integration/03-shared-task-coordination/03-{01..05}.summary.jsonl (5 files)\n- .yolo-planning/milestones/teammate-api-integration/04-graceful-degradation/04-{01..05}.summary.jsonl (5 files)\n\nAUDIT CHECKLIST PER FILE:\n1. Extract line 1 (summary is single-line JSONL): head -1 <file> | jq .\n2. Check for CANONICAL keys: {p, n, t, s, dt, tc, tt, ch, fm, dv, built, tst}. List present vs missing.\n3. Check for LEGACY keys: 'commits' (should be 'ch'), 'tasks' (should be 'tc'), 'dev' (should be 'dv'), 'sum' (should be 's' for status or 'sum' is extra narrative). These were used in earlier milestones before artifact-formats.md was written.\n4. Check s (status) values: must be \"complete\"|\"partial\"|\"failed\". Some may use \"done\" or other values.\n5. Check tst (test_status) values: must be \"red_green\"|\"green_only\"|\"no_tests\". Earlier milestones may omit this field entirely.\n\nKNOWN FINDINGS (from reading sample files):\n- performance-opt 01-04.summary.jsonl: Uses {p, n, t, s, sum} format. 'sum' is a narrative string (not canonical). Has 's' as status string. Uses 'p' with compound format (\"01\"). Has nested task entries as separate lines with {id, s, tst, f, note} format. Missing: dt, tc, tt, ch, fm, dv, built.\n- dynamic-departments 01-01.summary.jsonl: Uses compound p (\"01-01\"), has 'tasks' and 'commits' and 'dev' legacy keys.\n- teammate-api 01-01.summary.jsonl: Canonical format {p, n, t, s, dt, tc, tt, ch, fm, dv, built, tst}. This is the correct format.\n\nSPECIAL CASE -- Multi-line summaries: performance-opt summaries have task entries as additional JSONL lines (lines 2+) with {id, s, tst, f, note}. The canonical format is single-line. Document this structural difference.\n\nALSO AUDIT: .yolo-planning/reqs.jsonl (current, at project root level). This file uses {id, t, p, d} keys but artifact-formats.md specifies {id, t, pri, st, ac}. Per C2/D6, document: (a) 'p' should be 'pri' (priority), (b) 'd' should map to 'ac' or a description field (artifact-formats.md has no 'd' key for reqs), (c) missing 'st' (status) field, (d) missing 'ac' (acceptance criteria) field. Reference: artifact-formats.md lines 193-201.\n\nALSO AUDIT other artifact types found in archives. Glob for: decisions.jsonl, critique.jsonl, code-review.jsonl in milestone dirs. For each found file, check first line against canonical schema from artifact-formats.md. This addresses C5 (expand audit scope to all 14+ types).\n\nOUTPUT: Append entries to decisions.jsonl:\n1. Summary audit per milestone (3 entries): {\"ts\":\"...\",\"agent\":\"dev\",\"task\":\"T2\",\"dec\":\"Summary audit: {milestone}\",\"reason\":\"{findings with key differences}\",\"alts\":[]}\n2. reqs.jsonl audit (1 entry): {\"ts\":\"...\",\"agent\":\"dev\",\"task\":\"T2\",\"dec\":\"reqs.jsonl uses non-canonical keys\",\"reason\":\"Current keys {id,t,p,d} vs canonical {id,t,pri,st,ac}. p->pri rename needed, d has no canonical equivalent (closest: ac for acceptance criteria but d contains description text). Missing st and ac fields.\",\"alts\":[]}\n3. Other artifact types audit (1 entry): {\"ts\":\"...\",\"agent\":\"dev\",\"task\":\"T2\",\"dec\":\"Other artifact type audit across milestones\",\"reason\":\"{findings for decisions.jsonl, critique.jsonl, code-review.jsonl key compliance}\",\"alts\":[]}\n\nTotal: 5 new entries. APPEND to existing file. Timestamps start at 2026-02-17T11:01:00Z.", "ts": "No automated tests for audit investigation. Verification: read decisions.jsonl and confirm 5 entries with agent='dev', task='T2'. Entries must cover summary audit (3 milestones), reqs.jsonl audit, and other artifact types. Each entry must reference specific files and key differences."}
{"id": "T3", "tp": "auto", "a": "Create references/naming-conventions.md: document canonical naming patterns for (1) plan.jsonl header keys and value formats, (2) plan.jsonl task keys, (3) summary.jsonl keys, (4) file naming pattern {NN-MM}.plan.jsonl where NN=phase MM=plan, (5) phase directory naming {NN}-{slug}, (6) context file naming .ctx-{role}.toon, (7) cross-department artifact naming (fe-architecture.toon, ux-architecture.toon). Reference artifact-formats.md as normative source. Include anti-patterns section with real examples from audit. REQ-02 documentation.", "f": ["references/naming-conventions.md"], "v": "File covers all 7 naming categories with canonical patterns and anti-patterns", "done": "Canonical naming patterns documented in references/naming-conventions.md", "spec": "FILE: references/naming-conventions.md (CREATE). Single source of truth for all artifact naming patterns.\n\nDOCUMENT STRUCTURE (9 sections per architecture D5):\n\n# Naming Conventions\n\nCanonical naming patterns for all YOLO artifacts. This document is the single source of truth, referenced by validate-naming.sh. Normative key definitions are in artifact-formats.md.\n\n## 1. File Naming Patterns\n\nDocument these patterns with examples:\n- Plan files: {NN-MM}.plan.jsonl where NN = zero-padded phase number, MM = zero-padded plan number. Example: 01-03.plan.jsonl (phase 1, plan 3).\n- Summary files: {NN-MM}.summary.jsonl matching plan file naming. Example: 01-03.summary.jsonl.\n- Phase directories: {NN}-{slug}/ where NN = zero-padded phase number, slug = lowercase-hyphenated-name. Example: 01-bootstrap-naming-fixes/.\n- Test plan files: test-plan.jsonl (per phase directory, no NN-MM prefix).\n- Critique files: critique.jsonl (per phase directory).\n- Architecture files: architecture.toon (per phase directory).\n- Code review files: code-review.jsonl (per phase directory).\n- Decisions files: decisions.jsonl (per phase directory, append-only).\n- QA files: qa-code.jsonl (per phase directory).\n- Security files: security-audit.jsonl (per phase directory).\n- Verification files: verification.jsonl (per phase directory, prefixed with phase number: {NN}.verification.jsonl -- check actual pattern in codebase).\n- Gaps files: gaps.jsonl (per phase directory).\n- Manual QA: manual-qa.jsonl (per phase directory).\n- Research: research.jsonl (per phase directory).\n- Requirements: reqs.jsonl (project-level, at .yolo-planning/reqs.jsonl).\n\n## 2. Plan Header Key Conventions\n\nCanonical keys per artifact-formats.md lines 17-33:\n| Key | Type | Format | Example | Anti-pattern |\n|-----|------|--------|---------|-------------|\n| p | string | Phase number only, zero-padded | \"01\" | \"01-01\" (compound), \"1\" (no padding) |\n| n | string | Plan number only, zero-padded | \"03\" | \"Create auth\" (title string) |\n| t | string | Plan title, human-readable | \"Auth middleware\" | (none) |\n| w | number | Wave number (1-based) | 1 | \"1\" (string), 0 (zero-based) |\n| d | string[] | Plan IDs this depends on | [\"01-01\"] | \"01-01\" (not array) |\n| mh | object | Must-haves with tr, ar, kl | {...} | null, [] (wrong type) |\n| obj | string | Objective statement | \"Implement JWT auth\" | (none) |\n\nOptional keys: xd (cross-phase deps), eff (effort override), sk (skills), fm (files modified), auto (autonomous).\n\n## 3. Plan Task Key Conventions\n\nCanonical keys per artifact-formats.md lines 34-51:\n| Key | Required | Type | Example | Anti-pattern |\n|-----|----------|------|---------|-------------|\n| id | yes | string | \"T1\" | \"01-01-01\" (compound), 1 (number) |\n| tp | yes | string | \"auto\" | (missing entirely in legacy plans) |\n| a | yes | string | \"Create middleware\" | key named 'n' or 'd' instead |\n| f | yes | string[] | [\"src/auth.ts\"] | \"src/auth.ts\" (not array) |\n| v | yes | string | \"Tests pass\" | key named 'ac' instead |\n| done | yes | string | \"Middleware exports\" | (missing in legacy plans) |\n| spec | enriched | string | \"...\" | (empty until Senior enriches) |\n| ts | enriched | string | \"...\" | (empty until Senior enriches) |\n| td | optional | string[] | [\"T1\"] | (task-level dependencies) |\n\nLegacy key mapping (DO NOT USE in new plans):\n- 'n' (legacy) -> 'a' (action) -- renamed for clarity\n- 'd' (legacy) -> no equivalent (was description, now redundant with 'a')\n- 'ac' (legacy) -> 'v' (verify) + 'done' (done criteria) -- split into two fields\n\n## 4. Summary Key Conventions\n\nCanonical keys per artifact-formats.md lines 53-69:\n| Key | Required | Type | Anti-pattern |\n|-----|----------|------|--------------|\n| p | yes | string | Compound \"01-01\" |\n| n | yes | string | Title string |\n| t | yes | string | (none) |\n| s | yes | string enum | \"done\" instead of \"complete\" |\n| dt | yes | date string | Missing entirely |\n| tc | yes | number | Key named 'tasks' |\n| tt | yes | number | Missing entirely |\n| ch | yes | string[] | Key named 'commits' |\n| fm | yes | string[] | Missing entirely |\n| dv | yes | string[] | Key named 'dev' |\n| built | yes | string[] | Missing entirely |\n| tst | yes | string enum | Missing entirely |\n\nValid s values: \"complete\", \"partial\", \"failed\".\nValid tst values: \"red_green\", \"green_only\", \"no_tests\".\n\nLegacy key mapping:\n- 'commits' -> 'ch' (commit hashes)\n- 'tasks' -> 'tc' (tasks completed count, not an object)\n- 'dev' -> 'dv' (deviations)\n- 'sum' -> not canonical (narrative summaries are not part of schema)\n\n## 5. Requirements Key Conventions\n\nCanonical keys per artifact-formats.md lines 193-201:\n| Key | Required | Type | Anti-pattern |\n|-----|----------|------|--------------|\n| id | yes | string | (none) |\n| t | yes | string | (none) |\n| pri | yes | string enum | Key named 'p' (conflicts with plan.p=phase) |\n| st | yes | string enum | Missing entirely |\n| ac | yes | string | Key named 'd' (ambiguous) |\n\nValid pri values: \"must\", \"should\", \"nice\".\nValid st values: \"open\", \"done\".\n\nLegacy key mapping:\n- 'p' (legacy) -> 'pri' (priority) -- 'p' conflicts with plan header phase field\n- 'd' (legacy) -> closest is 'ac' but semantics differ (d=description, ac=acceptance criteria)\n\n## 6. Other Artifact Key Conventions\n\nFor each type, reference artifact-formats.md section. Document required keys and valid enum values:\n\n### Critique (critique.jsonl)\nRequired: {id, cat, sev, q, ctx, sug, st}. Added during architecture: {desc, plan, rec, arch}.\nValid cat: \"gap\", \"risk\", \"improvement\", \"question\", \"alternative\".\nValid sev: \"critical\", \"major\", \"minor\".\nValid st: \"open\", \"addressed\", \"deferred\", \"rejected\".\n\n### Decisions (decisions.jsonl)\nRequired: {ts, agent, dec, reason}. Optional: {alts, task}.\nts must be ISO 8601 format.\n\n### Code Review (code-review.jsonl)\nLine 1 (verdict): {plan, r, cycle, dt}. Optional: {tdd}.\nLines 2+ (findings): {f, ln, sev, issue, sug}.\n\n### QA Code (qa-code.jsonl)\nLine 1: {r, tests, lint, dt}.\nLines 2+: {f, ln, sev, issue, sug}.\n\n### Security Audit (security-audit.jsonl)\nLine 1: {r, findings, critical, dt}.\nLines 2+: {cat, sev, f, issue, fix}.\n\n### Verification (verification.jsonl)\nLine 1: {tier, r, ps, fl, tt, dt}.\nLines 2+: {c, r, ev, cat}.\n\n### Test Plan (test-plan.jsonl)\nPer task: {id, tf, tc, red, desc}.\n\n### Research (research.jsonl)\n{q, src, finding, conf, dt, rel}.\n\n### Gaps (gaps.jsonl)\n{id, sev, desc, exp, act, st, res}.\n\n### Manual QA (manual-qa.jsonl)\nLine 1: {r, tests, dt}.\n\n## 7. Cross-Department Artifact Naming\n\nMulti-department artifacts (when frontend or uiux departments are active):\n- fe-architecture.toon (Frontend Architect output)\n- ux-architecture.toon (UX Architect output)\n- design-tokens.jsonl (UX Dev output)\n- component-specs.jsonl (UX Dev output)\n- user-flows.jsonl (UX Dev output)\n- design-handoff.jsonl (UX Lead output)\n- api-contracts.jsonl (FE/BE negotiation)\n\nCompiled context files:\n- .ctx-{role}.toon for backend agents (e.g., .ctx-lead.toon, .ctx-dev.toon)\n- .ctx-fe-{role}.toon for frontend agents (e.g., .ctx-fe-lead.toon)\n- .ctx-ux-{role}.toon for UX agents (e.g., .ctx-ux-dev.toon)\n- .ctx-owner.toon for Owner agent\n\nDepartment context files:\n- {phase}-CONTEXT-backend.md, {phase}-CONTEXT-frontend.md, {phase}-CONTEXT-uiux.md\n\n## 8. State Artifact Naming\n\nPer C10 and architecture:\n- state.json: Machine-readable state. Located at {phase-dir}/state.json or root .yolo-planning/state.json.\n- .execution-state.json: Runtime execution state. Located at {phase-dir}/.execution-state.json. Dot-prefix indicates runtime artifact. Committed on workflow step transitions.\n- STATE.md: Human-readable state at .yolo-planning/STATE.md (legacy, being phased out in favor of state.json).\n\n## 9. Anti-Patterns (Real Examples)\n\nDocumented from naming audit across 3 prior milestones:\n\n### Plan Headers\n- WRONG: `\"p\":\"01-01\"` (compound phase-plan in p field) -- Found in: performance-opt, dynamic-departments milestones\n- RIGHT: `\"p\":\"01\"` (phase only), `\"n\":\"01\"` (plan only)\n- WRONG: `\"n\":\"Project Type Config & Classification\"` (title in n field) -- Found in: dynamic-departments milestone\n- RIGHT: `\"n\":\"01\"` (plan number only), `\"t\":\"Project Type Config & Classification\"` (title in t field)\n\n### Plan Tasks\n- WRONG: `{\"id\":\"01-01-01\",\"n\":\"Create config\",\"f\":[...],\"d\":[],\"ac\":[...]}` -- Found in: performance-opt, dynamic-departments milestones\n- RIGHT: `{\"id\":\"T1\",\"tp\":\"auto\",\"a\":\"Create config\",\"f\":[...],\"v\":\"...\",\"done\":\"...\"}` -- Used since: teammate-api milestone\n\n### Summaries\n- WRONG: `{\"p\":\"01-01\",\"s\":\"complete\",\"tasks\":3,\"commits\":[...],\"dev\":[...]}` -- Found in: dynamic-departments milestone\n- RIGHT: `{\"p\":\"01\",\"n\":\"01\",\"s\":\"complete\",\"tc\":3,\"ch\":[...],\"dv\":[...],\"tst\":\"red_green\"}` -- Used since: teammate-api milestone\n- WRONG: Multi-line summary with per-task entries as separate JSONL lines -- Found in: performance-opt milestone\n- RIGHT: Single-line summary JSONL\n\n### Requirements\n- WRONG: `{\"id\":\"REQ-01\",\"t\":\"...\",\"p\":\"must\",\"d\":\"...\"}` -- Found in: current .yolo-planning/reqs.jsonl\n- RIGHT: `{\"id\":\"REQ-01\",\"t\":\"...\",\"pri\":\"must\",\"st\":\"open\",\"ac\":\"...\"}` -- Per artifact-formats.md\n\nKEEP THIS DOCUMENT UNDER 300 LINES. Use tables for key mappings (compact). Use code examples sparingly (one RIGHT/WRONG pair per anti-pattern, not full file dumps).\n\nINTEGRATION NOTES: This document is read by validate-naming.sh to derive validation rules. A drift-detection test in tests/unit/validate-naming.bats will verify that every section heading in this document has a corresponding validation check. Keep section headings stable (they are anchors for the drift test).", "ts": "No automated tests for documentation creation. Verification: (1) File exists at references/naming-conventions.md. (2) Contains all 9 sections (## 1 through ## 9). (3) References artifact-formats.md as normative source. (4) Anti-patterns section (## 9) contains at least 4 real examples from audit findings. (5) File is under 300 lines. Future validation: validate-naming.bats drift-detection test (created in plan 01-03) will verify coverage."}

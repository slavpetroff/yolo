---
phase: 6
plan: 2
title: "Clean up stale hook matchers and update CLAUDE.md agent inventory"
wave: 1
depends_on: []
must_haves:
  - hooks/hooks.json matchers no longer reference yolo-qa or yolo-scout
  - All 4 agent-name hook events (SubagentStart, SubagentStop, TeammateIdle, TaskCompleted) updated consistently
  - Matchers still include yolo-lead, yolo-debugger, yolo-dev, yolo-architect, yolo-docs (5 valid agents)
  - All existing tests pass after hook changes
---

# Plan 06-02: Clean Up Stale Hook Matchers

## Context

CLAUDE.md explicitly states: "No QA or Scout agents: Domain research and testing are natively handled by the Orchestrator and Dev agents via MCP tools. Do not attempt to spawn yolo-qa or yolo-scout."

Despite this, hooks/hooks.json still includes `yolo-qa` and `yolo-scout` (plus their prefixed variants `yolo:yolo-qa`, `yolo:yolo-scout`, `qa`, `scout`, `team-qa`, `team-scout`) in 4 hook event matchers: SubagentStart, SubagentStop, TeammateIdle, TaskCompleted. These stale references should be removed for correctness.

## Tasks

### Task 1: Remove yolo-qa and yolo-scout from hooks/hooks.json

**Files:** `hooks/hooks.json`

For each of the 4 hook events that use agent-name matchers (SubagentStart, SubagentStop, TeammateIdle, TaskCompleted):

Current matcher pattern (line 31 as example):
```
yolo-lead|yolo-dev|yolo-qa|yolo-scout|yolo-debugger|yolo-architect|yolo-docs|yolo:yolo-lead|yolo:yolo-dev|yolo:yolo-qa|yolo:yolo-scout|yolo:yolo-debugger|yolo:yolo-architect|yolo:yolo-docs|lead|dev|qa|scout|debugger|architect|docs|team-lead|team-dev|team-qa|team-scout|team-debugger|team-architect|team-docs
```

Updated matcher (remove qa/scout variants):
```
yolo-lead|yolo-dev|yolo-debugger|yolo-architect|yolo-docs|yolo:yolo-lead|yolo:yolo-dev|yolo:yolo-debugger|yolo:yolo-architect|yolo:yolo-docs|lead|dev|debugger|architect|docs|team-lead|team-dev|team-debugger|team-architect|team-docs
```

Removals per matcher:
- `yolo-qa` and `yolo-scout`
- `yolo:yolo-qa` and `yolo:yolo-scout`
- `qa` and `scout`
- `team-qa` and `team-scout`

That is 8 entries removed per matcher, across 4 matchers = 32 total removals.

### Task 2: Update token-budgets.json to remove stale roles

**Files:** `config/token-budgets.json`

Remove the `scout` and `qa` entries from the `budgets` object. These roles no longer exist and their budget entries are dead config.

After removal, budgets should contain: lead, dev, debugger, architect, docs (5 entries matching 5 agents).

### Task 3: Run tests to verify no regressions

Run the test suite to confirm:
1. Hook matcher tests still pass (tests/hooks-isolation-lifecycle.bats)
2. Agent lifecycle tests still pass
3. No test references yolo-qa or yolo-scout as expected-to-exist

If any test asserts the presence of qa/scout in matchers, update the test to match the new reality.

### Task 4: Commit hook cleanup

Stage and commit:
```
chore(06-02): remove stale yolo-qa and yolo-scout references from hooks and config
```

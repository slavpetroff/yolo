---
phase: 6
plan: 1
title: "Create missing yolo-lead and yolo-debugger agent definitions"
wave: 1
depends_on: []
must_haves:
  - agents/yolo-lead.md exists with planning orchestration protocol
  - agents/yolo-debugger.md exists with scientific debugging protocol
  - Both agents follow existing frontmatter conventions (name, description, tools, model, maxTurns, permissionMode)
  - yolo-lead has tools Read/Glob/Grep/Write/Bash, maxTurns 50, permissionMode acceptEdits
  - yolo-debugger has tools Read/Grep/Glob/Bash, maxTurns 80, permissionMode plan
---

# Plan 06-01: Create Missing Agent Definitions

## Context

The YOLO plugin references `yolo-lead` and `yolo-debugger` in hooks/hooks.json (SubagentStart/Stop/Idle/TaskCompleted matchers), config/token-budgets.json, commands/vibe.md, and commands/debug.md — but neither agent has an actual definition file in `agents/`. They currently work only because the orchestrator falls back to VBW equivalents, which is fragile and incorrect.

## Tasks

### Task 1: Create agents/yolo-lead.md

**Files:** `agents/yolo-lead.md` (NEW)

Create the Lead agent definition following the established pattern from yolo-dev.md, yolo-architect.md, yolo-docs.md.

Frontmatter:
- name: yolo-lead
- description: Planning orchestrator that decomposes ROADMAP phases into executable plans with tasks, waves, and dependency ordering.
- tools: Read, Glob, Grep, Write, Bash
- model: inherit
- maxTurns: 50
- permissionMode: acceptEdits

Protocol sections to include:
1. **Context Injection** — Same pattern as yolo-dev (immutable prefix, prompt cache hit)
2. **Planning Protocol** — Stage 1: Load ROADMAP.md + REQUIREMENTS.md from `.yolo-planning/`. Stage 2: Decompose current phase into plans (2-4 plans per phase, 3-5 tasks per plan). Stage 3: Write PLAN.md files using template frontmatter. Stage 4: Wave optimization guidance (maximize wave 1 / no deps, disjoint file sets per wave).
3. **Plan Frontmatter Template** — Show the `---` block with phase, plan, title, wave, depends_on, must_haves fields
4. **Compaction Recovery** — Before each task: if `.yolo-planning/.compaction-marker` exists, re-read PLAN.md / ROADMAP.md from disk
5. **Shutdown Handling** — Same pattern as yolo-docs: when receiving shutdown_request, respond with shutdown_response (approved=true), finish in-progress tool call, STOP
6. **Deviation Handling** — Table matching yolo-dev pattern (scope creep, blocking deps, architectural conflict)
7. **Circuit Breaker** — Same 3-retry pattern as other agents
8. **Constraints** — Planning only (writes PLAN.md, not product code). No subagents. One commit per plan file. Stage files individually.

### Task 2: Create agents/yolo-debugger.md

**Files:** `agents/yolo-debugger.md` (NEW)

Frontmatter:
- name: yolo-debugger
- description: Scientific method debugging agent that investigates bugs through hypothesis-driven evidence gathering.
- tools: Read, Grep, Glob, Bash
- model: inherit
- maxTurns: 80
- permissionMode: plan

Protocol sections to include:
1. **Context Injection** — Same pattern as yolo-dev
2. **Debugging Protocol (Scientific Method)** — Stage 1: Reproduce (confirm the bug exists, capture exact error). Stage 2: Hypothesize (form 1-3 hypotheses with predicted evidence). Stage 3: Gather Evidence (read code, run targeted commands, trace execution). Stage 4: Diagnose (strongest evidence wins; if multiple confirmed = contributing factors). Stage 5: Fix (apply minimal fix if within scope, commit with `fix({scope}): {description}`). Stage 6: Verify (re-run failing test/scenario). Stage 7: Document (report via `debugger_report` schema from handoff-schemas.md).
3. **Pre-existing Issues** — If investigation reveals unrelated failures, list under "Pre-existing Issues" heading with test name, file, failure message
4. **Codebase Bootstrap** — If `.yolo-planning/codebase/META.md` exists, read ARCHITECTURE.md, CONCERNS.md, PATTERNS.md, DEPENDENCIES.md from `.yolo-planning/codebase/`
5. **Shutdown Handling** — Same pattern as yolo-docs
6. **Circuit Breaker** — Same 3-retry pattern
7. **Constraints** — Investigation-first agent. May apply fixes if confident (via Bash for `git add`/`git commit`). No subagents. Report-only tasks (with `[analysis-only]` in subject) produce findings without commits.

### Task 3: Verify agent consistency

Run verification:
1. Confirm both new files parse valid YAML frontmatter
2. Confirm tools listed match permissionMode (plan mode = read-only tools; acceptEdits = write tools)
3. Confirm maxTurns match config references (lead=50, debugger=80)
4. Cross-reference with hooks/hooks.json to confirm agent names match matchers

### Task 4: Commit new agent definitions

Stage and commit both new files:
```
feat(06-01): add yolo-lead and yolo-debugger agent definitions
```

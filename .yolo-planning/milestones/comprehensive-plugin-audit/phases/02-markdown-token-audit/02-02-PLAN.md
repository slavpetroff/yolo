---
phase: 2
plan: 02
title: "execute-protocol SKILL.md Token Cleanup"
wave: 1
depends_on: []
must_haves:
  - REQ-05
  - REQ-06
---

# Plan 02: execute-protocol SKILL.md Token Cleanup

Clean up the largest single file in the plugin (`skills/execute-protocol/SKILL.md`, ~943 lines) by removing dead markers, duplicate documentation blocks, and noting where inline jq patterns will be replaced by Rust commands in a future phase.

## Task 1: Remove 16 dead v3 comment markers

**Description:** Remove all 16 `<!-- v3: ... -->` HTML comment lines from SKILL.md. These are placeholder markers for V3 extensions that are already handled by V3-EXTENSIONS.md when flags are enabled. The comments add ~16 lines of zero-value tokens to every agent that loads this skill. Lines to remove: 21, 45, 47, 48, 303, 313, 451, 497, 498, 500, 502, 504, 533, 535, 873, 875.

**Files:** `skills/execute-protocol/SKILL.md`

**Commit:** `refactor(2-02): remove 16 dead v3 comment markers from execute-protocol`

**Verification:** `grep -c '<!-- v3:' skills/execute-protocol/SKILL.md` returns 0. The V3 extension loading instruction at line 9 (`If ANY v3_* flag is true... also read V3-EXTENSIONS.md`) remains intact.

## Task 2: Remove duplicate Tier 1/2/3 documentation block

**Description:** The compiled context tier structure is documented twice in SKILL.md: first at L349-355 (the operational instruction telling agents what each tier contains) and again at L367-379 (a redundant explanation block with the same ASCII diagram). Remove the second occurrence (L367-379) entirely. The first occurrence at L349-355 is sufficient.

**Files:** `skills/execute-protocol/SKILL.md`

**Commit:** `refactor(2-02): remove duplicate tier documentation block from execute-protocol`

**Verification:** Only one `--- TIER 1: SHARED BASE ---` diagram remains in the file. The operational instruction block is preserved.

## Task 3: Remove deprecated Step 4 QA notice

**Description:** Step 4 (lines 823-827) contains a "Deprecated yolo-qa Agent" notice explaining that QA is now native. This notice was added during the transition and is no longer needed -- the QA gate in Step 3d is the current verification path. Remove the 5-line notice. Keep the Step 4 heading and the "Native Testing" label for the step, but reduce the body to a single sentence: "Dev agents run tests inline via `run_test_suite` MCP command. No separate QA agent is spawned for verification."

**Files:** `skills/execute-protocol/SKILL.md`

**Commit:** `refactor(2-02): compress deprecated Step 4 QA notice in execute-protocol`

**Verification:** Step 4 heading exists. Deprecated notice text ("The conceptual QA agent has been natively integrated") is gone. Replacement sentence present.

## Task 4: Add TODO markers for jq-to-Rust offload candidates

**Description:** Add brief `<!-- RUST-OFFLOAD: {command-name} -->` markers next to the 8 execution-state jq update patterns and the 8 log-event inline calls. These markers document the intent to replace inline jq/bash with `yolo update-exec-state` and `yolo log-event` Rust commands in a future phase. Do NOT change the actual bash/jq code -- markers only. This creates a traceable catalogue for the Rust offload phase.

The 8 execution-state jq patterns are at: L108-112, L200-206, L217-219, L225-227, L235-238, L673-677, L699-712, L773-776, L783-787. The log-event calls are at: L116-117, L210-212, L220, L227, L238, L682-683, L714-717, L777-778, L786-787.

**Files:** `skills/execute-protocol/SKILL.md`

**Commit:** `docs(2-02): add RUST-OFFLOAD markers to execute-protocol jq patterns`

**Verification:** `grep -c 'RUST-OFFLOAD' skills/execute-protocol/SKILL.md` returns count > 0. No behavioral change to any bash code block.

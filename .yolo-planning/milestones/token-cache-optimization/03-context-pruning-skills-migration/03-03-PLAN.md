---
phase: 3
plan: 03
title: Prune CLAUDE.md to under 45 lines
wave: 1
depends_on: []
must_haves:
  - CLAUDE.md under 45 lines
  - All critical rules preserved (no behavioral regression)
  - Verbose sections moved to appropriate locations
  - Plugin isolation rules moved to hooks.json or hook scripts
---

# Plan 03: Prune CLAUDE.md to Under 45 Lines

## Background

CLAUDE.md is currently 67 lines. The target is under 45 lines. Analysis of current sections:

| Section | Lines | Action |
|---------|-------|--------|
| Header + core value (L1-6) | 6 | Keep (trim slightly) |
| YOLO Rules (L8-19) | 12 | Keep core rules, deduplicate with VBW Rules |
| Active Context (L21-25) | 5 | Keep |
| VBW Rules (L27-35) | 9 | Merge with YOLO Rules (they share 5 identical rules) |
| Installed Skills (L37-39) | 3 | Keep |
| Project Conventions (L41-50) | 10 | Move to config/conventions.md, reference inline |
| Commands (L52-55) | 4 | Keep (2 lines) |
| Plugin Isolation (L56-66) | 11 | Move to hooks -- this is hook-enforced anyway |

Key insight: YOLO Rules and VBW Rules share 5 identical bullet points (commit format, one commit per task, no secrets, no fabrication, no bump/push). Merging them into "Plugin Rules" saves ~7 lines. The PR review rules (lines 17-18) are YOLO-specific and verbose -- they can be moved to an agent-level instruction since they only apply during PR review workflows.

Plugin Isolation (11 lines) is already enforced by hooks. Moving the text to a reference or the hooks.json description saves 11 lines while the enforcement stays identical.

## Tasks

### Task 1: Merge YOLO Rules and VBW Rules into unified Plugin Rules

**Description:** Replace the separate "YOLO Rules" and "VBW Rules" sections with a single "Plugin Rules" section containing the shared rules once. Add a 1-line note for YOLO-specific rules (use YOLO commands, no QA/Scout agents) and VBW-specific rules (use VBW commands). Move the verbose PR review rules (lines 17-18, ~6 lines) to `references/pr-review-protocol.md` since they only apply during review workflows.

**Files:**
- `CLAUDE.md` (modify)
- `references/pr-review-protocol.md` (new, ~10 lines with the PR review rules)

**Acceptance criteria:**
- Single "Plugin Rules" section replaces both YOLO Rules and VBW Rules
- All shared rules appear exactly once
- Plugin-specific rules noted inline (1 line each)
- PR review rules preserved in references/ (not lost)
- Net reduction: ~12 lines saved

### Task 2: Move Project Conventions to config reference

**Description:** The "Project Conventions" section (7 bullet points, 10 lines) duplicates content from `.yolo-planning/codebase/CONVENTIONS.md` and `config/defaults.json`. Replace with a 2-line reference: "Conventions enforced from `config/` and `.yolo-planning/codebase/CONVENTIONS.md`. See /yolo:config." The conventions themselves are already the source of truth in those files.

**Files:**
- `CLAUDE.md` (modify)

**Acceptance criteria:**
- Project Conventions section reduced to 2 lines
- No conventions lost (they exist in config/ and codebase mapping)
- Net reduction: ~8 lines saved

### Task 3: Move Plugin Isolation to hook-enforced reference

**Description:** The "Plugin Isolation" and "Context Isolation" sections (11 lines) describe rules that are already enforced by PreToolUse hooks. Move the full text to `references/plugin-isolation.md` and replace in CLAUDE.md with a 1-line note: "Plugin isolation enforced by hooks. See `references/plugin-isolation.md`."

**Files:**
- `CLAUDE.md` (modify)
- `references/plugin-isolation.md` (new, ~15 lines with the isolation rules)

**Acceptance criteria:**
- Plugin Isolation section reduced to 1 line in CLAUDE.md
- Full isolation rules preserved in references/
- Hooks continue to enforce the rules (no hook changes needed)
- Net reduction: ~10 lines saved

### Task 4: Final CLAUDE.md cleanup and line count verification

**Description:** Clean up remaining sections: trim header to 3 lines (remove blank line), ensure Commands section is 2 lines, trim Active Context to 3 lines. Verify total line count is under 45. Remove any trailing blank lines.

**Files:**
- `CLAUDE.md` (modify)

**Acceptance criteria:**
- CLAUDE.md total line count is under 45
- All critical behavioral rules preserved
- File is well-formatted and readable
- No section removed entirely (all content moved or deduplicated)

{"p":"01","n":"05","t":"Wire Analyze routing into go.md","w":2,"d":["01-01","01-02","01-03"],"mh":["go.md uses Analyze before routing to modes","Trivial/medium/high paths dispatch correctly","All existing go.md modes still work","Backward compatible when complexity_routing disabled"],"obj":"Integrate the Analyze agent and complexity-based routing into go.md, replacing the current hardcoded intent detection with the unified Analyze step while preserving all existing modes and backward compatibility."}
{"id":"T1","tp":"feat","a":"Modify commands/go.md Input Parsing section. Add new Path 0 (before existing Path 1/2/3) called 'Complexity-Aware Routing'. Logic: (1) Check config_complexity_routing from phase-detect output — if false, skip Path 0 and fall through to existing Path 1/2/3 unchanged (backward compat); (2) If true AND $ARGUMENTS present AND no mode flags detected (not --plan, --execute, etc.): spawn yolo-analyze agent via Task tool with model from resolve-agent-model.sh for 'analyze' role; (3) Pass to Analyze: user $ARGUMENTS text, phase-detect output summary, config.json path, codebase map status; (4) Receive analysis JSON from Analyze agent; (5) Route based on suggested_path: trivial -> call route-trivial.sh then dispatch to Senior directly, medium -> call route-medium.sh then dispatch to Lead (abbreviated), high -> call route-high.sh then proceed with full ceremony (existing Plan+Execute flow), redirect -> map intent to existing /yolo:debug, /yolo:fix, /yolo:research redirects; (6) If confidence < medium_confidence_threshold: fall through to existing Path 2 (natural language intent) as fallback. Add clear comments marking the new section.","f":["commands/go.md"],"v":"grep -c 'Complexity-Aware Routing' commands/go.md returns 1; grep -c 'complexity_routing' commands/go.md returns >= 2","done":false}
{"id":"T2","tp":"feat","a":"Add Trivial Execution Mode to commands/go.md Modes section. New mode 'Mode: Trivial Shortcut' after existing modes. Steps: (1) Display 'Trivial task detected — fast path active'; (2) Read route-trivial.sh output for plan path and skipped steps; (3) Resolve Senior model via resolve-agent-model.sh; (4) Spawn Senior directly (skip Critic, Scout, Architect, Lead) with: user intent as context, inline plan.jsonl from route-trivial.sh, codebase map if available; (5) Senior enriches spec inline (single task, no formal plan decomposition); (6) Resolve Dev model, spawn Dev with enriched spec; (7) Run post-task QA gate; (8) Skip QA agents and security; (9) Commit and display completion with trivial-path metrics. Owner-first principle still applies — go.md is the user proxy.","f":["commands/go.md"],"v":"grep -c 'Trivial Shortcut' commands/go.md returns >= 1; grep -c 'trivial' commands/go.md returns >= 3","done":false}
{"id":"T3","tp":"feat","a":"Add Medium Execution Mode to commands/go.md Modes section. New mode 'Mode: Medium Path' after Trivial mode. Steps: (1) Display 'Medium complexity — streamlined path active'; (2) Read route-medium.sh output for included/skipped steps; (3) Skip Critic and Scout; (4) If architecture.toon exists in phase dir, use it; otherwise skip architecture step; (5) Resolve Lead model, spawn Lead for abbreviated planning (single plan, max medium_max_tasks tasks from config); (6) Continue with existing Design Review (Senior), Implementation (Dev), Code Review (Senior) steps; (7) Use post-plan QA gate only (skip QA Lead and QA Code agents); (8) Skip security audit; (9) Sign-off via Lead. This mode reuses existing execute-protocol.md steps 5-8 but skips steps 1-3 and 9-10. Owner-first principle applies.","f":["commands/go.md"],"v":"grep -c 'Medium Path' commands/go.md returns >= 1; grep -c 'streamlined' commands/go.md returns >= 1","done":false}
{"id":"T4","tp":"feat","a":"Update commands/go.md Context section to include complexity routing state. Add new pre-computed output block after existing team mode block: 'Complexity routing (via complexity-classify.sh):' with bash invocation template. Add key variables: config_complexity_routing, config_trivial_threshold, config_medium_threshold, config_fallback_path. Update the 'Key variables from above' list to include these new variables with descriptions.","f":["commands/go.md"],"v":"grep -c 'config_complexity_routing' commands/go.md returns >= 2","done":false}
{"id":"T5","tp":"docs","a":"Update references/execute-protocol.md to document complexity-aware step skipping. Add new section 'Complexity-Aware Step Skipping' after the existing 'Mandatory vs Skippable Steps' section. Document: (1) When trivial path active: only steps 5 (Senior), 7 (Dev), and post-task gate run; (2) When medium path active: steps 4-8 run, steps 1-3 and 9-10 are skipped; (3) When high path active: all steps run per existing logic; (4) Step 11 (sign-off) always runs regardless of path; (5) Complexity path does NOT override explicit --skip-qa or --skip-security flags (those are orthogonal). Keep existing protocol text unchanged — this is an additive section.","f":["references/execute-protocol.md"],"v":"grep -c 'Complexity-Aware Step Skipping' references/execute-protocol.md returns 1","done":false}

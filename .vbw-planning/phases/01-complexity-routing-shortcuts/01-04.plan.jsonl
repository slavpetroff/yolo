{"p":"01","n":"04","t":"Write tests for complexity routing","w":1,"d":[],"mh":["Unit tests for complexity-classify.sh","Unit tests for route-trivial/medium/high.sh","Behavioral tests for end-to-end routing","Static tests for new agent naming"],"obj":"Create comprehensive BATS test coverage for the new complexity routing system, covering classification accuracy, path routing, config validation, and integration with existing go.md modes."}
{"id":"T1","tp":"test","a":"Create tests/unit/test-complexity-classify.sh (BATS). Test cases: (1) trivial classification for 'fix typo in README', 'update version number', 'rename variable', 'add comment to function'; (2) medium classification for 'add a new API endpoint for users', 'refactor the auth module', 'implement pagination'; (3) high classification for 'redesign the database schema', 'add multi-tenant support', 'build a new dashboard with backend API'; (4) intent detection: debug keywords return intent=debug, fix keywords return intent=fix, research keywords return intent=research; (5) confidence thresholds: exact keyword matches have confidence >= 0.85, heuristic matches have confidence >= 0.7; (6) department detection: single backend returns [backend], multi-dept config returns correct array; (7) edge cases: empty input, very long input, special characters. Use fixtures for config files.","f":["tests/unit/test-complexity-classify.sh"],"v":"File exists and contains at least 10 @test blocks","done":false}
{"id":"T2","tp":"test","a":"Create tests/unit/test-route-scripts.sh (BATS). Test cases for all three routing scripts: (1) route-trivial.sh: outputs path=trivial, steps_skipped includes critique/research/architecture/qa/security, creates minimal plan.jsonl; (2) route-medium.sh: outputs path=medium, steps_skipped includes critique/research, steps_included includes lead/senior/dev/code_review; (3) route-high.sh: outputs path=high, steps_skipped is empty array, steps_included has all 11 steps; (4) All scripts exit 0 on valid input; (5) All scripts exit non-zero on missing required args; (6) JSON output is valid (piped through jq). Use temp dirs for phase-dir fixtures.","f":["tests/unit/test-route-scripts.sh"],"v":"File exists and contains at least 8 @test blocks","done":false}
{"id":"T3","tp":"test","a":"Create tests/unit/test-complexity-config.sh (BATS). Test cases: (1) defaults.json has complexity_routing key; (2) All sub-keys present with correct types; (3) trivial threshold > medium threshold; (4) validate-config.sh accepts valid complexity_routing; (5) validate-config.sh rejects invalid threshold (> 1.0); (6) validate-config.sh rejects trivial < medium threshold; (7) validate-config.sh handles missing complexity_routing gracefully (backward compat); (8) phase-detect.sh outputs complexity routing config values.","f":["tests/unit/test-complexity-config.sh"],"v":"File exists and contains at least 6 @test blocks","done":false}
{"id":"T4","tp":"test","a":"Create tests/static/test-analyze-agent.sh (BATS). Static validation for the new analyze agent: (1) agents/yolo-analyze.md exists; (2) Has valid YAML frontmatter (name, description, tools, model fields); (3) model is opus; (4) Name follows yolo-{role}.md convention; (5) Role 'analyze' exists in model-profiles.json for all profiles; (6) Role 'analyze' exists in company-hierarchy.md Agent Roster. Tests use grep/jq on the files directly (static checks, no execution).","f":["tests/static/test-analyze-agent.sh"],"v":"File exists and contains at least 5 @test blocks","done":false}

{"p":"01","n":"02","t":"Create complexity classification and routing scripts","w":1,"d":[],"mh":["complexity-classify.sh outputs structured JSON","Route scripts for trivial/medium/high paths","Trivial path <30% token cost of full","Medium path <60% token cost of full"],"obj":"Build the shell scripts that implement complexity classification logic and path-specific routing, enabling go.md to dispatch tasks through the appropriate shortcut or full ceremony."}
{"id":"T1","tp":"feat","a":"Create scripts/complexity-classify.sh. Input: --intent (user text), --phase-state (phase-detect output as key=value pairs), --config (config.json path), --codebase-map (true/false). Output: JSON to stdout with fields: complexity, departments, intent, confidence, reasoning, suggested_path. Classification heuristics: TRIVIAL = single-file fix, typo, config change, rename, doc-only change, no cross-file impact (keywords: typo, rename, config, doc, comment, version bump, small fix); MEDIUM = multi-file but bounded scope, single-department, no architecture change needed, clear implementation path (keywords: add feature, implement, refactor, update, extend); HIGH = cross-department, architecture implications, new subsystem, significant scope, ambiguous requirements. Department detection: parse config.json departments object for active depts. Intent detection: map keyword patterns from current go.md Path 2 logic. Confidence: 0.9+ for keyword matches, 0.7-0.9 for heuristic inference, <0.7 for ambiguous. Script uses set -euo pipefail, jq for JSON output. Outputs clean JSON only to stdout, errors to stderr.","f":["scripts/complexity-classify.sh"],"v":"echo 'fix typo in README' | bash scripts/complexity-classify.sh --intent 'fix typo in README' --config config/defaults.json --codebase-map false | jq .complexity returns trivial","done":false}
{"id":"T2","tp":"feat","a":"Create scripts/route-trivial.sh. Implements the trivial shortcut path. Input: --phase-dir, --intent, --config, --analysis-json (path to analysis output). Logic: (1) Skip Critic, Scout, Architect entirely; (2) Skip Lead planning — create a minimal inline plan.jsonl with single task from intent; (3) Route directly to department Senior for spec enrichment → Dev for implementation; (4) Skip formal QA (use post-task gate only); (5) Skip security audit. Output: JSON with fields: path=trivial, steps_skipped (array of skipped step names), estimated_steps (count), plan_path (if inline plan created). The script creates a lightweight plan.jsonl in the phase dir with abbreviated header.","f":["scripts/route-trivial.sh"],"v":"File exists, is executable, has set -euo pipefail, outputs valid JSON with path=trivial","done":false}
{"id":"T3","tp":"feat","a":"Create scripts/route-medium.sh. Implements the medium complexity path. Input: --phase-dir, --intent, --config, --analysis-json. Logic: (1) Skip Critic and Scout (no R&D pipeline); (2) Skip Architect — use existing architecture.toon if present, otherwise skip; (3) Route to Lead for plan decomposition (abbreviated — single plan, max 3 tasks); (4) Senior enriches specs; (5) Dev implements; (6) Senior code review; (7) Post-plan QA gate (automated only, no QA Lead/QA Code agents); (8) Skip security. Output: JSON with fields: path=medium, steps_skipped (array), steps_included (array), estimated_steps (count). Does NOT create plans — that is Lead's job.","f":["scripts/route-medium.sh"],"v":"File exists, is executable, has set -euo pipefail, outputs valid JSON with path=medium","done":false}
{"id":"T4","tp":"feat","a":"Create scripts/route-high.sh. Implements the high complexity (full ceremony) path. This is essentially a pass-through that confirms full 11-step workflow applies. Input: --phase-dir, --intent, --config, --analysis-json. Logic: (1) All 11 steps active (per execute-protocol.md); (2) Multi-department dispatch if analysis detected multiple departments; (3) Returns the step list with none skipped (except per existing effort/config skip rules). Output: JSON with fields: path=high, steps_skipped=[], steps_included (all 11), multi_dept (boolean from analysis), estimated_steps=11. Simple pass-through confirming full ceremony.","f":["scripts/route-high.sh"],"v":"File exists, is executable, has set -euo pipefail, outputs valid JSON with path=high and steps_skipped=[]","done":false}

{"p":"08","n":"04","t":"Create regenerate-agents.sh and GENERATED marker","w":1,"d":[],"mh":{"tr":["regenerate-agents.sh generates all 27 dept agents in one invocation","--check mode exits non-zero when any generated file differs from current agent file","GENERATED marker comment is present in all generated agent files"],"ar":["scripts/regenerate-agents.sh with --check and --force flags","generate-agent.sh updated to prepend GENERATED marker to output"],"kl":["regenerate-agents.sh calls generate-agent.sh for each of the 27 role+dept combos","GENERATED marker format: <!-- GENERATED by generate-agent.sh -- DO NOT EDIT MANUALLY -->"]},"obj":"Create scripts/regenerate-agents.sh wrapper that invokes generate-agent.sh for all 27 role+dept combinations, with --check mode for CI validation and --force for overwriting. Update generate-agent.sh to prepend a GENERATED marker comment to all output."}
{"id":"T1","tp":"feat","a":"Update generate-agent.sh to prepend '<!-- GENERATED by generate-agent.sh -- DO NOT EDIT MANUALLY -->' as the first line of generated output (after YAML frontmatter). The marker should be added AFTER placeholder substitution and mode filtering, before writing output. Ensure --dry-run also shows the marker.","f":["scripts/generate-agent.sh"],"v":"generate-agent.sh --dry-run --role dev --dept backend output contains GENERATED marker","done":false}
{"id":"T2","tp":"feat","a":"Create scripts/regenerate-agents.sh. It should: (1) iterate all 9 roles x 3 depts = 27 combinations, (2) call generate-agent.sh for each, (3) report success/failure per combo, (4) exit 0 only if all 27 succeed. Use set -euo pipefail. Include --help flag.","f":["scripts/regenerate-agents.sh"],"v":"bash scripts/regenerate-agents.sh --help shows usage; script is executable","done":false}
{"id":"T3","tp":"feat","a":"Add --check flag to regenerate-agents.sh. In check mode: for each of 27 combos, run generate-agent.sh --dry-run and compare output against the current agents/yolo-*.md file via diff. If ANY file differs, print the diff and exit 1. If all match, exit 0. This enables CI staleness detection.","f":["scripts/regenerate-agents.sh"],"v":"regenerate-agents.sh --check exits 0 when agents match generated output; exits 1 when a file is manually edited","done":false}
{"id":"T4","tp":"feat","a":"Add --force flag to regenerate-agents.sh that overwrites existing agent files without prompting. Default behavior (no flag) should also overwrite since agents are generated. Add --dry-run flag that passes through to generate-agent.sh (prints to stdout, writes nothing). Add summary output: 'Regenerated N/27 agents (M unchanged, K updated)'.","f":["scripts/regenerate-agents.sh"],"v":"regenerate-agents.sh --dry-run produces 27 outputs to stdout without writing files","done":false}
{"id":"T5","tp":"feat","a":"Add .agent-generation-hash file support to regenerate-agents.sh. After successful regeneration, compute a hash of all templates + overlays (sha256 of concatenated content) and write to agents/.agent-generation-hash. The --check flag should also compare this hash to detect template/overlay changes since last generation.","f":["scripts/regenerate-agents.sh"],"v":"regenerate-agents.sh creates agents/.agent-generation-hash; --check compares it","done":false}

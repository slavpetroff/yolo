{"p":"05","n":"02","t":"PO Q&A rejection paths, Patch and Major, plus handoff schemas","w":1,"d":[],"mh":{"tr":["PO Mode 4 (Post-Integration Q&A) added with Patch and Major rejection paths","Patch rejection routes to specific dept Senior for targeted fix","Major rejection loops back to Questionary for re-scoping","All new handoff schemas defined in handoff-schemas.md"],"ar":[],"kl":[]},"obj":"Extend yolo-po.md with Mode 4 (Post-Integration Q&A) that validates integration results against vision/requirements. Add Patch path and Major path. Define all new handoff schemas (po_qa_verdict, patch_request, major_rejection, feedback_response) in handoff-schemas.md."}
{"id":"T1","tp":"modify","a":"Add Mode 4: Post-Integration Q&A to agents/yolo-po.md. Insert after Mode 3 (Vision Sign-off). Mode 4 input: integration-gate-result.jsonl + all department_result schemas + scope-document.json (from Mode 0/3). Protocol: (1) Validate each department result against original scope requirements — cross-reference department_result plans_completed with scope feature list; (2) Check integration gate checks field — any 'fail' triggers deeper review; (3) Assess completeness — are all PO-APPROVED requirements addressed?; (4) Decision matrix: ALL_PASS -> produce user_presentation for delivery; MINOR_GAPS -> Patch rejection (targeted fix); VISION_MISALIGN -> Major rejection (re-scope). Output: po_qa_verdict JSON with {verdict:'approve'|'patch'|'major', findings:[], target_dept:string (for patch), re_scope_items:[] (for major)}.","f":["agents/yolo-po.md"],"v":"grep -c 'Mode 4' agents/yolo-po.md >= 1 && grep -c 'po_qa_verdict' agents/yolo-po.md >= 1","done":"Mode 4 added with verdict types, decision matrix, output schema"}
{"id":"T2","tp":"modify","a":"Add Patch rejection path documentation to agents/yolo-po.md Mode 4. Under Mode 4, add subsection '#### Patch Path (targeted fix)'. When verdict=patch: (1) PO identifies specific failing check(s) from integration-gate-result.jsonl; (2) PO produces patch_request JSON with {type:'patch_request', target_dept:string, failing_checks:[], fix_instructions:string, scope_ref:string (requirement ID from scope-document)}; (3) Orchestrator routes patch_request to target dept's Senior (NOT full pipeline re-run); (4) Senior re-specs fix, Dev implements, post-task QA gate runs; (5) On fix complete, re-run integration gate for the specific check only (--check flag); (6) Token budget: patch path uses <20% tokens of full re-plan (Senior + Dev only, no Critic/Architect/Lead cycle). Add patch_request to Communication section.","f":["agents/yolo-po.md"],"v":"grep -c 'patch_request' agents/yolo-po.md >= 2 && grep -c 'Patch Path' agents/yolo-po.md >= 1","done":"Patch path documented with routing, token budget constraint, re-verification"}
{"id":"T3","tp":"modify","a":"Add Major rejection path documentation to agents/yolo-po.md Mode 4. Under Mode 4, add subsection '#### Major Path (re-scope)'. When verdict=major: (1) PO identifies vision misalignment or scope gap that cannot be fixed by targeted patch; (2) PO produces major_rejection JSON with {type:'major_rejection', re_scope_items:[], affected_depts:[], rationale:string}; (3) Orchestrator triggers PO-Questionary loop (Mode 0) with re_scope_items as seed questions; (4) User sees structured presentation of what changed and why re-scoping is needed; (5) After re-scope, only affected_depts re-run (not all departments); (6) Full pipeline for affected depts: Critique -> Research -> Arch -> Plan -> ... -> Integration Gate. Add major_rejection to Communication section.","f":["agents/yolo-po.md"],"v":"grep -c 'major_rejection' agents/yolo-po.md >= 2 && grep -c 'Major Path' agents/yolo-po.md >= 1","done":"Major path documented with re-scope trigger, affected-dept-only re-run, user presentation"}
{"id":"T4","tp":"modify","a":"Add po_qa_verdict, patch_request, major_rejection, and feedback_response schemas to references/handoff-schemas.md. Add 4 new sections after the existing owner_signoff section: (1) po_qa_verdict (PO -> Orchestrator): {type:'po_qa_verdict', verdict:'approve'|'patch'|'major', findings:[{check,dept,issue,severity}], target_dept:string, re_scope_items:[], scope_confidence:float}; (2) patch_request (PO -> Orchestrator -> Dept Senior): {type:'patch_request', target_dept:string, failing_checks:[], fix_instructions:string, scope_ref:string, max_tasks:number (default 2)}; (3) major_rejection (PO -> Orchestrator -> Questionary): {type:'major_rejection', re_scope_items:[], affected_depts:[], rationale:string, original_scope_ref:string}; (4) feedback_response (User -> Orchestrator -> PO): {type:'feedback_response', action:'approve'|'request_changes'|'reject', feedback:string, specific_items:[{dept:string, issue:string, suggested_fix:string}], round:number}.","f":["references/handoff-schemas.md"],"v":"grep -c 'po_qa_verdict' references/handoff-schemas.md >= 1 && grep -c 'feedback_response' references/handoff-schemas.md >= 1","done":"All 4 schemas added with field tables and examples"}

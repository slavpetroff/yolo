{"p":"06","n":"04","t":"Token audit script and tests","w":1,"d":[],"mh":{"tr":["token-audit.sh measures per-path token costs","trivial <30%, medium <60% of high path verified"],"ar":["audit results output as JSON"],"kl":["bash + jq only","compile-context.sh --measure flag"]},"obj":"Create token-audit.sh that uses compile-context.sh --measure to audit token costs per complexity path (trivial/medium/high). Verify trivial <30% and medium <60% of high path cost. Output results as JSON for verification."}
{"id":"T1","tp":"create","a":"Create scripts/token-audit.sh that runs compile-context.sh --measure for each role at each complexity path and collects results","f":["scripts/token-audit.sh"],"v":"bash scripts/token-audit.sh --help shows usage; script is executable","done":"token-audit.sh exists, is executable, accepts --phase and --output flags"}
{"id":"T2","tp":"modify","a":"Add trivial/medium path token estimation to token-audit.sh using route-trivial.sh and route-medium.sh agent lists","f":["scripts/token-audit.sh"],"v":"bash scripts/token-audit.sh --phase 01 --dry-run produces JSON with trivial_tokens, medium_tokens, high_tokens","done":"token-audit.sh calculates per-path totals from agent role budgets"}
{"id":"T3","tp":"modify","a":"Add ratio verification to token-audit.sh that checks trivial <30% and medium <60% thresholds and reports PASS/FAIL","f":["scripts/token-audit.sh"],"v":"JSON output includes trivial_ratio, medium_ratio, trivial_pass, medium_pass fields","done":"token-audit.sh reports pass/fail for token ratio thresholds"}
{"id":"T4","tp":"create","a":"Add BATS tests for token-audit.sh verifying ratio calculation and threshold checks","f":["tests/unit/test-token-audit.bats"],"v":"bats tests/unit/test-token-audit.bats passes all tests","done":"Tests verify token ratio calculation and PASS/FAIL threshold reporting"}

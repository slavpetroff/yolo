{"p":11,"n":2,"t":"Remove [sqlite]/[file] blocks from agent templates and regenerate","w":1,"d":[],"mh":["Zero [sqlite] or [file] markers in agents/templates/*.md","Zero [sqlite] or [file] markers in agents/yolo-*.md (generated)","All DB instructions are unconditional (no 'when DB is available' phrasing)","Agent templates reference DB scripts directly without fallback instructions","regenerate-agents.sh --check passes after regeneration"],"obj":"Remove all [sqlite]/[file] conditional instruction blocks from the 7 affected agent templates (dev, senior, lead, architect, tester, qa, qa-code via qa.md). Replace dual-path instructions with DB-only instructions. Run generate-agent.sh to regenerate all 24 department agents."}
{"id":"11-02-T1","tp":"refactor","a":"Remove [sqlite]/[file] blocks from dev.md template","f":["agents/templates/dev.md"],"v":"grep -c '\\[sqlite\\]\\|\\[file\\]' agents/templates/dev.md returns 0","done":false,"spec":"dev.md has 5 occurrences: (1) Lines 35-39: Remove [sqlite] guard on get-task.sh usage and [file] fallback. Keep the DB instruction as the only path: 'Use bash ${CLAUDE_PLUGIN_ROOT}/scripts/db/get-task.sh <PLAN_ID> <TASK_ID> --fields task_id,action,spec,files to retrieve task specs. Read plan.jsonl from disk as backup reference.' Remove 'When DB is available' phrasing. (2) Line 66: Remove [sqlite] prefix from complete-task.sh instruction. Make it unconditional: 'On task completion, call complete-task.sh...'. (3) Lines 245-246: Remove [sqlite]/[file] pair for next-task.sh. Keep DB path only: 'Dev calls next-task.sh --dept {{DEPT_KEY}} --status pending to get the next available task.' Remove TaskList fallback line entirely."}
{"id":"11-02-T2","tp":"refactor","a":"Remove [sqlite]/[file] blocks from senior.md, lead.md, architect.md templates","f":["agents/templates/senior.md","agents/templates/lead.md","agents/templates/architect.md"],"v":"grep -c '\\[sqlite\\]\\|\\[file\\]' agents/templates/senior.md agents/templates/lead.md agents/templates/architect.md returns 0 for each","done":false,"spec":"senior.md (2 occurrences): Lines 58-59: Remove [sqlite]/[file] pair for next-review.sh and search-decisions.sh. Keep DB instructions unconditional: 'Use next-review.sh --plan <PLAN_ID> to find tasks ready for review. For cross-phase decision consistency: search-decisions.sh \"<keyword>\".' Remove 'Fallback: Read plan.jsonl directly.' lead.md (2 occurrences): Line 104: Remove [sqlite] prefix from insert-task.sh. Make unconditional: 'After writing plan.jsonl, populate DB for each task: insert-task.sh...'. Line 117: Remove [sqlite] prefix from check-phase-status.sh. Make unconditional: 'Use check-phase-status.sh <PHASE> to check phase completion status.' Remove 'Fallback: Glob + Read summary files when DB unavailable.' architect.md (2 occurrences): Lines 40-41: Remove [sqlite]/[file] pair. Keep DB-first: 'Use get-phase.sh <PHASE> --goals for phase metadata. Use search-research.sh \"<keyword>\" for relevant prior findings.' Merge [file] line content (requirements, codebase mapping) as additional context to read (not as fallback)."}
{"id":"11-02-T3","tp":"refactor","a":"Remove [sqlite]/[file] blocks from tester.md and qa.md templates","f":["agents/templates/tester.md","agents/templates/qa.md"],"v":"grep -c '\\[sqlite\\]\\|\\[file\\]' agents/templates/tester.md agents/templates/qa.md returns 0 for each","done":false,"spec":"tester.md (2 occurrences): Lines 35-36: Remove [sqlite]/[file] pair. Keep DB instruction: 'Use get-task.sh <PLAN_ID> <TASK_ID> --fields task_id,action,test_spec,files to retrieve task specs with test_spec field. Also read enriched plan.jsonl for full context.' Remove 'Fallback:' phrasing. qa.md (5 occurrences): Lines 62-63: Remove [sqlite]/[file] for get-task.sh must_haves retrieval and search-gaps.sh. Keep unconditional: 'Use get-task.sh for must_have retrieval. Use search-gaps.sh to check for known issues.' Lines 64-65: Remove [sqlite]/[file] for get-summaries.sh. Keep: 'Use get-summaries.sh <PHASE> --status complete to retrieve completed plan summaries.' Line 96: Remove [sqlite] prefix for get-summaries.sh --fields fm. Make unconditional."}
{"id":"11-02-T4","tp":"feat","a":"Regenerate all department agents from updated templates","f":["agents/yolo-dev.md","agents/yolo-senior.md","agents/yolo-lead.md","agents/yolo-architect.md","agents/yolo-tester.md","agents/yolo-qa.md","agents/yolo-fe-dev.md","agents/yolo-fe-senior.md","agents/yolo-fe-lead.md","agents/yolo-fe-architect.md","agents/yolo-fe-tester.md","agents/yolo-fe-qa.md","agents/yolo-ux-dev.md","agents/yolo-ux-senior.md","agents/yolo-ux-lead.md","agents/yolo-ux-architect.md","agents/yolo-ux-tester.md","agents/yolo-ux-qa.md"],"v":"grep -r '\\[sqlite\\]\\|\\[file\\]' agents/yolo-*.md | wc -l returns 0; bash scripts/regenerate-agents.sh --check passes","done":false,"spec":"Run bash scripts/regenerate-agents.sh to regenerate all 18 department agents (6 roles x 3 depts) from the updated templates. Verify zero [sqlite]/[file] markers in output. If regenerate-agents.sh does not exist, run generate-agent.sh individually for each role+dept combo: for role in dev senior lead architect tester qa; do for dept in backend frontend uiux; do bash scripts/generate-agent.sh --role $role --dept $dept; done; done. After regeneration, verify with: grep -r '\\[sqlite\\]\\|\\[file\\]' agents/yolo-*.md -- should return nothing. Also check agents/yolo-critic.md and agents/yolo-scout.md for any [sqlite]/[file] references (these are hand-authored, not generated) and remove if found."}

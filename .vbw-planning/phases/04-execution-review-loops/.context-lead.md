## Phase 04 Context (Compiled)

### Goal
Implement Dev <-> Senior review loop (max 2 rounds). Add Dev suggestions field (sg) to summary.jsonl. Update per-department Tester agents for structured test results. Formalize Scout as shared on-demand research utility callable by any agent. Add escalation.jsonl with scope_boundary tracking.

### Success Criteria
- Dev/Senior review resolves issues within 2 rounds for test scenarios
- Scout spawns on-demand when research_request detected, not spawned otherwise
- Escalation logs show agents only escalating out-of-scope problems
- summary.jsonl sg field populated and reviewed by Senior

### Requirements
- REQ-03: Company hierarchy: Architect -> Lead -> Senior -> Dev
- REQ-04: JSONL abbreviated keys for token efficiency
- REQ-08: Zero-dependency design (bash + jq + git only)

### Active Decisions
- review-loop.sh enforces max 2 cycles (configurable via review_loop.max_cycles)
- Scout on-demand via research_request/research_response handoff schemas
- escalation.jsonl append-only with scope_boundary (sb) field required
- test-results.jsonl for structured GREEN phase results
- sg field for Devâ†’Senior suggestion pipeline

### Codebase Map Available
Codebase mapping exists in `.vbw-planning/codebase/`. Key files:
- `ARCHITECTURE.md`
- `CONCERNS.md`
- `PATTERNS.md`
- `DEPENDENCIES.md`
- `STRUCTURE.md`
- `CONVENTIONS.md`
- `TESTING.md`
- `STACK.md`

Read ARCHITECTURE.md, CONCERNS.md, and STRUCTURE.md first to bootstrap codebase understanding.

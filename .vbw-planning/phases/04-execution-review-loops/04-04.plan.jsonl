{"p":"04","n":"04","t":"Scout on-demand research request protocol","w":1,"d":[],"mh":["research_request handoff schema defined in handoff-schemas.md","research_response handoff schema defined for Scout→orchestrator→agent return","research.jsonl extended with ra (requesting_agent) and rt (request_type) fields","Scout agent updated with on-demand request handling","resolve-research-request.sh script created for blocking vs informational dispatch"],"obj":"Formalize Scout as shared on-demand research utility callable by any agent. Add research_request/research_response handoff schemas, extend research.jsonl with requesting_agent attribution, and create resolve-research-request.sh for blocking vs informational request routing."}
{"id":"T1","tp":"modify","a":"Update references/handoff-schemas.md: Add research_request schema (any agent → orchestrator): {type:'research_request', from:string (agent role), task:string (task ref), plan_id:string, query:string (research question), context:string (why needed), request_type:'blocking'|'informational', priority:'high'|'medium'|'low'}. Add research_response schema (orchestrator → requesting agent): {type:'research_response', request_from:string, query:string, findings:[{q, src, finding, conf}], request_type:string, resolved_at:string (ISO 8601)}. Note: 'Orchestrator writes research.jsonl from Scout findings. Scout never writes directly. Blocking requests pause requesting agent until response delivered. Informational requests are async — agent continues, findings appended when available.'","f":["references/handoff-schemas.md"],"v":"grep -c 'research_request' references/handoff-schemas.md returns >= 2; grep -c 'research_response' references/handoff-schemas.md returns >= 1","done":false}
{"id":"T2","tp":"modify","a":"Update references/artifact-formats.md: Extend research.jsonl Key Dictionary with: ra (requesting_agent, string — 'dev'|'senior'|'tester'|'orchestrator'|'critic'), rt (request_type, string — 'blocking'|'informational'). Add optional resolved_at field (ISO 8601, only present when rt='blocking' and fulfilled). Update the research.jsonl example to include ra and rt fields. Note: 'ra and rt are optional — backward compatible. Existing entries without these fields default to ra:orchestrator, rt:informational via jq // operator. Added in Phase 4.'","f":["references/artifact-formats.md"],"v":"grep -c '| `ra`' references/artifact-formats.md returns 1; grep -c '| `rt`' references/artifact-formats.md returns 1","done":false}
{"id":"T3","tp":"create","a":"Create scripts/resolve-research-request.sh: Routes research requests to Scout and manages blocking vs informational dispatch. Args: --phase-dir, --request-json (JSON string or file path with research_request schema), --config (defaults.json path). Logic: (1) Parse request JSON, extract request_type; (2) If blocking: validate timeout from config (research_requests.blocking_timeout_seconds, default 120); output JSON {status:'dispatching', request_type:'blocking', timeout:N} for orchestrator to spawn Scout synchronously and wait; (3) If informational: output JSON {status:'queued', request_type:'informational'} for orchestrator to queue Scout spawn for after current task; (4) Validate max concurrent scouts from config (research_requests.max_concurrent_scouts, default 4); (5) Append entry to research.jsonl with ra and rt fields populated from request. Use set -euo pipefail, jq only for JSON.","f":["scripts/resolve-research-request.sh"],"v":"File exists, bash -n scripts/resolve-research-request.sh exits 0, grep -c 'request_type' scripts/resolve-research-request.sh returns >= 2","done":false}
{"id":"T4","tp":"modify","a":"Update agents/yolo-scout.md: Add 'On-Demand Research' section. Scout can now be spawned mid-execution when any agent emits research_request. Scout receives: query, context, requesting_agent attribution, request_type. Scout output includes ra (requesting_agent) field in its findings. Add note: 'Scout remains read-only — orchestrator writes research.jsonl from Scout findings. Scout does not see who requested; orchestrator attributes via ra field.' Update the existing output schema to show ra field. Max 4 parallel Scout instances unchanged.","f":["agents/yolo-scout.md"],"v":"grep -c 'On-Demand Research' agents/yolo-scout.md returns 1; grep -c 'research_request' agents/yolo-scout.md returns >= 1","done":false}
{"id":"T5","tp":"modify","a":"Update agents/yolo-dev.md: Add research_request output type to Dev's available output schemas. Instructions: 'When blocked by missing information that requires external research (API documentation, library patterns, best practices), emit research_request to orchestrator instead of guessing. Set request_type to blocking if you cannot proceed without the answer, or informational if you can continue with a reasonable assumption. Do NOT use research_request for questions answerable from the codebase — use Grep/Read first.' Add example research_request emission.","f":["agents/yolo-dev.md"],"v":"grep -c 'research_request' agents/yolo-dev.md returns >= 2","done":false}

{"phase":"09","plan":"09-03","title":"Agent redundancy elimination: QA/QA-Code merge and secret scanning cleanup","wave":1,"depends_on":[],"must_haves":["QA and QA-Code merged into single QA agent with --mode plan|code","Secret scanning removed from QA-Code, exclusive to Security","Non-overlap matrix documented in references/agent-field-map.md"]}
{"id":"T1","title":"Merge QA template with QA-Code template into unified QA with two modes","file":"agents/templates/qa.md","action":"modify","desc":"Merge agents/templates/qa-code.md content into agents/templates/qa.md. Add mode section: when invoked with mode=plan (Step 9), QA performs plan-level verification (summary completeness, artifact existence, gate checks). When invoked with mode=code (Step 8 code review assist), QA performs code-level checks (test coverage, commit format, file naming). Remove secret scanning checks entirely from QA (moved to Security). Add <!-- mode:qa --> marker for mode filtering. Update the qa.md template to include both plan-level and code-level sections with clear mode markers."}
{"id":"T2","title":"Delete qa-code.md template and update overlays","file":"agents/templates/qa-code.md","action":"delete","desc":"Delete agents/templates/qa-code.md. Update agents/overlays/backend.json, frontend.json, uiux.json to remove qa-code role entries and merge qa-code overlay customizations into the qa role. The overlay should have a 'qa' entry that covers both modes."}
{"id":"T3","title":"Update context-manifest.json to merge qa-code into qa","file":"config/context-manifest.json","action":"modify","desc":"In context-manifest.json: merge the qa-code role definition into qa. The qa role should now have artifacts from both (plan, escalation, test-results, summary). Increase qa budget to cover both modes (2000+3000=3000 since code mode is only active when plan mode isn't). Remove qa-code, fe-qa-code, ux-qa-code entries. Update fe-qa and ux-qa includes to point to 'qa'. Remove all qa-code includes references."}
{"id":"T4","title":"Move secret scanning exclusively to Security agent","file":"agents/templates/security.md","action":"modify","desc":"Add explicit secret scanning section to security.md template: check for API keys, AWS credentials, private keys, connection strings, .env files, token patterns. This was previously duplicated in qa-code.md. Add clear comment: '<!-- Secret scanning is exclusive to Security agent. QA does NOT perform secret detection. -->'. Ensure the security template covers: (1) OWASP checks, (2) dependency audit, (3) secret scanning, (4) dept-specific checks from overlay."}
{"id":"T5","title":"Document non-overlap matrix in agent-field-map.md","file":"references/agent-field-map.md","action":"modify","desc":"Add new section '## Agent Non-Overlap Matrix' to references/agent-field-map.md. Document: (1) QA: plan-level verification + code-level review (NO secret scanning), (2) Security: secret scanning + OWASP + dependency audit (NO plan verification), (3) Critic: challenges Architect decisions with counter-arguments (NO external research), (4) Scout: researches external patterns/libraries/docs (NO architectural critique), (5) Architect: design decisions + scope (NO task decomposition), (6) Lead: task decomposition + delivery (NO design authority). Format as markdown table with columns: Agent | Responsibilities | Explicitly NOT responsible for."}

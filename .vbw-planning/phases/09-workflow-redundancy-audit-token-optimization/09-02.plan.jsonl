{"phase":"09","plan":"09-02","title":"Consolidate validate-*.sh scripts into single validate.sh","wave":1,"depends_on":[],"must_haves":["scripts/validate.sh --type plan|summary|naming|config|gates|deps|frontmatter replaces 7 scripts","All existing validation tests pass against new script"]}
{"id":"T1","title":"Create scripts/validate.sh with --type dispatcher","file":"scripts/validate.sh","action":"create","desc":"Create single validate.sh that accepts --type plan|summary|naming|config|gates|deps|frontmatter as first arg, then passes remaining args to internal functions. Source lib/yolo-common.sh (if it exists, graceful fallback if not). Each type maps to a function: validate_plan(), validate_summary(), validate_naming(), validate_config(), validate_gates(), validate_deps(), validate_frontmatter(). Extract logic from existing 7 scripts. For validate_commit and validate_send_message and validate_dept_spawn: these are hook-specific scripts that stay separate (they read stdin for hook input). Only consolidate the non-hook validators."}
{"id":"T2","title":"Migrate validate-plan.sh logic into validate.sh validate_plan()","file":"scripts/validate.sh","action":"modify","desc":"Move the full logic from validate-plan.sh into validate_plan() function inside validate.sh. Preserve all existing behavior: header validation, task key checks, wave ordering, circular dep detection, file path validation. Ensure exit codes match (0=valid, 1=invalid)."}
{"id":"T3","title":"Migrate validate-naming.sh, validate-config.sh, validate-gates.sh logic","file":"scripts/validate.sh","action":"modify","desc":"Move logic from validate-naming.sh into validate_naming(), validate-config.sh into validate_config(), validate-gates.sh into validate_gates(). Preserve all argument formats. validate-naming.sh supports --scope, --type, --turbo flags â€” pass through. validate-config.sh takes config-path and optional defaults-path. validate-gates.sh takes --step and --phase-dir."}
{"id":"T4","title":"Migrate validate-deps.sh, validate-summary.sh, validate-frontmatter.sh logic","file":"scripts/validate.sh","action":"modify","desc":"Move remaining validators: validate-deps.sh into validate_deps() (takes --roadmap-json), validate-summary.sh into validate_summary() (hook-style but can be called directly), validate-frontmatter.sh into validate_frontmatter() (hook-style). For hook-style validators (summary, frontmatter): keep the original scripts as thin wrappers that call validate.sh --type X to avoid breaking hooks. The hook reads stdin then calls validate.sh."}
{"id":"T5","title":"Update callers and delete deprecated validate scripts","file":"scripts/validate-plan.sh","action":"delete","desc":"Search all scripts, commands, and hooks for references to validate-plan.sh, validate-naming.sh, validate-config.sh, validate-gates.sh, validate-deps.sh. Update to validate.sh --type X. Delete the 5 non-hook validators (plan, naming, config, gates, deps). Keep validate-commit.sh, validate-send-message.sh, validate-dept-spawn.sh, validate-summary.sh, validate-frontmatter.sh as hook wrappers (they read stdin, not suitable for consolidation). Update session-start.sh if it calls validate-config.sh directly."}

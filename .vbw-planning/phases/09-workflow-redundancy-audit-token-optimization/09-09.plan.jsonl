{"phase":"09","plan":"09-09","title":"Mermaid architecture diagrams in docs/ARCHITECTURE.md","wave":4,"depends_on":["09-03","09-04","09-05","09-06"],"must_haves":["docs/ARCHITECTURE.md with 4 Mermaid diagrams","Diagrams reflect post-consolidation agent hierarchy","Diagrams reflect step-skip effort routing"]}
{"id":"T1","title":"Create docs/ARCHITECTURE.md with agent hierarchy diagram","file":"docs/ARCHITECTURE.md","action":"create","desc":"Create docs/ARCHITECTURE.md with introduction explaining purpose: 'Living architecture reference for YOLO workflow engine. Used for ongoing audit of agent roles, workflow steps, and data flow.' Add Diagram 1: Agent Hierarchy using Mermaid graph TD. Show 4 departments (Backend, Frontend, UI/UX, Shared), each with their agents. Show reporting lines: Dev->Senior->Lead->Architect, QA->Lead, Security->Lead, Tester->Lead, Documenter->Lead. Show shared agents (Owner, Critic, Scout, Debugger) connecting to all departments via Lead. Reflect QA/QA-Code merge (single QA with plan+code modes). Use subgraph for each department."}
{"id":"T2","title":"Add workflow steps and data flow diagram","file":"docs/ARCHITECTURE.md","action":"modify","desc":"Add Diagram 2: Workflow Steps & Data Flow using Mermaid flowchart LR. Show the 11-step workflow: PO(optional)->Critic->Scout->Architect->Lead(plan)->Senior(design review)->Tester(RED)->Dev(implement)->Senior(code review)->Documenter(optional)->QA->Security->Owner(signoff). Show artifact flow between steps: critique.jsonl, research.jsonl, architecture.toon, plan.jsonl, test-results.jsonl, summary.jsonl, code-review.jsonl, docs.jsonl, qa-report, security-report. Use node shapes to distinguish agents (rounded) from artifacts (diamond)."}
{"id":"T3","title":"Add complexity routing decision tree diagram","file":"docs/ARCHITECTURE.md","action":"modify","desc":"Add Diagram 3: Complexity Routing using Mermaid flowchart TD. Show decision tree: Input -> complexity-classify.sh -> {Trivial|Medium|High}. Trivial path: skip 7 steps, Senior->Dev, 3 estimated steps. Medium path: skip 6 steps, Lead->Senior->Dev->Senior->QA, 5 estimated steps. High path: full 11-step ceremony. Show which steps are skipped at each level. Include effort-level overlay showing additional skips (turbo skips Critic+Scout+Documenter+Security on top of complexity routing)."}
{"id":"T4","title":"Add hook system and script interactions diagram","file":"docs/ARCHITECTURE.md","action":"modify","desc":"Add Diagram 4: Hook System & Scripts using Mermaid flowchart. Show hook lifecycle: PreToolUse (department-guard, file-guard, block-plan-mode), PostToolUse (validate-commit, validate-summary, validate-frontmatter, validate-send-message), SubagentStart (template-generate-hook, validate-dept-spawn), Notification (qa-gate). Show script call chains: go.md -> compile-context.sh -> filter-agent-context.sh, go.md -> route.sh, go.md -> qa-gate.sh --tier. Show hook-wrapper.sh as the central router. Use consolidated script names (route.sh, validate.sh, qa-gate.sh)."}
{"id":"T5","title":"Add table of contents and cross-reference links","file":"docs/ARCHITECTURE.md","action":"modify","desc":"Add table of contents at top linking to each diagram section. Add cross-references to relevant source files: 'Source: commands/go.md', 'Source: references/execute-protocol.md', etc. Add a 'Last Updated' field at the top. Add a 'How to Update' section explaining that diagrams should be updated when agents are added/removed, workflow steps change, or scripts are consolidated. Reference this file from CLAUDE.md Key Decisions section."}

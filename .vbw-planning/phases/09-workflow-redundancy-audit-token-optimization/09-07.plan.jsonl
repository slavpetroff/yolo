{"phase":"09","plan":"09-07","title":"Config consolidation and Documenter spawning fix","wave":3,"depends_on":["09-03","09-06"],"must_haves":["defaults.json and mode-profiles.json consolidated with documented precedence","Documenter spawning respects config enum (on_request/always/never)","Documenter output consumed by orchestrator"]}
{"id":"T1","title":"Consolidate config sources with documented precedence","file":"config/defaults.json","action":"modify","desc":"Add '_precedence' documentation field to defaults.json explaining the config resolution chain: (1) CLI flags (--effort, --skip-qa) override everything, (2) .yolo-planning/config.json (project-specific, written by /yolo:config), (3) config/defaults.json (plugin defaults). Move mode-profiles.json section_catalog into defaults.json under a 'mode_profiles' key (since mode-profiles.json is only read by generate-agent.sh). Keep mode-profiles.json as-is for backward compat but add '_deprecated' note pointing to defaults.json."}
{"id":"T2","title":"Fix Documenter spawning to respect config enum","file":"commands/go.md","action":"modify","desc":"In go.md execute mode Step 8.5 (Documentation), add explicit gate check: 'Before spawning Documenter, call resolve-documenter-gate.sh --config .yolo-planning/config.json --trigger phase. If exit code is 1 (spawn=false), skip Step 8.5 entirely and write {\"step\":\"documentation\",\"status\":\"skipped\",\"reason\":\"documenter config={value}\"} to .execution-state.json.' Currently the gate exists but go.md doesn't consistently invoke it. Make it mandatory."}
{"id":"T3","title":"Ensure Documenter output is consumed","file":"commands/go.md","action":"modify","desc":"In go.md, after Step 8.5 completes (when Documenter runs), add instruction: 'Read the Documenter output (docs.jsonl) and include a summary in the phase delivery report. If Documenter produced warnings, include them in the Owner sign-off context.' Currently Documenter output is orphaned â€” no downstream agent reads it. The orchestrator should at minimum report what was documented."}
{"id":"T4","title":"Add mode-profiles deprecation note and update readers","file":"config/mode-profiles.json","action":"modify","desc":"Add '_deprecated' field: 'This file is maintained for backward compatibility. Canonical mode profiles are in defaults.json under mode_profiles key. generate-agent.sh reads defaults.json first, falls back to this file.'"}
{"id":"T5","title":"Update generate-agent.sh to read consolidated config","file":"scripts/generate-agent.sh","action":"modify","desc":"Modify generate-agent.sh mode filtering logic to: (1) Try reading mode profiles from config/defaults.json '.mode_profiles.modes' key, (2) Fall back to config/mode-profiles.json '.modes' key if not found. This enables the eventual removal of mode-profiles.json. Preserve all existing --mode flag behavior."}

{"p":"02","n":"03","t":"PO scripts, config, and dependency validator","w":1,"d":[],"mh":["PO config keys control loop behavior","po-scope-loop.sh enforces 3-round cap","validate-deps.sh catches circular dependencies","render-user-presentation.sh formats PO output for orchestrator"],"obj":"Create the PO-related scripts (scope loop orchestrator, user presentation renderer, dependency validator) and add PO configuration keys to defaults.json."}
{"id":"T1","tp":"feat","a":"Add PO configuration keys to config/defaults.json as a nested 'po' object: po.enabled (bool, default true), po.max_questionary_rounds (int, default 3), po.confidence_threshold (float, default 0.85), po.scope_output_format (string, default 'json'), po.skip_on_effort (array, default ['turbo']). Preserve all existing config structure unchanged.","f":["config/defaults.json"],"v":"jq '.po.max_questionary_rounds' config/defaults.json returns 3; jq '.po.confidence_threshold' config/defaults.json returns 0.85","done":false}
{"id":"T2","tp":"feat","a":"Create scripts/po-scope-loop.sh — orchestrates the PO-Questionary dialogue loop. Takes flags: --phase-dir <path>, --config <path>, --scope-draft <path>. Logic: (1) Read po.max_questionary_rounds from config (default 3); (2) Read po.confidence_threshold from config (default 0.85); (3) For round 1 to max_rounds: output round status JSON for orchestrator consumption, check scope_confidence from Questionary response; (4) If scope_confidence >= threshold: exit early with enriched_scope; (5) After max rounds: force-output final enriched_scope with assumptions noted; (6) Write scope-document.json to phase-dir; (7) Output JSON summary: {rounds_used: N, confidence: float, early_exit: bool, scope_path: string}. Uses jq for all JSON. set -u minimum. Exit 0 on success.","f":["scripts/po-scope-loop.sh"],"v":"File exists, is executable, contains set -u, reads po.max_questionary_rounds via jq, outputs JSON summary","done":false}
{"id":"T3","tp":"feat","a":"Create scripts/render-user-presentation.sh — renders user_presentation output from PO agent to formatted string for AskUserQuestion. Takes flags: --presentation <path-to-json>. Logic: (1) Read user_presentation JSON fields (type, content, options, context) via jq; (2) Format content as markdown; (3) Map options array to numbered choice list; (4) Output formatted string. set -u minimum. Enforces Owner-first proxy: PO produces user_presentation, orchestrator renders it.","f":["scripts/render-user-presentation.sh"],"v":"File exists, is executable, contains set -u, reads user_presentation JSON via jq","done":false}
{"id":"T4","tp":"feat","a":"Create scripts/validate-deps.sh — dependency graph validator for roadmap_plan JSON. Takes --roadmap-json <path>. Checks: (1) No circular dependencies via topological sort; (2) All referenced phase IDs exist in phases array; (3) No orphan phases that should have edges; (4) Critical path phases are connected. Outputs JSON: {valid: true|false, errors: [], warnings: []}. Uses jq for all parsing. set -euo pipefail. Exit 0 if valid, exit 1 if invalid.","f":["scripts/validate-deps.sh"],"v":"File exists, is executable, contains set -euo pipefail, uses jq, exits 0 on valid input","done":false}

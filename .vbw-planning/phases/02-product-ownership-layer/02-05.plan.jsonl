{"p":"02","n":"05","t":"Wire PO layer into go.md and execute-protocol","w":2,"d":["02-01","02-02","02-03","02-04"],"mh":["PO -> Questionary -> Tech Lead flow wired in go.md","Orchestrator renders PO user_presentation via AskUserQuestion","Backward compatible when po.enabled=false","execute-protocol.md updated with PO steps","Owner Mode 0 deprecated when po.enabled=true"],"obj":"Integrate the Product Owner layer into go.md orchestration and execute-protocol.md. Wire PO -> Questionary -> Roadmap -> Tech Lead flow. Orchestrator handles user_presentation rendering, preserving Owner-first proxy. Update Owner agent and CLAUDE.md for new architecture."}
{"id":"T1","tp":"feat","a":"Modify commands/go.md to add PO layer between Analyze routing and Lead dispatch. In Path 0, after Analyze returns suggested_path=full_ceremony: (1) Check po.enabled in config — if false, skip PO and dispatch to existing Critic->Architect->Lead flow unchanged (backward compat); (2) If true: resolve PO model, spawn yolo-po with user intent, analysis.json, codebase mapping, existing REQUIREMENTS.md/ROADMAP.md; (3) PO may emit user_presentation — for each: render via render-user-presentation.sh, present via AskUserQuestion, feed response back to PO; (4) PO invokes Questionary loop via po-scope-loop.sh; (5) PO invokes Roadmap agent (full_ceremony only); (6) PO writes scope-document.json to phase dir; (7) Dispatch to Critic->Architect->Lead with enriched scope. For medium_path: PO runs abbreviated (single-round Questionary, skip Roadmap). For trivial_shortcut: PO skipped entirely.","f":["commands/go.md"],"v":"grep -c 'po.enabled' commands/go.md returns >= 2; grep -c 'user_presentation' commands/go.md returns >= 1; grep -c 'yolo-po' commands/go.md returns >= 1","done":false}
{"id":"T2","tp":"feat","a":"Update references/execute-protocol.md to add PO steps. Add new section 'Step 0: Product Ownership (PO Agent)' before Step 1 (Critique). Document: (1) Guard: skip if po.enabled=false OR effort=turbo; (2) PO spawns Questionary for scope clarification (max 3 rounds); (3) PO spawns Roadmap Agent for dependency analysis (full_ceremony only); (4) PO produces scope-document.json; (5) user_presentation rendered by orchestrator; (6) ENTRY GATE: Analyze output exists OR active milestone detected; (7) EXIT GATE: scope-document.json exists with valid JSON. Update Execution State Transitions table with new step. Note workflow becomes 12-step (Step 0 + Steps 1-11) when PO enabled.","f":["references/execute-protocol.md"],"v":"grep -c 'Product Ownership' references/execute-protocol.md returns >= 1; grep -c 'scope-document.json' references/execute-protocol.md returns >= 1","done":false}
{"id":"T3","tp":"feat","a":"Update agents/yolo-owner.md to document PO relationship. Add 'PO Layer Integration' section: (1) When po.enabled=true, PO handles scope/vision/requirements (Owner Mode 0 tasks); (2) Owner retains Mode 1-4 unchanged (critique review, conflict resolution, sign-off, escalation); (3) Owner Mode 0 deprecated when po.enabled=true — go.md routes scope to PO instead; (4) Owner and PO coexist: PO handles pre-execution scope, Owner handles mid/post-execution oversight. Add deprecation notice on Mode 0.","f":["agents/yolo-owner.md"],"v":"grep -c 'PO Layer Integration' agents/yolo-owner.md returns 1; grep -c 'po.enabled' agents/yolo-owner.md returns >= 1","done":false}
{"id":"T4","tp":"feat","a":"Update references/company-hierarchy.md Data Flow section to show PO layer: Analyze -> PO (scope-document.json) -> Critic -> Scout -> Architect -> Lead. Update Command Routing Table /yolo:go (execute) row to include PO step. Add PO -> Questionary -> Roadmap handoff chain to Planning Team section. Note PO layer is optional (po.enabled config).","f":["references/company-hierarchy.md"],"v":"grep -c 'scope-document.json' references/company-hierarchy.md returns >= 1","done":false}
{"id":"T5","tp":"docs","a":"Update CLAUDE.md to reflect PO layer: (1) Note new agents (PO, Questionary, Roadmap) in architecture description; (2) Add key decisions: 'PO layer replaces Owner Mode 0 for scope gathering' and 'PO-Questionary loop capped at 3 rounds with 0.85 confidence threshold'; (3) Update workflow description to mention PO step before Critic when po.enabled=true.","f":["CLAUDE.md"],"v":"grep -c 'yolo-po' CLAUDE.md returns >= 1; grep -c 'Questionary' CLAUDE.md returns >= 1","done":false}
